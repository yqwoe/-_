import t from"/npm/ts-dedent@2.2.0/+esm";import e from"/npm/dayjs@1.11.10/+esm";import{sanitizeUrl as i}from"/npm/@braintree/sanitize-url@6.0.4/+esm";import{select as r,curveBasis as n,curveBasisClosed as s,curveBasisOpen as a,curveBumpX as o,curveBumpY as l,curveBundle as h,curveCardinalClosed as d,curveCardinalOpen as u,curveCardinal as p,curveCatmullRomClosed as g,curveCatmullRomOpen as y,curveCatmullRom as f,curveLinear as m,curveLinearClosed as b,curveMonotoneX as x,curveMonotoneY as k,curveNatural as _,curveStep as C,curveStepAfter as T,curveStepBefore as E,selectAll as v,scaleTime as S,min as w,max as A,scaleLinear as B,interpolateHcl as L,axisBottom as D,timeFormat as I,timeMonth as O,timeWeek as F,timeDay as N,timeHour as $,timeMinute as R,axisTop as M,scaleOrdinal as P,pie as z,arc as j,line as Y}from"/npm/d3@7.8.5/+esm";import W from"/npm/dompurify@2.4.3/+esm";import{lighten as q,adjust as U,invert as V,rgba as H,darken as G}from"/npm/khroma@2.1.0/+esm";import X from"/npm/lodash-es@4.17.21/memoize.js/+esm";import{serialize as K,compile as Q,stringify as Z}from"/npm/stylis@4.3.1/+esm";import{layout as J}from"/npm/dagre-d3-es@7.0.9/src/dagre/index.js/+esm";import*as tt from"/npm/dagre-d3-es@7.0.9/src/graphlib/index.js/+esm";import*as et from"/npm/dagre-d3-es@7.0.9/src/graphlib/json.js/+esm";import{v5 as it}from"/npm/uuid@9.0.1/+esm";import{render as rt}from"/npm/dagre-d3-es@7.0.9/+esm";import{applyStyle as nt}from"/npm/dagre-d3-es@7.0.9/src/dagre-js/util.js/+esm";import{addHtmlLabel as st}from"/npm/dagre-d3-es@7.0.9/src/dagre-js/label/add-html-label.js/+esm";import{intersectPolygon as at}from"/npm/dagre-d3-es@7.0.9/src/dagre-js/intersect/intersect-polygon.js/+esm";import{intersectRect as ot}from"/npm/dagre-d3-es@7.0.9/src/dagre-js/intersect/intersect-rect.js/+esm";import lt from"/npm/dayjs@1.11.10/plugin/isoWeek.js/+esm";import ct from"/npm/dayjs@1.11.10/plugin/customParseFormat.js/+esm";import ht from"/npm/dayjs@1.11.10/plugin/advancedFormat.js/+esm";import dt from"/npm/lodash-es@4.17.21/isEmpty.js/+esm";const ut={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},pt={trace:()=>{},debug:()=>{},info:()=>{},warn:()=>{},error:()=>{},fatal:()=>{}},gt=function(t="fatal"){let e=ut.fatal;"string"==typeof t?(t=t.toLowerCase())in ut&&(e=ut[t]):"number"==typeof t&&(e=t),pt.trace=()=>{},pt.debug=()=>{},pt.info=()=>{},pt.warn=()=>{},pt.error=()=>{},pt.fatal=()=>{},e<=ut.fatal&&(pt.fatal=console.error?console.error.bind(console,yt("FATAL"),"color: orange"):console.log.bind(console,"[35m",yt("FATAL"))),e<=ut.error&&(pt.error=console.error?console.error.bind(console,yt("ERROR"),"color: orange"):console.log.bind(console,"[31m",yt("ERROR"))),e<=ut.warn&&(pt.warn=console.warn?console.warn.bind(console,yt("WARN"),"color: orange"):console.log.bind(console,"[33m",yt("WARN"))),e<=ut.info&&(pt.info=console.info?console.info.bind(console,yt("INFO"),"color: lightblue"):console.log.bind(console,"[34m",yt("INFO"))),e<=ut.debug&&(pt.debug=console.debug?console.debug.bind(console,yt("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",yt("DEBUG"))),e<=ut.trace&&(pt.trace=console.debug?console.debug.bind(console,yt("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",yt("TRACE")))},yt=t=>`%c${e().format("ss.SSS")} : ${t} : `,ft=t=>W.sanitize(t),mt=(t,e)=>{var i;if(!1!==(null==(i=e.flowchart)?void 0:i.htmlLabels)){const i=e.securityLevel;"antiscript"===i||"strict"===i?t=ft(t):"loose"!==i&&(t=(t=(t=_t(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),t=kt(t))}return t},bt=(t,e)=>t&&(e.dompurifyConfig?W.sanitize(mt(t,e),e.dompurifyConfig):W.sanitize(mt(t,e),{FORBID_TAGS:["style"]})).toString(),xt=/<br\s*\/?>/gi,kt=t=>t.replace(/#br#/g,"<br/>"),_t=t=>t.replace(xt,"#br#"),Ct=t=>!1!==t&&!["false","null","0"].includes(String(t).trim().toLowerCase()),Tt=function(t){let e=t;if(2<=t.split("~").length-1){let t=e;for(;(t=(e=t).replace(/~([^\s,:;]+)~/,"<$1>"))!=e;);return Tt(t)}return e},Et={getRows:t=>t?_t(t).replace(/\\n/g,"#br#").split("#br#"):[""],sanitizeText:bt,sanitizeTextOrArray:(t,e)=>"string"==typeof t?bt(t,e):t.flat().map(t=>bt(t,e)),hasBreaks:t=>xt.test(t),splitBreaks:t=>t.split(xt),lineBreakRegex:xt,removeScript:ft,getUrl:t=>{let e="";return e=t?(e=(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replaceAll(/\(/g,"\\(")).replaceAll(/\)/g,"\\)"):e},evaluate:Ct},vt=(t,e)=>U(t,e?{s:-40,l:10}:{s:-40,l:-10}),St="#ffffff",wt="#f2f2f2";class At{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=q(this.contrast,55),this.background="#ffffff",this.tertiaryColor=U(this.primaryColor,{h:-160}),this.primaryBorderColor=vt(this.primaryColor,this.darkMode),this.secondaryBorderColor=vt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=vt(this.tertiaryColor,this.darkMode),this.primaryTextColor=V(this.primaryColor),this.secondaryTextColor=V(this.secondaryColor),this.tertiaryTextColor=V(this.tertiaryColor),this.lineColor=V(this.background),this.textColor=V(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=q(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||V(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||q(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||G(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||U(this.mainBkg,{l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||U(this.mainBkg,{l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=q(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=q(this.contrast,30),this.sectionBkgColor2=q(this.contrast,30),this.taskBorderColor=G(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=q(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=G(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=U(this.primaryColor,{h:64}),this.fillType3=U(this.secondaryColor,{h:64}),this.fillType4=U(this.primaryColor,{h:-64}),this.fillType5=U(this.secondaryColor,{h:-64}),this.fillType6=U(this.primaryColor,{h:128}),this.fillType7=U(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=G(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||U(this.primaryColor,{h:-30}),this.git4=this.pie5||U(this.primaryColor,{h:-60}),this.git5=this.pie6||U(this.primaryColor,{h:-90}),this.git6=this.pie7||U(this.primaryColor,{h:60}),this.git7=this.pie8||U(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||V(this.git0),this.gitInv1=this.gitInv1||V(this.git1),this.gitInv2=this.gitInv2||V(this.git2),this.gitInv3=this.gitInv3||V(this.git3),this.gitInv4=this.gitInv4||V(this.git4),this.gitInv5=this.gitInv5||V(this.git5),this.gitInv6=this.gitInv6||V(this.git6),this.gitInv7=this.gitInv7||V(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||St,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||wt}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}const Bt={base:{getThemeVariables:t=>{var e=new class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||U(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||U(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||vt(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||vt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||vt(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||vt(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||V(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||V(this.tertiaryColor),this.lineColor=this.lineColor||V(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?G(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||G(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||V(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||q(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||U(this.primaryColor,{h:30}),this.cScale4=this.cScale4||U(this.primaryColor,{h:60}),this.cScale5=this.cScale5||U(this.primaryColor,{h:90}),this.cScale6=this.cScale6||U(this.primaryColor,{h:120}),this.cScale7=this.cScale7||U(this.primaryColor,{h:150}),this.cScale8=this.cScale8||U(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||U(this.primaryColor,{h:270}),this.cScale10=this.cScale10||U(this.primaryColor,{h:300}),this.cScale11=this.cScale11||U(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=G(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=G(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||V(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||q(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||G(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;var e=this.darkMode?-4:-1;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||U(this.mainBkg,{h:180,s:-15,l:e*(5+3*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||U(this.mainBkg,{h:180,s:-15,l:e*(8+3*t)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||U(this.primaryColor,{h:64}),this.fillType3=this.fillType3||U(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||U(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||U(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||U(this.primaryColor,{h:128}),this.fillType7=this.fillType7||U(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||U(this.primaryColor,{l:-10}),this.pie5=this.pie5||U(this.secondaryColor,{l:-10}),this.pie6=this.pie6||U(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||U(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||U(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||U(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||U(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||U(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||U(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?G(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||U(this.primaryColor,{h:-30}),this.git4=this.git4||U(this.primaryColor,{h:-60}),this.git5=this.git5||U(this.primaryColor,{h:-90}),this.git6=this.git6||U(this.primaryColor,{h:60}),this.git7=this.git7||U(this.primaryColor,{h:120}),this.darkMode?(this.git0=q(this.git0,25),this.git1=q(this.git1,25),this.git2=q(this.git2,25),this.git3=q(this.git3,25),this.git4=q(this.git4,25),this.git5=q(this.git5,25),this.git6=q(this.git6,25),this.git7=q(this.git7,25)):(this.git0=G(this.git0,25),this.git1=G(this.git1,25),this.git2=G(this.git2,25),this.git3=G(this.git3,25),this.git4=G(this.git4,25),this.git5=G(this.git5,25),this.git6=G(this.git6,25),this.git7=G(this.git7,25)),this.gitInv0=this.gitInv0||V(this.git0),this.gitInv1=this.gitInv1||V(this.git1),this.gitInv2=this.gitInv2||V(this.git2),this.gitInv3=this.gitInv3||V(this.git3),this.gitInv4=this.gitInv4||V(this.git4),this.gitInv5=this.gitInv5||V(this.git5),this.gitInv6=this.gitInv6||V(this.git6),this.gitInv7=this.gitInv7||V(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||St,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||wt}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}};return e.calculate(t),e}},dark:{getThemeVariables:t=>{var e=new class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=q(this.primaryColor,16),this.tertiaryColor=U(this.primaryColor,{h:-160}),this.primaryBorderColor=V(this.background),this.secondaryBorderColor=vt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=vt(this.tertiaryColor,this.darkMode),this.primaryTextColor=V(this.primaryColor),this.secondaryTextColor=V(this.secondaryColor),this.tertiaryTextColor=V(this.tertiaryColor),this.lineColor=V(this.background),this.textColor=V(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=q(V("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=H(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=G("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=H(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=H(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=q(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=q(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=q(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=U(this.primaryColor,{h:64}),this.fillType3=U(this.secondaryColor,{h:64}),this.fillType4=U(this.primaryColor,{h:-64}),this.fillType5=U(this.secondaryColor,{h:-64}),this.fillType6=U(this.primaryColor,{h:128}),this.fillType7=U(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||U(this.primaryColor,{h:30}),this.cScale4=this.cScale4||U(this.primaryColor,{h:60}),this.cScale5=this.cScale5||U(this.primaryColor,{h:90}),this.cScale6=this.cScale6||U(this.primaryColor,{h:120}),this.cScale7=this.cScale7||U(this.primaryColor,{h:150}),this.cScale8=this.cScale8||U(this.primaryColor,{h:210}),this.cScale9=this.cScale9||U(this.primaryColor,{h:270}),this.cScale10=this.cScale10||U(this.primaryColor,{h:300}),this.cScale11=this.cScale11||U(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||V(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||q(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||U(this.mainBkg,{h:30,s:-30,l:-(4*t-10)}),this["surfacePeer"+t]=this["surfacePeer"+t]||U(this.mainBkg,{h:30,s:-30,l:-(4*t-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?G(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=q(this.secondaryColor,20),this.git1=q(this.pie2||this.secondaryColor,20),this.git2=q(this.pie3||this.tertiaryColor,20),this.git3=q(this.pie4||U(this.primaryColor,{h:-30}),20),this.git4=q(this.pie5||U(this.primaryColor,{h:-60}),20),this.git5=q(this.pie6||U(this.primaryColor,{h:-90}),10),this.git6=q(this.pie7||U(this.primaryColor,{h:60}),10),this.git7=q(this.pie8||U(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||V(this.git0),this.gitInv1=this.gitInv1||V(this.git1),this.gitInv2=this.gitInv2||V(this.git2),this.gitInv3=this.gitInv3||V(this.git3),this.gitInv4=this.gitInv4||V(this.git4),this.gitInv5=this.gitInv5||V(this.git5),this.gitInv6=this.gitInv6||V(this.git6),this.gitInv7=this.gitInv7||V(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||q(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||q(this.background,2)}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}};return e.calculate(t),e}},default:{getThemeVariables:t=>{var e=new class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=U(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=U(this.primaryColor,{h:-160}),this.primaryBorderColor=vt(this.primaryColor,this.darkMode),this.secondaryBorderColor=vt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=vt(this.tertiaryColor,this.darkMode),this.primaryTextColor=V(this.primaryColor),this.secondaryTextColor=V(this.secondaryColor),this.tertiaryTextColor=V(this.tertiaryColor),this.lineColor=V(this.background),this.textColor=V(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=H(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||U(this.primaryColor,{h:30}),this.cScale4=this.cScale4||U(this.primaryColor,{h:60}),this.cScale5=this.cScale5||U(this.primaryColor,{h:90}),this.cScale6=this.cScale6||U(this.primaryColor,{h:120}),this.cScale7=this.cScale7||U(this.primaryColor,{h:150}),this.cScale8=this.cScale8||U(this.primaryColor,{h:210}),this.cScale9=this.cScale9||U(this.primaryColor,{h:270}),this.cScale10=this.cScale10||U(this.primaryColor,{h:300}),this.cScale11=this.cScale11||U(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||G(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||G(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=G(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||G(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||U(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||U(this.mainBkg,{h:30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||U(this.mainBkg,{h:30,l:-(7+5*t)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||V(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||V(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=q(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=U(this.primaryColor,{h:64}),this.fillType3=U(this.secondaryColor,{h:64}),this.fillType4=U(this.primaryColor,{h:-64}),this.fillType5=U(this.secondaryColor,{h:-64}),this.fillType6=U(this.primaryColor,{h:128}),this.fillType7=U(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||U(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||U(this.primaryColor,{l:-10}),this.pie5=this.pie5||U(this.secondaryColor,{l:-30}),this.pie6=this.pie6||U(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||U(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||U(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||U(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||U(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||U(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||U(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||U(this.primaryColor,{h:-30}),this.git4=this.git4||U(this.primaryColor,{h:-60}),this.git5=this.git5||U(this.primaryColor,{h:-90}),this.git6=this.git6||U(this.primaryColor,{h:60}),this.git7=this.git7||U(this.primaryColor,{h:120}),this.darkMode?(this.git0=q(this.git0,25),this.git1=q(this.git1,25),this.git2=q(this.git2,25),this.git3=q(this.git3,25),this.git4=q(this.git4,25),this.git5=q(this.git5,25),this.git6=q(this.git6,25),this.git7=q(this.git7,25)):(this.git0=G(this.git0,25),this.git1=G(this.git1,25),this.git2=G(this.git2,25),this.git3=G(this.git3,25),this.git4=G(this.git4,25),this.git5=G(this.git5,25),this.git6=G(this.git6,25),this.git7=G(this.git7,25)),this.gitInv0=this.gitInv0||G(V(this.git0),25),this.gitInv1=this.gitInv1||V(this.git1),this.gitInv2=this.gitInv2||V(this.git2),this.gitInv3=this.gitInv3||V(this.git3),this.gitInv4=this.gitInv4||V(this.git4),this.gitInv5=this.gitInv5||V(this.git5),this.gitInv6=this.gitInv6||V(this.git6),this.gitInv7=this.gitInv7||V(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||V(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||V(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||St,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||wt}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}};return e.calculate(t),e}},forest:{getThemeVariables:t=>{var e=new class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=q("#cde498",10),this.primaryBorderColor=vt(this.primaryColor,this.darkMode),this.secondaryBorderColor=vt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=vt(this.tertiaryColor,this.darkMode),this.primaryTextColor=V(this.primaryColor),this.secondaryTextColor=V(this.secondaryColor),this.tertiaryTextColor=V(this.primaryColor),this.lineColor=V(this.background),this.textColor=V(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||U(this.primaryColor,{h:30}),this.cScale4=this.cScale4||U(this.primaryColor,{h:60}),this.cScale5=this.cScale5||U(this.primaryColor,{h:90}),this.cScale6=this.cScale6||U(this.primaryColor,{h:120}),this.cScale7=this.cScale7||U(this.primaryColor,{h:150}),this.cScale8=this.cScale8||U(this.primaryColor,{h:210}),this.cScale9=this.cScale9||U(this.primaryColor,{h:270}),this.cScale10=this.cScale10||U(this.primaryColor,{h:300}),this.cScale11=this.cScale11||U(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||G(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||G(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=G(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||G(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||U(this["cScale"+t],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||U(this.mainBkg,{h:30,s:-30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||U(this.mainBkg,{h:30,s:-30,l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=G(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=U(this.primaryColor,{h:64}),this.fillType3=U(this.secondaryColor,{h:64}),this.fillType4=U(this.primaryColor,{h:-64}),this.fillType5=U(this.secondaryColor,{h:-64}),this.fillType6=U(this.primaryColor,{h:128}),this.fillType7=U(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||U(this.primaryColor,{l:-30}),this.pie5=this.pie5||U(this.secondaryColor,{l:-30}),this.pie6=this.pie6||U(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||U(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||U(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||U(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||U(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||U(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||U(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||U(this.primaryColor,{h:-30}),this.git4=this.git4||U(this.primaryColor,{h:-60}),this.git5=this.git5||U(this.primaryColor,{h:-90}),this.git6=this.git6||U(this.primaryColor,{h:60}),this.git7=this.git7||U(this.primaryColor,{h:120}),this.darkMode?(this.git0=q(this.git0,25),this.git1=q(this.git1,25),this.git2=q(this.git2,25),this.git3=q(this.git3,25),this.git4=q(this.git4,25),this.git5=q(this.git5,25),this.git6=q(this.git6,25),this.git7=q(this.git7,25)):(this.git0=G(this.git0,25),this.git1=G(this.git1,25),this.git2=G(this.git2,25),this.git3=G(this.git3,25),this.git4=G(this.git4,25),this.git5=G(this.git5,25),this.git6=G(this.git6,25),this.git7=G(this.git7,25)),this.gitInv0=this.gitInv0||V(this.git0),this.gitInv1=this.gitInv1||V(this.git1),this.gitInv2=this.gitInv2||V(this.git2),this.gitInv3=this.gitInv3||V(this.git3),this.gitInv4=this.gitInv4||V(this.git4),this.gitInv5=this.gitInv5||V(this.git5),this.gitInv6=this.gitInv6||V(this.git6),this.gitInv7=this.gitInv7||V(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||St,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||wt}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}};return e.calculate(t),e}},neutral:{getThemeVariables:t=>{var e=new At;return e.calculate(t),e}}},Lt={theme:"default",themeVariables:Bt.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},timeline:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16},Dt=(Lt.class&&(Lt.class.arrowMarkerAbsolute=Lt.arrowMarkerAbsolute),Lt.gitGraph&&(Lt.gitGraph.arrowMarkerAbsolute=Lt.arrowMarkerAbsolute),(i,r="")=>Object.keys(i).reduce((t,e)=>Array.isArray(i[e])?t:"object"==typeof i[e]&&null!==i[e]?[...t,r+e,...Dt(i[e],"")]:[...t,r+e],[])),It=Dt(Lt,""),Ot=Lt;function Ft(t){return null==t}var Nt={isNothing:Ft,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:Ft(t)?[]:[t]},repeat:function(t,e){for(var i="",r=0;r<e;r+=1)i+=t;return i},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var i,r,a,s;if(e)for(i=0,r=(s=Object.keys(e)).length;i<r;i+=1)t[a=s[i]]=e[a];return t}};function $t(t,e){var i="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+="\n\n"+t.mark.snippet),r+" "+i):r}function Rt(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=$t(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Rt.prototype=Object.create(Error.prototype),(Rt.prototype.constructor=Rt).prototype.toString=function(t){return this.name+": "+$t(this,t)};var Mt=Rt;function Pt(t,e,i,r,a){var s="",n="",a=Math.floor(a/2)-1;return a<r-e&&(e=r-a+(s=" ... ").length),a<i-r&&(i=r+a-(n=" ...").length),{str:s+t.slice(e,i).replace(/\t/g,"→")+n,pos:r-e+s.length}}function zt(t,e){return Nt.repeat(" ",e-t.length)+t}var jt=function(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var i,r=/\r?\n|\r|\0/g,a=[0],s=[],n=-1;i=r.exec(t.buffer);)s.push(i.index),a.push(i.index+i[0].length),t.position<=i.index&&n<0&&(n=a.length-2);n<0&&(n=a.length-1);for(var o,l="",c=Math.min(t.line+e.linesAfter,s.length).toString().length,h=e.maxLength-(e.indent+c+3),d=1;d<=e.linesBefore&&!(n-d<0);d++)o=Pt(t.buffer,a[n-d],s[n-d],t.position-(a[n]-a[n-d]),h),l=Nt.repeat(" ",e.indent)+zt((t.line-d+1).toString(),c)+" | "+o.str+"\n"+l;for(o=Pt(t.buffer,a[n],s[n],t.position,h),l=(l+=Nt.repeat(" ",e.indent)+zt((t.line+1).toString(),c)+" | "+o.str+"\n")+(Nt.repeat("-",e.indent+c+3+o.pos)+"^\n"),d=1;d<=e.linesAfter&&!(s.length<=n+d);d++)o=Pt(t.buffer,a[n+d],s[n+d],t.position-(a[n]-a[n+d]),h),l+=Nt.repeat(" ",e.indent)+zt((t.line+d+1).toString(),c)+" | "+o.str+"\n";return l.replace(/\n$/,"")},Yt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Wt=["scalar","sequence","mapping"],qt=function(e,t){var i,r;if(t=t||{},Object.keys(t).forEach(function(t){if(-1===Yt.indexOf(t))throw new Mt('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(t){return t},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(i=t.styleAliases||null,r={},null!==i&&Object.keys(i).forEach(function(e){i[e].forEach(function(t){r[String(t)]=e})}),r),-1===Wt.indexOf(this.kind))throw new Mt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function Ut(t,e){var a=[];return t[e].forEach(function(i){var r=a.length;a.forEach(function(t,e){t.tag===i.tag&&t.kind===i.kind&&t.multi===i.multi&&(r=e)}),a[r]=i}),a}function Vt(t){return this.extend(t)}Vt.prototype.extend=function(t){var e=[],i=[];if(t instanceof qt)i.push(t);else if(Array.isArray(t))i=i.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new Mt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit))}e.forEach(function(t){if(!(t instanceof qt))throw new Mt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new Mt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new Mt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(t){if(!(t instanceof qt))throw new Mt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});t=Object.create(Vt.prototype);return t.implicit=(this.implicit||[]).concat(e),t.explicit=(this.explicit||[]).concat(i),t.compiledImplicit=Ut(t,"implicit"),t.compiledExplicit=Ut(t,"explicit"),t.compiledTypeMap=function(){var t,e,i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(t){t.multi?(i.multi[t.kind].push(t),i.multi.fallback.push(t)):i[t.kind][t.tag]=i.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return i}(t.compiledImplicit,t.compiledExplicit),t};var Ht=new Vt({explicit:[new qt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new qt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new qt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]}),Gt=new qt("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){var e;return null===t||1===(e=t.length)&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Xt=new qt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){var e;return null!==t&&(4===(e=t.length)&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t))},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Kt(t){return 48<=t&&t<=55}function Qt(t){return 48<=t&&t<=57}var Zt=new qt("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,i,r=t.length,a=0,s=!1;if(!r)return!1;if("0"===(e="-"!==(e=t[a])&&"+"!==e?e:t[++a])){if(a+1===r)return!0;if("b"===(e=t[++a])){for(a++;a<r;a++)if("_"!==(e=t[a])){if("0"!==e&&"1"!==e)return!1;s=!0}return s&&"_"!==e}if("x"===e){for(a++;a<r;a++)if("_"!==(e=t[a])){if(!(48<=(i=t.charCodeAt(a))&&i<=57||65<=i&&i<=70||97<=i&&i<=102))return!1;s=!0}return s&&"_"!==e}if("o"===e){for(a++;a<r;a++)if("_"!==(e=t[a])){if(!Kt(t.charCodeAt(a)))return!1;s=!0}return s&&"_"!==e}}if("_"===e)return!1;for(;a<r;a++)if("_"!==(e=t[a])){if(!Qt(t.charCodeAt(a)))return!1;s=!0}return!(!s||"_"===e)},construct:function(t){var e,i=1;if("-"!==(e=(t=-1!==t.indexOf("_")?t.replace(/_/g,""):t)[0])&&"+"!==e||("-"===e&&(i=-1),e=(t=t.slice(1))[0]),"0"===t)return 0;if("0"===e){if("b"===t[1])return i*parseInt(t.slice(2),2);if("x"===t[1])return i*parseInt(t.slice(2),16);if("o"===t[1])return i*parseInt(t.slice(2),8)}return i*parseInt(t,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Nt.isNegativeZero(t)},represent:{binary:function(t){return 0<=t?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return 0<=t?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return 0<=t?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Jt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),te=/^[-+]?[0-9]+e/,ee=new qt("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!(!Jt.test(t)||"_"===t[t.length-1])},construct:function(t){var e="-"===(t=t.replace(/_/g,"").toLowerCase())[0]?-1:1;return".inf"===(t=0<="+-".indexOf(t[0])?t.slice(1):t)?1==e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:e*parseFloat(t,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Nt.isNegativeZero(t))},represent:function(t,e){if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Nt.isNegativeZero(t))return"-0.0";return e=t.toString(10),te.test(e)?e.replace("e",".e"):e},defaultStyle:"lowercase"}),ie=Ht.extend({implicit:[Gt,Xt,Zt,ee]}),re=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ne=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),se=new qt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==re.exec(t)||null!==ne.exec(t))},construct:function(t){var e,i,r,a,s,n,o=0,l=null;if(null===(n=null===(n=re.exec(t))?ne.exec(t):n))throw new Error("Date resolve error");if(t=+n[1],e=+n[2]-1,i=+n[3],!n[4])return new Date(Date.UTC(t,e,i));if(r=+n[4],a=+n[5],s=+n[6],n[7]){for(o=n[7].slice(0,3);o.length<3;)o+="0";o=+o}return n[9]&&(l=6e4*(60*+n[10]+ +(n[11]||0)),"-"===n[9])&&(l=-l),n=new Date(Date.UTC(t,e,i,r,a,s,o)),l&&n.setTime(n.getTime()-l),n},instanceOf:Date,represent:function(t){return t.toISOString()}}),ae=new qt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",le=new qt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;for(var e,i=0,r=t.length,a=oe,s=0;s<r;s++)if(!(64<(e=a.indexOf(t.charAt(s))))){if(e<0)return!1;i+=6}return i%8==0},construct:function(t){for(var e=t.replace(/[\r\n=]/g,""),i=e.length,r=oe,a=0,s=[],n=0;n<i;n++)n%4==0&&n&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|r.indexOf(e.charAt(n));return 0==(t=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18==t?(s.push(a>>10&255),s.push(a>>2&255)):12==t&&s.push(a>>4&255),new Uint8Array(s)},predicate:function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function(t){for(var e,i="",r=0,a=t.length,s=oe,n=0;n<a;n++)n%3==0&&n&&(i=(i=(i=(i+=s[r>>18&63])+s[r>>12&63])+s[r>>6&63])+s[63&r]),r=(r<<8)+t[n];return 0==(e=a%3)?i=(i=(i=(i+=s[r>>18&63])+s[r>>12&63])+s[r>>6&63])+s[63&r]:2==e?i=(i=(i=(i+=s[r>>10&63])+s[r>>4&63])+s[r<<2&63])+s[64]:1==e&&(i=(i=(i=(i+=s[r>>2&63])+s[r<<4&63])+s[64])+s[64]),i}}),ce=Object.prototype.hasOwnProperty,he=Object.prototype.toString,de=new qt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null!==t)for(var e,i,r,a=[],s=t,n=0,o=s.length;n<o;n+=1){if(e=s[n],r=!1,"[object Object]"!==he.call(e))return!1;for(i in e)if(ce.call(e,i)){if(r)return!1;r=!0}if(!r)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(t){return null!==t?t:[]}}),ue=Object.prototype.toString,pe=new qt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null!==t)for(var e,i,r=t,a=new Array(r.length),s=0,n=r.length;s<n;s+=1){if(e=r[s],"[object Object]"!==ue.call(e))return!1;if(1!==(i=Object.keys(e)).length)return!1;a[s]=[i[0],e[i[0]]]}return!0},construct:function(t){if(null===t)return[];for(var e,i,r=t,a=new Array(r.length),s=0,n=r.length;s<n;s+=1)e=r[s],i=Object.keys(e),a[s]=[i[0],e[i[0]]];return a}}),ge=Object.prototype.hasOwnProperty,ye=new qt("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null!==t){var e,i=t;for(e in i)if(ge.call(i,e)&&null!==i[e])return!1}return!0},construct:function(t){return null!==t?t:{}}}),fe=ie.extend({implicit:[se,ae],explicit:[le,de,pe,ye]}),me=Object.prototype.hasOwnProperty,be=1,xe=2,ke=3,_e=4,Ce=1,Te=2,Ee=3,ve=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Se=/[\x85\u2028\u2029]/,we=/[,\[\]\{\}]/,Ae=/^(?:!|!!|![a-z\-]+!)$/i,Be=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Le(t){return Object.prototype.toString.call(t)}function De(t){return 10===t||13===t}function Ie(t){return 9===t||32===t}function Oe(t){return 9===t||32===t||10===t||13===t}function Fe(t){return 44===t||91===t||93===t||123===t||125===t}function Ne(t){return 48<=t&&t<=57?t-48:97<=(t=32|t)&&t<=102?t-97+10:-1}function $e(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}function Re(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var Me=new Array(256),Pe=new Array(256),ze=0;ze<256;ze++)Me[ze]=$e(ze)?1:0,Pe[ze]=$e(ze);function je(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||fe,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ye(t,e){t={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return t.snippet=jt(t),new Mt(e,t)}function We(t,e){throw Ye(t,e)}function qe(t,e){t.onWarning&&t.onWarning.call(null,Ye(t,e))}var Ue={YAML:function(t,e,i){var r,a;null!==t.version&&We(t,"duplication of %YAML directive"),1!==i.length&&We(t,"YAML directive accepts exactly one argument"),null===(a=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&We(t,"ill-formed argument of the YAML directive"),r=parseInt(a[1],10),a=parseInt(a[2],10),1!==r&&We(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=a<2,1!==a&&2!==a&&qe(t,"unsupported YAML version of the document")},TAG:function(t,e,i){var r;2!==i.length&&We(t,"TAG directive accepts exactly two arguments"),r=i[0],i=i[1],Ae.test(r)||We(t,"ill-formed tag handle (first argument) of the TAG directive"),me.call(t.tagMap,r)&&We(t,'there is a previously declared suffix for "'+r+'" tag handle'),Be.test(i)||We(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(e){We(t,"tag prefix is malformed: "+i)}t.tagMap[r]=i}};function Ve(t,e,i,r){var a,s,n,o;if(e<i){if(o=t.input.slice(e,i),r)for(a=0,s=o.length;a<s;a+=1)9===(n=o.charCodeAt(a))||32<=n&&n<=1114111||We(t,"expected valid JSON character");else ve.test(o)&&We(t,"the stream contains non-printable characters");t.result+=o}}function He(t,e,i,r){var a,s,n,o;for(Nt.isObject(i)||We(t,"cannot merge mappings; the provided source object is unacceptable"),n=0,o=(a=Object.keys(i)).length;n<o;n+=1)s=a[n],me.call(e,s)||(e[s]=i[s],r[s]=!0)}function Ge(t,e,i,r,a,s,n,o,l){var c,h;if(Array.isArray(a))for(c=0,h=(a=Array.prototype.slice.call(a)).length;c<h;c+=1)Array.isArray(a[c])&&We(t,"nested arrays are not supported inside keys"),"object"==typeof a&&"[object Object]"===Le(a[c])&&(a[c]="[object Object]");if("object"==typeof a&&"[object Object]"===Le(a)&&(a="[object Object]"),a=String(a),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(s))for(c=0,h=s.length;c<h;c+=1)He(t,e,s[c],i);else He(t,e,s,i);else t.json||me.call(i,a)||!me.call(e,a)||(t.line=n||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,We(t,"duplicated mapping key")),"__proto__"===a?Object.defineProperty(e,a,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[a]=s,delete i[a];return e}function Xe(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):We(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ke(t,e,i){for(var r=0,a=t.input.charCodeAt(t.position);0!==a;){for(;Ie(a);)9===a&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),a=t.input.charCodeAt(++t.position);if(e&&35===a)for(;10!==(a=t.input.charCodeAt(++t.position))&&13!==a&&0!==a;);if(!De(a))break;for(Xe(t),a=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===a;)t.lineIndent++,a=t.input.charCodeAt(++t.position)}return-1!==i&&0!==r&&t.lineIndent<i&&qe(t,"deficient indentation"),r}function Qe(t){var e,i=t.position;return!(45!==(e=t.input.charCodeAt(i))&&46!==e||e!==t.input.charCodeAt(i+1)||e!==t.input.charCodeAt(i+2)||0!==(e=t.input.charCodeAt(i+=3))&&!Oe(e))}function Ze(t,e){1===e?t.result+=" ":1<e&&(t.result+=Nt.repeat("\n",e-1))}function Je(t,e){var i,r,a=t.tag,s=t.anchor,n=[],o=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=n),r=t.input.charCodeAt(t.position);0!==r&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,We(t,"tab characters must not be used in indentation")),45===r)&&Oe(t.input.charCodeAt(t.position+1));)if(o=!0,t.position++,Ke(t,!0,-1)&&t.lineIndent<=e)n.push(null),r=t.input.charCodeAt(t.position);else if(i=t.line,ii(t,e,ke,!1,!0),n.push(t.result),Ke(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&0!==r)We(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!o&&(t.tag=a,t.anchor=s,t.kind="sequence",t.result=n,!0)}function ti(t){var e,i,r,a,s=!1,n=!1;if(33!==(a=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&We(t,"duplication of a tag property"),60===(a=t.input.charCodeAt(++t.position))?(s=!0,a=t.input.charCodeAt(++t.position)):33===a?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,s){for(;0!==(a=t.input.charCodeAt(++t.position))&&62!==a;);t.position<t.length?(r=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):We(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==a&&!Oe(a);)33===a&&(n?We(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Ae.test(i)||We(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),we.test(r)&&We(t,"tag suffix cannot contain flow indicator characters")}r&&!Be.test(r)&&We(t,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(e){We(t,"tag name is malformed: "+r)}return s?t.tag=r:me.call(t.tagMap,i)?t.tag=t.tagMap[i]+r:"!"===i?t.tag="!"+r:"!!"===i?t.tag="tag:yaml.org,2002:"+r:We(t,'undeclared tag handle "'+i+'"'),!0}function ei(t){var e,i;if(38!==(i=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&We(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!Oe(i)&&!Fe(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&We(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function ii(t,e,i,r,a){var s,n,o,l,c,h,d,u=1,p=!1,g=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=n=o=_e===i||ke===i,r&&Ke(t,!0,-1)&&(p=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),1===u)for(;ti(t)||ei(t);)Ke(t,!0,-1)?(p=!0,o=s,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):o=!1;if(o=o&&(p||a),1!==u&&_e!==i||(r=be===i||xe===i?e:e+1,a=t.position-t.lineStart,1===u?o&&(Je(t,a)||function(t,e,i){var r,a,s,n,o,l,c,h=t.tag,d=t.anchor,u={},p=Object.create(null),g=null,y=null,f=null,m=!1,b=!1;if(-1===t.firstTabInLine){for(null!==t.anchor&&(t.anchorMap[t.anchor]=u),c=t.input.charCodeAt(t.position);0!==c;){if(m||-1===t.firstTabInLine||(t.position=t.firstTabInLine,We(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),s=t.line,63!==c&&58!==c||!Oe(r)){if(n=t.line,o=t.lineStart,l=t.position,!ii(t,i,xe,!1,!0))break;if(t.line===s){for(c=t.input.charCodeAt(t.position);Ie(c);)c=t.input.charCodeAt(++t.position);if(58===c)Oe(c=t.input.charCodeAt(++t.position))||We(t,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(Ge(t,u,p,g,y,null,n,o,l),g=y=f=null),a=m=!(b=!0),g=t.tag,y=t.result;else{if(!b)return t.tag=h,t.anchor=d,1;We(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return t.tag=h,t.anchor=d,1;We(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(m&&(Ge(t,u,p,g,y,null,n,o,l),g=y=f=null),a=m=b=!0):m?a=!(m=!1):We(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,c=r;if((t.line===s||t.lineIndent>e)&&(m&&(n=t.line,o=t.lineStart,l=t.position),ii(t,e,_e,!0,a)&&(m?y=t.result:f=t.result),m||(Ge(t,u,p,g,y,f,n,o,l),g=y=f=null),Ke(t,!0,-1),c=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&0!==c)We(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return m&&Ge(t,u,p,g,y,null,n,o,l),b&&(t.tag=h,t.anchor=d,t.kind="mapping",t.result=u),b}}(t,a,r))||function(t,e){var i,r,a,s,n,o,l,c,h,d,u,p,g=!0,y=t.tag,f=t.anchor,m=Object.create(null);if(91===(p=t.input.charCodeAt(t.position)))c=!(n=93),s=[];else{if(123!==p)return;n=125,c=!0,s={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=s),p=t.input.charCodeAt(++t.position);0!==p;){if(Ke(t,!0,e),(p=t.input.charCodeAt(t.position))===n)return t.position++,t.tag=y,t.anchor=f,t.kind=c?"mapping":"sequence",t.result=s,1;g?44===p&&We(t,"expected the node content, but found ','"):We(t,"missed comma between flow collection entries"),u=null,o=l=!1,63===p&&Oe(t.input.charCodeAt(t.position+1))&&(o=l=!0,t.position++,Ke(t,!0,e)),i=t.line,r=t.lineStart,a=t.position,ii(t,e,be,!1,!0),d=t.tag,h=t.result,Ke(t,!0,e),p=t.input.charCodeAt(t.position),!l&&t.line!==i||58!==p||(o=!0,p=t.input.charCodeAt(++t.position),Ke(t,!0,e),ii(t,e,be,!1,!0),u=t.result),c?Ge(t,s,m,d,h,u,i,r,a):o?s.push(Ge(t,null,m,d,h,u,i,r,a)):s.push(h),Ke(t,!0,e),44===(p=t.input.charCodeAt(t.position))?(g=!0,p=t.input.charCodeAt(++t.position)):g=!1}We(t,"unexpected end of the stream within a flow collection")}(t,r)?g=!0:(n&&function(t,e){var i,r,a,s,n=Ce,o=!1,l=!1,c=e,h=0,d=!1;if(124===(s=t.input.charCodeAt(t.position)))r=!1;else{if(62!==s)return;r=!0}for(t.kind="scalar",t.result="";0!==s;)if(43===(s=t.input.charCodeAt(++t.position))||45===s)Ce===n?n=43===s?Ee:Te:We(t,"repeat of a chomping mode identifier");else{if(!(0<=(a=48<=s&&s<=57?s-48:-1)))break;0==a?We(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?We(t,"repeat of an indentation width identifier"):(c=e+a-1,l=!0)}if(Ie(s)){for(;Ie(s=t.input.charCodeAt(++t.position)););if(35===s)for(;!De(s=t.input.charCodeAt(++t.position))&&0!==s;);}for(;0!==s;){for(Xe(t),t.lineIndent=0,s=t.input.charCodeAt(t.position);(!l||t.lineIndent<c)&&32===s;)t.lineIndent++,s=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>c&&(c=t.lineIndent),De(s))h++;else{if(t.lineIndent<c){n===Ee?t.result+=Nt.repeat("\n",o?1+h:h):n===Ce&&o&&(t.result+="\n");break}for(r?Ie(s)?(d=!0,t.result+=Nt.repeat("\n",o?1+h:h)):d?(d=!1,t.result+=Nt.repeat("\n",h+1)):0===h?o&&(t.result+=" "):t.result+=Nt.repeat("\n",h):t.result+=Nt.repeat("\n",o?1+h:h),l=o=!0,h=0,i=t.position;!De(s)&&0!==s;)s=t.input.charCodeAt(++t.position);Ve(t,i,t.position,!1)}}return 1}(t,r)||function(t,e){var i,r,a;if(39===(i=t.input.charCodeAt(t.position))){for(t.kind="scalar",t.result="",t.position++,r=a=t.position;0!==(i=t.input.charCodeAt(t.position));)if(39===i){if(Ve(t,r,t.position,!0),39!==(i=t.input.charCodeAt(++t.position)))return 1;r=t.position,t.position++,a=t.position}else De(i)?(Ve(t,r,a,!0),Ze(t,Ke(t,!1,e)),r=a=t.position):t.position===t.lineStart&&Qe(t)?We(t,"unexpected end of the document within a single quoted scalar"):(t.position++,a=t.position);We(t,"unexpected end of the stream within a single quoted scalar")}}(t,r)||function(t,e){var i,r,a,s,n,o;if(34===(o=t.input.charCodeAt(t.position))){for(t.kind="scalar",t.result="",t.position++,i=r=t.position;0!==(o=t.input.charCodeAt(t.position));){if(34===o)return Ve(t,i,t.position,!0),t.position++,1;if(92===o){if(Ve(t,i,t.position,!0),De(o=t.input.charCodeAt(++t.position)))Ke(t,!1,e);else if(o<256&&Me[o])t.result+=Pe[o],t.position++;else if(0<(n=120===o?2:117===o?4:85===o?8:0)){for(a=n,s=0;0<a;a--)0<=(n=Ne(o=t.input.charCodeAt(++t.position)))?s=(s<<4)+n:We(t,"expected hexadecimal character");t.result+=Re(s),t.position++}else We(t,"unknown escape sequence");i=r=t.position}else De(o)?(Ve(t,i,r,!0),Ze(t,Ke(t,!1,e)),i=r=t.position):t.position===t.lineStart&&Qe(t)?We(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}We(t,"unexpected end of the stream within a double quoted scalar")}}(t,r)?g=!0:function(t){var e,i;if(42===(i=t.input.charCodeAt(t.position))){for(i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!Oe(i)&&!Fe(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&We(t,"name of an alias node must contain at least one character"),e=t.input.slice(e,t.position),me.call(t.anchorMap,e)||We(t,'unidentified alias "'+e+'"'),t.result=t.anchorMap[e],Ke(t,!0,-1),1}}(t)?(g=!0,null===t.tag&&null===t.anchor||We(t,"alias node should not have any properties")):function(t,e,i){var r,a,s,n,o,l,c,h,d=t.kind,u=t.result;if(!Oe(h=t.input.charCodeAt(t.position))&&!Fe(h)&&35!==h&&38!==h&&42!==h&&33!==h&&124!==h&&62!==h&&39!==h&&34!==h&&37!==h&&64!==h&&96!==h&&(63!==h&&45!==h||!(Oe(r=t.input.charCodeAt(t.position+1))||i&&Fe(r)))){for(t.kind="scalar",t.result="",a=s=t.position,n=!1;0!==h;){if(58===h){if(Oe(r=t.input.charCodeAt(t.position+1))||i&&Fe(r))break}else if(35===h){if(Oe(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Qe(t)||i&&Fe(h))break;if(De(h)){if(o=t.line,l=t.lineStart,c=t.lineIndent,Ke(t,!1,-1),t.lineIndent>=e){n=!0,h=t.input.charCodeAt(t.position);continue}t.position=s,t.line=o,t.lineStart=l,t.lineIndent=c;break}}n&&(Ve(t,a,s,!1),Ze(t,t.line-o),a=s=t.position,n=!1),Ie(h)||(s=t.position+1),h=t.input.charCodeAt(++t.position)}return Ve(t,a,s,!1),t.result||(t.kind=d,t.result=u,0)}}(t,r,be===i)&&(g=!0,null===t.tag)&&(t.tag="?"),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===u&&(g=o&&Je(t,a))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&We(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),l=0,c=t.implicitTypes.length;l<c;l+=1)if((d=t.implicitTypes[l]).resolve(t.result)){t.result=d.construct(t.result),t.tag=d.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(me.call(t.typeMap[t.kind||"fallback"],t.tag))d=t.typeMap[t.kind||"fallback"][t.tag];else for(d=null,l=0,c=(h=t.typeMap.multi[t.kind||"fallback"]).length;l<c;l+=1)if(t.tag.slice(0,h[l].tag.length)===h[l].tag){d=h[l];break}d||We(t,"unknown tag !<"+t.tag+">"),null!==t.result&&d.kind!==t.kind&&We(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+d.kind+'", not "'+t.kind+'"'),d.resolve(t.result,t.tag)?(t.result=d.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):We(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||g}function ri(t){var e,i,r,a,s=t.position,n=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(a=t.input.charCodeAt(t.position))&&(Ke(t,!0,-1),a=t.input.charCodeAt(t.position),!(0<t.lineIndent||37!==a));){for(n=!0,a=t.input.charCodeAt(++t.position),e=t.position;0!==a&&!Oe(a);)a=t.input.charCodeAt(++t.position);for(r=[],(i=t.input.slice(e,t.position)).length<1&&We(t,"directive name must not be less than one character in length");0!==a;){for(;Ie(a);)a=t.input.charCodeAt(++t.position);if(35===a){for(;0!==(a=t.input.charCodeAt(++t.position))&&!De(a););break}if(De(a))break;for(e=t.position;0!==a&&!Oe(a);)a=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==a&&Xe(t),me.call(Ue,i)?Ue[i](t,i,r):qe(t,'unknown document directive "'+i+'"')}Ke(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Ke(t,!0,-1)):n&&We(t,"directives end mark is expected"),ii(t,t.lineIndent-1,_e,!1,!0),Ke(t,!0,-1),t.checkLineBreaks&&Se.test(t.input.slice(s,t.position))&&qe(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Qe(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Ke(t,!0,-1)):t.position<t.length-1&&We(t,"end of the stream or a document separator is expected")}function ni(t,e){e=e||{};var i=new je(t=0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0))?t.slice(1):t,e),e=t.indexOf("\0");for(-1!==e&&(i.position=e,We(i,"null byte is not allowed in input")),i.input+="\0";32===i.input.charCodeAt(i.position);)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)ri(i);return i.documents}var si=Ht,ai=function(t,e){t=ni(t,e);if(0!==t.length){if(1===t.length)return t[0];throw new Mt("expected a single document in the stream, but found more")}};const oi=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,li=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,ci=/\s*%%.*\n/gm,hi={},di=function(t,e){t=t.replace(oi,"").replace(li,"").replace(ci,"\n");for(var[i,{detector:r}]of Object.entries(hi))if(r(t,e))return i;throw new Error("No diagram type detected for text: "+t)},ui=(...t)=>{for(var{id:e,detector:i,loader:r}of t)pi(e,i,r)},pi=(t,e,i)=>{hi[t]?pt.error(`Detector with key ${t} already exists`):hi[t]={detector:e,loader:i},pt.debug(`Detector with key ${t} added`+(i?" with loader":""))},gi=function(e,i,r){const{depth:a,clobber:s}=Object.assign({depth:2,clobber:!1},r);return Array.isArray(i)&&!Array.isArray(e)?(i.forEach(t=>gi(e,t,r)),e):Array.isArray(i)&&Array.isArray(e)?(i.forEach(t=>{e.includes(t)||e.push(t)}),e):void 0===e||a<=0?null!=e&&"object"==typeof e&&"object"==typeof i?Object.assign(e,i):i:(void 0!==i&&"object"==typeof e&&"object"==typeof i&&Object.keys(i).forEach(t=>{"object"!=typeof i[t]||void 0!==e[t]&&"object"!=typeof e[t]?(s||"object"!=typeof e[t]&&"object"!=typeof i[t])&&(e[t]=i[t]):(void 0===e[t]&&(e[t]=Array.isArray(i[t])?[]:{}),e[t]=gi(e[t],i[t],{depth:a-1,clobber:s}))}),e)},yi=gi,fi={curveBasis:n,curveBasisClosed:s,curveBasisOpen:a,curveBumpX:o,curveBumpY:l,curveBundle:h,curveCardinalClosed:d,curveCardinalOpen:u,curveCardinal:p,curveCatmullRomClosed:g,curveCatmullRomOpen:y,curveCatmullRom:f,curveLinear:m,curveLinearClosed:b,curveMonotoneX:x,curveMonotoneY:k,curveNatural:_,curveStep:C,curveStepAfter:T,curveStepBefore:E},mi=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,bi=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,xi=function(e,i=null){try{for(var t,r=new RegExp(`[%]{2}(?![{]${bi.source})(?=[}][%]{2}).*
`,"ig"),a=(e=e.trim().replace(r,"").replace(/'/gm,'"'),pt.debug(`Detecting diagram directive${null!==i?" type:"+i:""} based on the text:`+e),[]);null!==(t=mi.exec(e));)if(t.index===mi.lastIndex&&mi.lastIndex++,t&&!i||i&&t[1]&&t[1].match(i)||i&&t[2]&&t[2].match(i)){const e=t[1]||t[2],i=t[3]?t[3].trim():t[4]?JSON.parse(t[4].trim()):null;a.push({type:e,args:i})}return 0===a.length&&a.push({type:e,args:null}),1===a.length?a[0]:a}catch(t){return pt.error(`ERROR: ${t.message} - Unable to parse directive
      ${null!==i?" type:"+i:""} based on the text:`+e),{type:null,args:null}}};function ki(t,e){return t&&(t="curve"+(t.charAt(0).toUpperCase()+t.slice(1)),fi[t])||e}function _i(t,e){return t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0}function Ci(t){let e="",i="";for(const r of t)void 0!==r&&(r.startsWith("color:")||r.startsWith("text-align:")?i=i+r+";":e=e+r+";");return{style:e,labelStyle:i}}let Ti=0;const Ei=()=>(Ti++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Ti),vi=t=>{{var i=t.length;let e="";for(let t=0;t<i;t++)e+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return e}},Si=function(t,e){var i=e.text.replace(Et.lineBreakRegex," "),[,r]=$i(e.fontSize),t=t.append("text"),r=(t.attr("x",e.x),t.attr("y",e.y),t.style("text-anchor",e.anchor),t.style("font-family",e.fontFamily),t.style("font-size",r),t.style("font-weight",e.fontWeight),t.attr("fill",e.fill),void 0!==e.class&&t.attr("class",e.class),t.append("tspan"));return r.attr("x",e.x+2*e.textMargin),r.attr("fill",e.fill),r.text(i),t},wi=X((t,a,s)=>{if(!t)return t;if(s=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},s),Et.lineBreakRegex.test(t))return t;const n=t.split(" "),o=[];let l="";return n.forEach((t,e)=>{var i=Li(t+" ",s),r=Li(l,s);if(a<i){const{hyphenatedStrings:n,remainingWord:e}=Ai(t,a,"-",s);o.push(l,...n),l=e}else l=a<=r+i?(o.push(l),t):[l,t].filter(Boolean).join(" ");e+1===n.length&&o.push(l)}),o.filter(t=>""!==t).join(s.joinWith)},(t,e,i)=>""+t+e+i.fontSize+i.fontWeight+i.fontFamily+i.joinWith),Ai=X((t,r,a="-",s)=>{s=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},s);const n=[...t],o=[];let l="";return n.forEach((t,e)=>{var i=""+l+t;if(Li(i,s)>=r){const t=e+1,r=n.length===t,s=i+a;o.push(r?i:s),l=""}else l=i}),{hyphenatedStrings:o,remainingWord:l}},(t,e,i="-",r)=>""+t+e+i+r.fontSize+r.fontWeight+r.fontFamily);function Bi(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},e),Di(t,e).height}function Li(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e),Di(t,e).width}const Di=X((t,e)=>{const{fontSize:i,fontFamily:a,fontWeight:s}=e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e);if(!t)return{width:0,height:0};const[,n]=$i(i),o=["sans-serif",a],l=t.split(Et.lineBreakRegex),c=[],h=r("body");if(!h.remove)return{width:0,height:0,lineHeight:0};var d=h.append("svg");for(const t of o){var u;const i={width:0,height:0,lineHeight:0};for(const r of l){const a={x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0},o=(a.text=r,Si(d,a).style("font-size",n).style("font-weight",s).style("font-family",t)),l=(o._groups||o)[0][0].getBBox();i.width=Math.round(Math.max(i.width,l.width)),u=Math.round(l.height),i.height+=u,i.lineHeight=Math.round(Math.max(i.lineHeight,u))}c.push(i)}return d.remove(),c[isNaN(c[1].height)||isNaN(c[1].width)||isNaN(c[1].lineHeight)||c[0].height>c[1].height&&c[0].width>c[1].width&&c[0].lineHeight>c[1].lineHeight?0:1]},(t,e)=>""+t+e.fontSize+e.fontWeight+e.fontFamily);let Ii;const Oi=e=>{if(pt.debug("directiveSanitizer called with",e),"object"==typeof e&&(e.length?e.forEach(t=>Oi(t)):Object.keys(e).forEach(t=>{pt.debug("Checking key",t),t.startsWith("__")&&(pt.debug("sanitize deleting __ option",t),delete e[t]),t.includes("proto")&&(pt.debug("sanitize deleting proto option",t),delete e[t]),t.includes("constr")&&(pt.debug("sanitize deleting constr option",t),delete e[t]),t.includes("themeCSS")&&(pt.debug("sanitizing themeCss option"),e[t]=Fi(e[t])),t.includes("fontFamily")&&(pt.debug("sanitizing fontFamily option"),e[t]=Fi(e[t])),t.includes("altFontFamily")&&(pt.debug("sanitizing altFontFamily option"),e[t]=Fi(e[t])),It.includes(t)?"object"==typeof e[t]&&(pt.debug("sanitize deleting object",t),Oi(e[t])):(pt.debug("sanitize deleting option",t),delete e[t])})),e.themeVariables)for(const i of Object.keys(e.themeVariables)){var t=e.themeVariables[i];t&&t.match&&!t.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[i]="")}pt.debug("After sanitization",e)},Fi=t=>{let e=0,i=0;for(const r of t){if(e<i)return"{ /* ERROR: Unbalanced CSS */ }";"{"===r?e++:"}"===r&&i++}return e!==i?"{ /* ERROR: Unbalanced CSS */ }":t};function Ni(t){return"str"in t}const $i=t=>{var e;return"number"==typeof t?[t,t+"px"]:(e=parseInt(t,10),Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t])},Ri={assignWithDepth:yi,wrapLabel:wi,calculateTextHeight:Bi,calculateTextWidth:Li,calculateTextDimensions:Di,detectInit:function(t,i){var e=xi(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(e)){const t=e.map(t=>t.args);Oi(t),r=yi(r,[...t])}else r=e.args;if(r){let e=di(t,i);["config"].forEach(t=>{void 0!==r[t]&&("flowchart-v2"===e&&(e="flowchart"),r[e]=r[t],delete r[t])})}return r},detectDirective:xi,isSubstringInArray:function(t,e){for(var[i,r]of e.entries())if(r.match(t))return i;return-1},interpolateToCurve:ki,calcLabelPosition:function(t){if(1===t.length)return t[0];{let i,e=0;t.forEach(t=>{e+=_i(t,i),i=t});let r,a=e/2;return i=void 0,t.forEach(t=>{var e;i&&!r&&((e=_i(t,i))<a?a-=e:((e=a/e)<=0&&(r=i),1<=e&&(r={x:t.x,y:t.y}),0<e&&e<1&&(r={x:(1-e)*i.x+e*t.x,y:(1-e)*i.y+e*t.y}))),i=t}),r}},calcCardinalityPosition:(t,e,i)=>{let r;pt.info("our points "+JSON.stringify(e)),e[0]!==i&&(e=e.reverse());let a,s=25;r=void 0,e.forEach(t=>{var e;r&&!a&&((e=_i(t,r))<s?s-=e:((e=s/e)<=0&&(a=r),1<=e&&(a={x:t.x,y:t.y}),0<e&&e<1&&(a={x:(1-e)*r.x+e*t.x,y:(1-e)*r.y+e*t.y}))),r=t});var i=t?10:5,t=Math.atan2(e[0].y-a.y,e[0].x-a.x),n={x:0,y:0};return n.x=Math.sin(t)*i+(e[0].x+a.x)/2,n.y=-Math.cos(t)*i+(e[0].y+a.y)/2,n},calcTerminalLabelPosition:function(t,e,i){let r,a=JSON.parse(JSON.stringify(i));pt.info("our points",a),(a="start_left"!==e&&"start_right"!==e?a.reverse():a).forEach(t=>{r=t});let s,n=25+t;r=void 0,a.forEach(t=>{var e;r&&!s&&((e=_i(t,r))<n?n-=e:((e=n/e)<=0&&(s=r),1<=e&&(s={x:t.x,y:t.y}),0<e&&e<1&&(s={x:(1-e)*r.x+e*t.x,y:(1-e)*r.y+e*t.y}))),r=t});var i=10+.5*t,t=Math.atan2(a[0].y-s.y,a[0].x-s.x),o={x:0,y:0};return o.x=Math.sin(t)*i+(a[0].x+s.x)/2,o.y=-Math.cos(t)*i+(a[0].y+s.y)/2,"start_left"===e&&(o.x=Math.sin(t+Math.PI)*i+(a[0].x+s.x)/2,o.y=-Math.cos(t+Math.PI)*i+(a[0].y+s.y)/2),"end_right"===e&&(o.x=Math.sin(t-Math.PI)*i+(a[0].x+s.x)/2-5,o.y=-Math.cos(t-Math.PI)*i+(a[0].y+s.y)/2-5),"end_left"===e&&(o.x=Math.sin(t)*i+(a[0].x+s.x)/2-5,o.y=-Math.cos(t)*i+(a[0].y+s.y)/2-5),o},formatUrl:function(t,e){t=t.trim();if(t)return"loose"!==e.securityLevel?i(t):t},getStylesFromArray:Ci,generateId:Ei,random:vi,runFunc:(t,...e)=>{var i=t.split("."),r=i.length-1,t=i[r];let a=window;for(let t=0;t<r;t++)if(!(a=a[i[t]]))return;a[t](...e)},entityDecode:function(t){return Ii=Ii||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Ii.innerHTML=t,unescape(Ii.textContent)},initIdGenerator:class{constructor(t,e){this.deterministic=t,this.seed=e,this.count=e?e.length:0}next(){return this.deterministic?this.count++:Date.now()}},directiveSanitizer:Oi,sanitizeCss:Fi,insertTitle:(t,e,i,r)=>{var a;r&&(a=t.node().getBBox(),t.append("text").text(r).attr("x",a.x+a.width/2).attr("y",-i).attr("class",e))},parseFontSize:$i},Mi="9.4.3",Pi=Object.freeze(Ot);let zi,ji=yi({},Pi),Yi=[],Wi=yi({},Pi);const qi=(t,e)=>{let i=yi({},t),r={};for(const t of e)Gi(t),r=yi(r,t);if(i=yi(i,r),r.theme&&r.theme in Bt){const t=yi({},zi),e=yi(t.themeVariables||{},r.themeVariables);i.theme&&i.theme in Bt&&(i.themeVariables=Bt[i.theme].getThemeVariables(e))}return Wi=i,Ji(Wi),Wi},Ui=()=>yi({},ji),Vi=t=>(Ji(t),yi(Wi,t),Hi()),Hi=()=>yi({},Wi),Gi=e=>{["secure",...ji.secure??[]].forEach(t=>{void 0!==e[t]&&(pt.debug("Denied attempt to modify a secure key "+t,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{0===t.indexOf("__")&&delete e[t]}),Object.keys(e).forEach(t=>{"string"==typeof e[t]&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],"object"==typeof e[t]&&Gi(e[t])})},Xi=t=>{!t.fontFamily||t.themeVariables&&t.themeVariables.fontFamily||(t.themeVariables={fontFamily:t.fontFamily}),Yi.push(t),qi(ji,Yi)},Ki=(t=ji)=>{Yi=[],qi(t,Yi)};var Qi=(t=>(t.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",t))(Qi||{});const Zi={},Ji=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&!Zi[t="LAZY_LOAD_DEPRECATED"]&&(pt.warn(Qi[t]),Zi[t]=!0)},tr=function(t,e,i,r){e=e,i=i,r=r,a=new Map,r?(a.set("width","100%"),a.set("style",`max-width: ${i}px;`)):(a.set("height",e),a.set("width",i));var a,s,r=a,n=t;for(s of r)n.attr(s[0],s[1])},er=function(t,e,i,r){var a=e.node().getBBox(),s=a.width,n=a.height,n=(pt.info(`SVG bounds: ${s}x`+n,a),pt.info("Graph bounds: 0x0",t),t=s+2*i,s=n+2*i,pt.info(`Calculated bounds: ${t}x`+s),tr(e,s,t,r),`${a.x-i} ${a.y-i} ${a.width+2*i} `+(a.height+2*i));e.attr("viewBox",n)},ir=t=>`g.classGroup text {
  fill: ${t.nodeBorder};
  fill: ${t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,rr=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }    
`,nr=()=>"",sr=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,ar=t=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${t.fontFamily};
      fill: ${t.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${t.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${t.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,or=()=>"",lr=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,cr=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 100%;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,hr=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,dr=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground||"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground||"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,ur=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?"fill: "+t.faceColor:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?"fill: "+t.fillType0:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?"fill: "+t.fillType1:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?"fill: "+t.fillType2:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?"fill: "+t.fillType3:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?"fill: "+t.fillType4:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?"fill: "+t.fillType5:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?"fill: "+t.fillType6:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?"fill: "+t.fillType7:""};
  }

  .actor-0 {
    ${t.actor0?"fill: "+t.actor0:""};
  }
  .actor-1 {
    ${t.actor1?"fill: "+t.actor1:""};
  }
  .actor-2 {
    ${t.actor2?"fill: "+t.actor2:""};
  }
  .actor-3 {
    ${t.actor3?"fill: "+t.actor3:""};
  }
  .actor-4 {
    ${t.actor4?"fill: "+t.actor4:""};
  }
  .actor-5 {
    ${t.actor5?"fill: "+t.actor5:""};
  }
`,pr=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,gr={flowchart:sr,"flowchart-v2":sr,sequence:hr,gantt:ar,classDiagram:ir,"classDiagram-v2":ir,class:ir,stateDiagram:dr,state:dr,info:or,pie:lr,er:rr,error:nr,journey:ur,requirement:cr,c4:pr},yr=(t,e,i)=>{let r="";return t in gr&&gr[t]?r=gr[t](i):pt.warn("No theme found for "+t),` & {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
    fill: ${i.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${i.errorBkgColor};
  }
  & .error-text {
    fill: ${i.errorTextColor};
    stroke: ${i.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${i.lineColor};
    stroke: ${i.lineColor};
  }
  & .marker.cross {
    stroke: ${i.lineColor};
  }

  & svg {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
  }

  ${r}

  ${e}
`};let fr="",mr="",br="";const xr=t=>bt(t,Hi()),kr=function(){fr="",br="",mr=""},_r=function(t){fr=xr(t).replace(/^\s+/g,"")},Cr=function(){return fr||mr},Tr=function(t){br=xr(t).replace(/\n\s+/g,"\n")},Er=function(){return br},vr=function(t){mr=xr(t)},Sr=function(){return mr},wr={setAccTitle:_r,getAccTitle:Cr,setDiagramTitle:vr,getDiagramTitle:Sr,getAccDescription:Er,setAccDescription:Tr,clear:kr},Ar=Object.freeze(Object.defineProperty({__proto__:null,clear:kr,default:wr,getAccDescription:Er,getAccTitle:Cr,getDiagramTitle:Sr,setAccDescription:Tr,setAccTitle:_r,setDiagramTitle:vr},Symbol.toStringTag,{value:"Module"}));let Br={};const Lr=function(t,e,i,r){pt.debug("parseDirective is being called",e,i,r);try{if(void 0!==e)switch(e=e.trim(),i){case"open_directive":Br={};break;case"type_directive":if(!Br)throw new Error("currentDirective is undefined");Br.type=e.toLowerCase();break;case"arg_directive":if(!Br)throw new Error("currentDirective is undefined");Br.args=JSON.parse(e);break;case"close_directive":Dr(t,Br,r),Br=void 0}}catch(t){pt.error(`Error while rendering sequenceDiagram directive: ${e} jison context: `+i),pt.error(t.message)}},Dr=function(t,e,i){switch(pt.info(`Directive type=${e.type} with args:`,e.args),e.type){case"init":case"initialize":["config"].forEach(t=>{void 0!==e.args[t]&&("flowchart-v2"===i&&(i="flowchart"),e.args[i]=e.args[t],delete e.args[t])}),pt.info("sanitize in handleDirective",e.args),Oi(e.args),pt.info("sanitize in handleDirective (done)",e.args),Xi(e.args);break;case"wrap":case"nowrap":t&&t.setWrap&&t.setWrap("wrap"===e.type);break;case"themeCss":pt.warn("themeCss encountered");break;default:pt.warn(`Unhandled directive: source: '%%{${e.type}: ${JSON.stringify(e.args||{})}}%%`,e)}},Ir=pt,Or=gt,Fr=Hi,Nr=t=>bt(t,Fr()),$r=er,Rr=(t,e,i,r)=>Lr(t,e,i,r),Mr={},Pr=(t,e,i)=>{if(Mr[t])throw new Error(`Diagram ${t} already registered.`);Mr[t]=e,i&&pi(t,i),i=t,t=e.styles,gr[i]=t,e.injectUtils&&e.injectUtils(Ir,Or,Fr,Nr,$r,Ar,Rr)},zr=t=>{if(t in Mr)return Mr[t];throw new Error(`Diagram ${t} not found.`)};var jr=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e=[1,4],i=[1,7],r=[1,5],a=[1,9],s=[1,6],n=[2,6],o=[1,16],l=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],c=[8,14,20,22,24,25,27,29,32,37,40],h=[8,13,14,20,22,24,25,27,29,32,37,40],d=[1,26],u=[6,8,14,50,55],p=[8,14,55],g=[1,53],y=[1,52],f=[8,14,30,33,35,38,55],m=[1,67],b=[1,68],x=[1,69],k=[8,14,33,35,42,55],e={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 3:return s[o];case 4:return s[o-1];case 5:return r.setDirection(s[o-3]),s[o-1];case 7:r.setOptions(s[o-1]),this.$=s[o];break;case 8:s[o-1]+=s[o],this.$=s[o-1];break;case 10:this.$=[];break;case 11:s[o-1].push(s[o]),this.$=s[o-1];break;case 12:this.$=s[o-1];break;case 17:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 18:case 19:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 20:r.addSection(s[o].substr(8)),this.$=s[o].substr(8);break;case 22:r.checkout(s[o]);break;case 23:r.branch(s[o]);break;case 24:r.branch(s[o-2],s[o]);break;case 25:r.cherryPick(s[o],"",void 0);break;case 26:r.cherryPick(s[o-2],"",s[o]);break;case 27:case 29:r.cherryPick(s[o-2],"","");break;case 28:r.cherryPick(s[o],"",s[o-2]);break;case 30:r.merge(s[o],"","","");break;case 31:r.merge(s[o-2],s[o],"","");break;case 32:r.merge(s[o-2],"",s[o],"");break;case 33:r.merge(s[o-2],"","",s[o]);break;case 34:r.merge(s[o-4],s[o],"",s[o-2]);break;case 35:r.merge(s[o-4],"",s[o],s[o-2]);break;case 36:r.merge(s[o-4],"",s[o-2],s[o]);break;case 37:r.merge(s[o-4],s[o-2],s[o],"");break;case 38:r.merge(s[o-4],s[o-2],"",s[o]);break;case 39:r.merge(s[o-4],s[o],s[o-2],"");break;case 40:r.merge(s[o-6],s[o-4],s[o-2],s[o]);break;case 41:r.merge(s[o-6],s[o],s[o-4],s[o-2]);break;case 42:r.merge(s[o-6],s[o-4],s[o],s[o-2]);break;case 43:r.merge(s[o-6],s[o-2],s[o-4],s[o]);break;case 44:r.merge(s[o-6],s[o],s[o-2],s[o-4]);break;case 45:r.merge(s[o-6],s[o-2],s[o],s[o-4]);break;case 46:r.commit(s[o]);break;case 47:r.commit("","",r.commitType.NORMAL,s[o]);break;case 48:r.commit("","",s[o],"");break;case 49:r.commit("","",s[o],s[o-2]);break;case 50:r.commit("","",s[o-2],s[o]);break;case 51:r.commit("",s[o],r.commitType.NORMAL,"");break;case 52:r.commit("",s[o-2],r.commitType.NORMAL,s[o]);break;case 53:r.commit("",s[o],r.commitType.NORMAL,s[o-2]);break;case 54:r.commit("",s[o-2],s[o],"");break;case 55:r.commit("",s[o],s[o-2],"");break;case 56:r.commit("",s[o-4],s[o-2],s[o]);break;case 57:r.commit("",s[o-4],s[o],s[o-2]);break;case 58:r.commit("",s[o-2],s[o-4],s[o]);break;case 59:r.commit("",s[o],s[o-4],s[o-2]);break;case 60:r.commit("",s[o],s[o-2],s[o-4]);break;case 61:r.commit("",s[o-2],s[o],s[o-4]);break;case 62:r.commit(s[o],"",r.commitType.NORMAL,"");break;case 63:r.commit(s[o],"",r.commitType.NORMAL,s[o-2]);break;case 64:r.commit(s[o-2],"",r.commitType.NORMAL,s[o]);break;case 65:r.commit(s[o-2],"",s[o],"");break;case 66:r.commit(s[o],"",s[o-2],"");break;case 67:r.commit(s[o],s[o-2],r.commitType.NORMAL,"");break;case 68:r.commit(s[o-2],s[o],r.commitType.NORMAL,"");break;case 69:r.commit(s[o-4],"",s[o-2],s[o]);break;case 70:r.commit(s[o-4],"",s[o],s[o-2]);break;case 71:r.commit(s[o-2],"",s[o-4],s[o]);break;case 72:r.commit(s[o],"",s[o-4],s[o-2]);break;case 73:r.commit(s[o],"",s[o-2],s[o-4]);break;case 74:r.commit(s[o-2],"",s[o],s[o-4]);break;case 75:r.commit(s[o-4],s[o],s[o-2],"");break;case 76:r.commit(s[o-4],s[o-2],s[o],"");break;case 77:r.commit(s[o-2],s[o],s[o-4],"");break;case 78:r.commit(s[o],s[o-2],s[o-4],"");break;case 79:r.commit(s[o],s[o-4],s[o-2],"");break;case 80:r.commit(s[o-2],s[o-4],s[o],"");break;case 81:r.commit(s[o-4],s[o],r.commitType.NORMAL,s[o-2]);break;case 82:r.commit(s[o-4],s[o-2],r.commitType.NORMAL,s[o]);break;case 83:r.commit(s[o-2],s[o],r.commitType.NORMAL,s[o-4]);break;case 84:r.commit(s[o],s[o-2],r.commitType.NORMAL,s[o-4]);break;case 85:r.commit(s[o],s[o-4],r.commitType.NORMAL,s[o-2]);break;case 86:r.commit(s[o-2],s[o-4],r.commitType.NORMAL,s[o]);break;case 87:r.commit(s[o-6],s[o-4],s[o-2],s[o]);break;case 88:r.commit(s[o-6],s[o-4],s[o],s[o-2]);break;case 89:r.commit(s[o-6],s[o-2],s[o-4],s[o]);break;case 90:r.commit(s[o-6],s[o],s[o-4],s[o-2]);break;case 91:r.commit(s[o-6],s[o-2],s[o],s[o-4]);break;case 92:r.commit(s[o-6],s[o],s[o-2],s[o-4]);break;case 93:r.commit(s[o-4],s[o-6],s[o-2],s[o]);break;case 94:r.commit(s[o-4],s[o-6],s[o],s[o-2]);break;case 95:r.commit(s[o-2],s[o-6],s[o-4],s[o]);break;case 96:r.commit(s[o],s[o-6],s[o-4],s[o-2]);break;case 97:r.commit(s[o-2],s[o-6],s[o],s[o-4]);break;case 98:r.commit(s[o],s[o-6],s[o-2],s[o-4]);break;case 99:r.commit(s[o],s[o-4],s[o-2],s[o-6]);break;case 100:r.commit(s[o-2],s[o-4],s[o],s[o-6]);break;case 101:r.commit(s[o],s[o-2],s[o-4],s[o-6]);break;case 102:r.commit(s[o-2],s[o],s[o-4],s[o-6]);break;case 103:r.commit(s[o-4],s[o-2],s[o],s[o-6]);break;case 104:r.commit(s[o-4],s[o],s[o-2],s[o-6]);break;case 105:r.commit(s[o-2],s[o-4],s[o-6],s[o]);break;case 106:r.commit(s[o],s[o-4],s[o-6],s[o-2]);break;case 107:r.commit(s[o-2],s[o],s[o-6],s[o-4]);break;case 108:r.commit(s[o],s[o-2],s[o-6],s[o-4]);break;case 109:r.commit(s[o-4],s[o-2],s[o-6],s[o]);break;case 110:r.commit(s[o-4],s[o],s[o-6],s[o-2]);break;case 111:this.$="";break;case 112:this.$=s[o];break;case 113:this.$=r.commitType.NORMAL;break;case 114:this.$=r.commitType.REVERSE;break;case 115:this.$=r.commitType.HIGHLIGHT;break;case 118:r.parseDirective("%%{","open_directive");break;case 119:r.parseDirective(s[o],"type_directive");break;case 120:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 121:r.parseDirective("}%%","close_directive","gitGraph")}},table:[{3:1,4:2,5:3,6:e,8:i,14:r,46:8,50:a,55:s},{1:[3]},{3:10,4:2,5:3,6:e,8:i,14:r,46:8,50:a,55:s},{3:11,4:2,5:3,6:e,8:i,14:r,46:8,50:a,55:s},{7:12,8:n,9:[1,13],10:[1,14],11:15,14:o},t(l,[2,124]),t(l,[2,125]),t(l,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:n,11:15,14:o},{9:[1,21]},t(c,[2,10],{12:22,13:[1,23]}),t(h,[2,9]),{9:[1,25],48:24,53:d},t([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:n,11:15,14:o},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},t(h,[2,8]),t(u,[2,116]),{49:45,52:[1,46]},t(u,[2,121]),{1:[2,4]},{8:[1,47]},t(c,[2,11]),{4:48,8:i,14:r,55:s},t(c,[2,13]),t(p,[2,14]),t(p,[2,15]),t(p,[2,16]),{21:[1,49]},{23:[1,50]},t(p,[2,19]),t(p,[2,20]),t(p,[2,21]),{28:51,34:g,54:y},t(p,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:g,54:y},{33:[1,61],35:[1,62]},{28:63,34:g,54:y},{48:64,53:d},{53:[2,120]},{1:[2,5]},t(c,[2,12]),t(p,[2,17]),t(p,[2,18]),t(p,[2,22]),t(f,[2,122]),t(f,[2,123]),t(p,[2,46]),{34:[1,65]},{39:66,43:m,44:b,45:x},{34:[1,70]},{34:[1,71]},t(p,[2,112]),t(p,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},t(p,[2,23],{30:[1,78]}),t(u,[2,117]),t(p,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),t(p,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),t(k,[2,113]),t(k,[2,114]),t(k,[2,115]),t(p,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),t(p,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:m,44:b,45:x},{34:[1,93]},t(p,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:m,44:b,45:x},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:m,44:b,45:x},{34:[1,106]},{34:[1,107]},{39:108,43:m,44:b,45:x},{34:[1,109]},t(p,[2,31],{35:[1,111],38:[1,110]}),t(p,[2,32],{33:[1,113],35:[1,112]}),t(p,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},t(p,[2,24]),t(p,[2,49],{33:[1,120],42:[1,121]}),t(p,[2,53],{38:[1,122],42:[1,123]}),t(p,[2,63],{33:[1,125],38:[1,124]}),t(p,[2,50],{33:[1,126],42:[1,127]}),t(p,[2,55],{35:[1,128],42:[1,129]}),t(p,[2,66],{33:[1,131],35:[1,130]}),t(p,[2,52],{38:[1,132],42:[1,133]}),t(p,[2,54],{35:[1,134],42:[1,135]}),t(p,[2,67],{35:[1,137],38:[1,136]}),t(p,[2,64],{33:[1,139],38:[1,138]}),t(p,[2,65],{33:[1,141],35:[1,140]}),t(p,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:m,44:b,45:x},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:m,44:b,45:x},t(p,[2,26]),t(p,[2,27]),t(p,[2,28]),t(p,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:m,44:b,45:x},{34:[1,153]},{39:154,43:m,44:b,45:x},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:m,44:b,45:x},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:m,44:b,45:x},{34:[1,167]},{39:168,43:m,44:b,45:x},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:m,44:b,45:x},{34:[1,173]},t(p,[2,37],{35:[1,174]}),t(p,[2,38],{38:[1,175]}),t(p,[2,36],{33:[1,176]}),t(p,[2,39],{35:[1,177]}),t(p,[2,34],{38:[1,178]}),t(p,[2,35],{33:[1,179]}),t(p,[2,60],{42:[1,180]}),t(p,[2,73],{33:[1,181]}),t(p,[2,61],{42:[1,182]}),t(p,[2,84],{38:[1,183]}),t(p,[2,74],{33:[1,184]}),t(p,[2,83],{38:[1,185]}),t(p,[2,59],{42:[1,186]}),t(p,[2,72],{33:[1,187]}),t(p,[2,58],{42:[1,188]}),t(p,[2,78],{35:[1,189]}),t(p,[2,71],{33:[1,190]}),t(p,[2,77],{35:[1,191]}),t(p,[2,57],{42:[1,192]}),t(p,[2,85],{38:[1,193]}),t(p,[2,56],{42:[1,194]}),t(p,[2,79],{35:[1,195]}),t(p,[2,80],{35:[1,196]}),t(p,[2,86],{38:[1,197]}),t(p,[2,70],{33:[1,198]}),t(p,[2,81],{38:[1,199]}),t(p,[2,69],{33:[1,200]}),t(p,[2,75],{35:[1,201]}),t(p,[2,76],{35:[1,202]}),t(p,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:m,44:b,45:x},{34:[1,206]},{34:[1,207]},{39:208,43:m,44:b,45:x},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:m,44:b,45:x},{34:[1,214]},{39:215,43:m,44:b,45:x},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:m,44:b,45:x},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:m,44:b,45:x},{34:[1,228]},{39:229,43:m,44:b,45:x},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:m,44:b,45:x},t(p,[2,40]),t(p,[2,42]),t(p,[2,41]),t(p,[2,43]),t(p,[2,45]),t(p,[2,44]),t(p,[2,101]),t(p,[2,102]),t(p,[2,99]),t(p,[2,100]),t(p,[2,104]),t(p,[2,103]),t(p,[2,108]),t(p,[2,107]),t(p,[2,106]),t(p,[2,105]),t(p,[2,110]),t(p,[2,109]),t(p,[2,98]),t(p,[2,97]),t(p,[2,96]),t(p,[2,95]),t(p,[2,93]),t(p,[2,94]),t(p,[2,92]),t(p,[2,91]),t(p,[2,90]),t(p,[2,89]),t(p,[2,87]),t(p,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};a={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:case 34:case 38:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};function _(){this.yy={}}return e.lexer=a,new((_.prototype=e).Parser=_)}();const Yr=jr.parser=jr,Wr=t=>null!==t.match(/^\s*gitGraph/);let qr=Hi().gitGraph.mainBranchName,Ur=Hi().gitGraph.mainBranchOrder,Vr={},Hr=null,Gr={},Xr=(Gr[qr]={name:qr,order:Ur},{}),Kr=(Xr[qr]=Hr,qr),Qr="LR",Zr=0;function Jr(){return vi({length:7})}let tn={};const en=function(t){if(t=Et.sanitizeText(t,Hi()),void 0===Xr[t])throw(e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")')).hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e;Kr=t;var e=Xr[Kr];Hr=Vr[e]};function rn(t,e,i){e=t.indexOf(e);-1===e?t.push(i):t.splice(e,1,i)}function nn(t){const e=t.reduce((t,e)=>t.seq>e.seq?t:e,t[0]);let i="";t.forEach(function(t){i+=t===e?"\t*":"\t|"});var r,a=[i,e.id,e.seq];for(r in Xr)Xr[r]===e.id&&a.push(r);if(pt.debug(a.join(" ")),e.parents&&2==e.parents.length){const i=Vr[e.parents[0]];rn(t,e,i),t.push(Vr[e.parents[1]])}else{if(0==e.parents.length)return;{const i=Vr[e.parents];rn(t,e,i)}}nn(t=function(t){const r=Object.create(null);return t.reduce((t,e)=>{var i=e.id;return r[i]||(r[i]=!0,t.push(e)),t},[])}(t))}const sn=function(){var t=Object.keys(Vr).map(function(t){return Vr[t]});return t.forEach(function(t){pt.debug(t.id)}),t.sort((t,e)=>t.seq-e.seq),t},an={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},on={parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},getConfig:()=>Hi().gitGraph,setDirection:function(t){Qr=t},setOptions:function(t){pt.debug("options str",t),t=t&&t.trim()||"{}";try{tn=JSON.parse(t)}catch(t){pt.error("error while parsing gitGraph options",t.message)}},getOptions:function(){return tn},commit:function(t,e,i,r){pt.debug("Entering commit:",t,e,i,r),e=Et.sanitizeText(e,Hi()),t=Et.sanitizeText(t,Hi()),r=Et.sanitizeText(r,Hi());e={id:e||Zr+"-"+Jr(),message:t,seq:Zr++,type:i||an.NORMAL,tag:r||"",parents:null==Hr?[]:[Hr.id],branch:Kr};Hr=e,Vr[e.id]=e,Xr[Kr]=e.id,pt.debug("in pushCommit "+e.id)},branch:function(t,e){var i;if(t=Et.sanitizeText(t,Hi()),void 0!==Xr[t])throw(i=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")')).hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},i;Xr[t]=null!=Hr?Hr.id:null,Gr[t]={name:t,order:e?parseInt(e,10):null},en(t),pt.debug("in createBranch")},merge:function(t,e,i,r){t=Et.sanitizeText(t,Hi()),e=Et.sanitizeText(e,Hi());var a,s=Vr[Xr[Kr]],n=Vr[Xr[t]];if(Kr===t)throw(a=new Error('Incorrect usage of "merge". Cannot merge a branch to itself')).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},a;if(void 0===s||!s)throw(a=new Error('Incorrect usage of "merge". Current branch ('+Kr+")has no commits")).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},a;if(void 0===Xr[t])throw(a=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist")).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},a;if(void 0===n||!n)throw(a=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits")).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},a;if(s===n)throw(a=new Error('Incorrect usage of "merge". Both branches have same head')).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},a;if(e&&void 0!==Vr[e])throw(s=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id")).hash={text:"merge "+t+e+i+r,token:"merge "+t+e+i+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+i+" "+r]},s;n={id:e||Zr+"-"+Jr(),message:"merged branch "+t+" into "+Kr,seq:Zr++,parents:[null==Hr?null:Hr.id,Xr[t]],branch:Kr,type:an.MERGE,customType:i,customId:!!e,tag:r||""};Hr=n,Vr[n.id]=n,Xr[Kr]=n.id,pt.debug(Xr),pt.debug("in mergeBranch")},cherryPick:function(t,e,i){if(pt.debug("Entering cherryPick:",t,e,i),t=Et.sanitizeText(t,Hi()),e=Et.sanitizeText(e,Hi()),i=Et.sanitizeText(i,Hi()),!t||void 0===Vr[t])throw(r=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided')).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},r;var r=Vr[t],a=r.branch;if(r.type===an.MERGE)throw(s=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit')).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},s;if(!e||void 0===Vr[e]){if(a===Kr)throw(s=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch')).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},s;var s,a=Vr[Xr[Kr]];if(void 0===a||!a)throw(s=new Error('Incorrect usage of "cherry-pick". Current branch ('+Kr+")has no commits")).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},s;a={id:Zr+"-"+Jr(),message:"cherry-picked "+r+" into "+Kr,seq:Zr++,parents:[null==Hr?null:Hr.id,r.id],branch:Kr,type:an.CHERRY_PICK,tag:i??"cherry-pick:"+r.id};Hr=a,Vr[a.id]=a,Xr[Kr]=a.id,pt.debug(Xr),pt.debug("in cherryPick")}},checkout:en,prettyPrint:function(){pt.debug(Vr),nn([sn()[0]])},clear:function(){Vr={},Hr=null;var t=Hi().gitGraph.mainBranchName,e=Hi().gitGraph.mainBranchOrder;(Xr={})[t]=null,(Gr={})[t]={name:t,order:e},Kr=t,Zr=0,kr()},getBranchesAsObjArray:function(){return Object.values(Gr).map((t,e)=>null!==t.order?t:{...t,order:parseFloat("0."+e,10)}).sort((t,e)=>t.order-e.order).map(({name:t})=>({name:t}))},getBranches:function(){return Xr},getCommits:function(){return Vr},getCommitsArray:sn,getCurrentBranch:function(){return Kr},getDirection:function(){return Qr},getHead:function(){return Hr},setAccTitle:_r,getAccTitle:Cr,getAccDescription:Er,setAccDescription:Tr,setDiagramTitle:vr,getDiagramTitle:Sr,commitType:an};let ln={};const cn=0,hn=1,dn=2,un=3,pn=4;let gn={},yn={},fn=[],mn=0;const bn=(t,s,n)=>{const o=Fr().gitGraph,l=t.append("g").attr("class","commit-bullets"),c=t.append("g").attr("class","commit-labels");let h=0;Object.keys(s).sort((t,e)=>s[t].seq-s[e].seq).forEach(i=>{var r=s[i],a=gn[r.branch].pos,i=h+10;if(n){let t,e=void 0!==r.customType&&""!==r.customType?r.customType:r.type;switch(e){case cn:t="commit-normal";break;case hn:t="commit-reverse";break;case dn:t="commit-highlight";break;case un:t="commit-merge";break;case pn:t="commit-cherry-pick";break;default:t="commit-normal"}if(e===dn){const s=l.append("rect");s.attr("x",i-10),s.attr("y",a-10),s.attr("height",20),s.attr("width",20),s.attr("class",`commit ${r.id} commit-highlight${gn[r.branch].index%8} ${t}-outer`),l.append("rect").attr("x",i-6).attr("y",a-6).attr("height",12).attr("width",12).attr("class",`commit ${r.id} commit${gn[r.branch].index%8} ${t}-inner`)}else if(e===pn)l.append("circle").attr("cx",i).attr("cy",a).attr("r",10).attr("class",`commit ${r.id} `+t),l.append("circle").attr("cx",i-3).attr("cy",a+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} `+t),l.append("circle").attr("cx",i+3).attr("cy",a+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} `+t),l.append("line").attr("x1",i+3).attr("y1",a+1).attr("x2",i).attr("y2",a-5).attr("stroke","#fff").attr("class",`commit ${r.id} `+t),l.append("line").attr("x1",i-3).attr("y1",a+1).attr("x2",i).attr("y2",a-5).attr("stroke","#fff").attr("class",`commit ${r.id} `+t);else{const n=l.append("circle");if(n.attr("cx",i),n.attr("cy",a),n.attr("r",r.type===un?9:10),n.attr("class",`commit ${r.id} commit`+gn[r.branch].index%8),e===un){const s=l.append("circle");s.attr("cx",i),s.attr("cy",a),s.attr("r",6),s.attr("class",`commit ${t} ${r.id} commit`+gn[r.branch].index%8)}e===hn&&l.append("path").attr("d",`M ${i-5},${a-5}L${i+5},${a+5}M${i-5},${a+5}L${i+5},`+(a-5)).attr("class",`commit ${t} ${r.id} commit`+gn[r.branch].index%8)}}if(yn[r.id]={x:h+10,y:a},n){const i=4,s=2;if(r.type!==pn&&(r.customId&&r.type===un||r.type!==un)&&o.showCommitLabel){const i=c.append("g"),n=i.insert("rect").attr("class","commit-label-bkg"),l=i.append("text").attr("x",h).attr("y",a+25).attr("class","commit-label").text(r.id);var t=l.node().getBBox();n.attr("x",h+10-t.width/2-2).attr("y",a+13.5).attr("width",t.width+4).attr("height",t.height+4),l.attr("x",h+10-t.width/2),o.rotateCommitLabel&&(e=-7.5-(t.width+10)/25*9.5,t=10+t.width/25*8.5,i.attr("transform","translate("+e+", "+t+") rotate(-45, "+h+", "+a+")"))}if(r.tag){const n=c.insert("polygon"),o=c.append("circle"),l=c.append("text").attr("y",a-16).attr("class","tag-label").text(r.tag);var e=l.node().getBBox(),t=(l.attr("x",h+10-e.width/2),e.height/2),r=a-19.2;n.attr("class","tag-label-bkg").attr("points",`
          ${h-e.width/2-2},${2+r}
          ${h-e.width/2-2},${r-2}
          ${h+10-e.width/2-4},${r-t-2}
          ${h+10+e.width/2+4},${r-t-2}
          ${h+10+e.width/2+4},${r+t+2}
          ${h+10-e.width/2-4},`+(r+t+2)),o.attr("cx",h-e.width/2+2).attr("cy",r).attr("r",1.5).attr("class","tag-hole")}}(h+=50)>mn&&(mn=h)})},xn=(t,e,i=0)=>{const r=t+Math.abs(t-e)/2;var a;return 5<i?r:fn.every(t=>10<=Math.abs(t-r))?(fn.push(r),r):(a=Math.abs(t-e),xn(t,e-a/5,i+1))},kn=(t,e,i,r)=>{var a,s,n,o=yn[e.id],l=yn[i.id],r=(a=e,s=i,n=r,0<Object.keys(n).filter(t=>n[t].branch===s.branch&&n[t].seq>a.seq&&n[t].seq<s.seq).length);let c,h="",d,u=0,p=0,g=gn[i.branch].index;if(r){h="A 10 10, 0, 0, 0,",d="A 10 10, 0, 0, 1,",u=10,p=10,g=gn[i.branch].index;const t=o.y<l.y?xn(o.y,l.y):xn(l.y,o.y);c=o.y<l.y?`M ${o.x} ${o.y} L ${o.x} ${t-u} ${h} ${o.x+p} ${t} L ${l.x-u} ${t} ${d} ${l.x} ${t+p} L ${l.x} `+l.y:`M ${o.x} ${o.y} L ${o.x} ${t+u} ${d} ${o.x+p} ${t} L ${l.x-u} ${t} ${h} ${l.x} ${t-p} L ${l.x} `+l.y}else o.y<l.y&&(h="A 20 20, 0, 0, 0,",u=20,p=20,g=gn[i.branch].index,c=`M ${o.x} ${o.y} L ${o.x} ${l.y-u} ${h} ${o.x+p} ${l.y} L ${l.x} `+l.y),o.y>l.y&&(h="A 20 20, 0, 0, 0,",u=20,p=20,g=gn[e.branch].index,c=`M ${o.x} ${o.y} L ${l.x-u} ${o.y} ${h} ${l.x} ${o.y-p} L ${l.x} `+l.y),o.y===l.y&&(g=gn[e.branch].index,c=`M ${o.x} ${o.y} L ${o.x} ${l.y-u} ${h} ${o.x+p} ${l.y} L ${l.x} `+l.y);t.append("path").attr("d",c).attr("class","arrow arrow"+g%8)},_n=(t,e)=>{const s=Fr().gitGraph,n=t.append("g");e.forEach((t,e)=>{var e=e%8,i=gn[t.name].pos,r=n.append("line"),r=(r.attr("x1",0),r.attr("y1",i),r.attr("x2",mn),r.attr("y2",i),r.attr("class","branch branch"+e),fn.push(i),(t=>{var e=document.createElementNS("http://www.w3.org/2000/svg","text");let i=[];i="string"==typeof t?t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?t:[];for(const t of i){const i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),i.setAttribute("class","row"),i.textContent=t.trim(),e.appendChild(i)}return e})(t.name)),t=n.insert("rect"),a=n.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+e),r=(a.node().appendChild(r),r.getBBox());t.attr("class","branchLabelBkg label"+e).attr("rx",4).attr("ry",4).attr("x",-r.width-4-(!0===s.rotateCommitLabel?30:0)).attr("y",-r.height/2+8).attr("width",r.width+18).attr("height",r.height+4),a.attr("transform","translate("+(-r.width-14-(!0===s.rotateCommitLabel?30:0))+", "+(i-r.height/2-1)+")"),t.attr("transform","translate(-19, "+(i-r.height/2)+")")})},Cn={draw:function(t,e,i,a){gn={},yn={},ln={},mn=0,fn=[];const s=Fr(),n=s.gitGraph;pt.debug("in gitgraph renderer",t+"\n","id:",e,i),ln=a.db.getCommits();t=a.db.getBranchesAsObjArray();let o=0;t.forEach((t,e)=>{gn[t.name]={pos:o,index:e},o+=50+(n.rotateCommitLabel?40:0)});i=r(`[id="${e}"]`);bn(i,ln,!1),n.showBranches&&_n(i,t);{e=i;var l=ln;const c=e.append("g").attr("class","commit-arrows");Object.keys(l).forEach(t=>{const e=l[t];e.parents&&0<e.parents.length&&e.parents.forEach(t=>{kn(c,l[t],e,l)})})}bn(i,ln,!0),Ri.insertTitle(i,"gitTitleText",n.titleTopMargin,a.db.getDiagramTitle()),$r(void 0,i,n.diagramPadding,n.useMaxWidth??s.useMaxWidth)}},Tn=e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join("\n")}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
  }
`;var Rn,En=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var M=[1,6],$=[1,7],P=[1,8],H=[1,9],V=[1,16],U=[1,11],z=[1,12],j=[1,13],W=[1,14],Y=[1,15],q=[1,27],G=[1,33],X=[1,34],K=[1,35],Q=[1,36],Z=[1,37],e=[1,72],i=[1,73],r=[1,74],a=[1,75],s=[1,76],n=[1,77],o=[1,78],l=[1,38],h=[1,39],d=[1,40],u=[1,41],p=[1,42],g=[1,43],y=[1,44],f=[1,45],m=[1,46],b=[1,47],x=[1,48],k=[1,49],_=[1,50],C=[1,51],v=[1,52],T=[1,53],E=[1,54],S=[1,55],w=[1,56],A=[1,57],B=[1,59],L=[1,60],D=[1,61],J=[1,62],tt=[1,63],et=[1,64],it=[1,65],rt=[1,66],at=[1,67],st=[1,68],nt=[1,69],ot=[24,52],lt=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],ct=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],I=[1,94],O=[1,95],F=[1,96],N=[1,97],R=[15,24,52],ht=[7,8,9,10,18,22,25,26,27,28],dt=[15,24,43,52],ut=[15,24,43,52,86,87,89,90],pt=[15,43],gt=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],M={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 4:r.setDirection("TB");break;case 5:r.setDirection("BT");break;case 6:r.setDirection("RL");break;case 7:r.setDirection("LR");break;case 11:r.parseDirective("%%{","open_directive");break;case 12:break;case 13:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 14:r.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:r.setC4Type(s[o-3]);break;case 26:r.setTitle(s[o].substring(6)),this.$=s[o].substring(6);break;case 27:r.setAccDescription(s[o].substring(15)),this.$=s[o].substring(15);break;case 28:this.$=s[o].trim(),r.setTitle(this.$);break;case 29:case 30:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 35:case 36:s[o].splice(2,0,"ENTERPRISE"),r.addPersonOrSystemBoundary(...s[o]),this.$=s[o];break;case 37:r.addPersonOrSystemBoundary(...s[o]),this.$=s[o];break;case 38:s[o].splice(2,0,"CONTAINER"),r.addContainerBoundary(...s[o]),this.$=s[o];break;case 39:r.addDeploymentNode("node",...s[o]),this.$=s[o];break;case 40:r.addDeploymentNode("nodeL",...s[o]),this.$=s[o];break;case 41:r.addDeploymentNode("nodeR",...s[o]),this.$=s[o];break;case 42:r.popBoundaryParseStack();break;case 46:r.addPersonOrSystem("person",...s[o]),this.$=s[o];break;case 47:r.addPersonOrSystem("external_person",...s[o]),this.$=s[o];break;case 48:r.addPersonOrSystem("system",...s[o]),this.$=s[o];break;case 49:r.addPersonOrSystem("system_db",...s[o]),this.$=s[o];break;case 50:r.addPersonOrSystem("system_queue",...s[o]),this.$=s[o];break;case 51:r.addPersonOrSystem("external_system",...s[o]),this.$=s[o];break;case 52:r.addPersonOrSystem("external_system_db",...s[o]),this.$=s[o];break;case 53:r.addPersonOrSystem("external_system_queue",...s[o]),this.$=s[o];break;case 54:r.addContainer("container",...s[o]),this.$=s[o];break;case 55:r.addContainer("container_db",...s[o]),this.$=s[o];break;case 56:r.addContainer("container_queue",...s[o]),this.$=s[o];break;case 57:r.addContainer("external_container",...s[o]),this.$=s[o];break;case 58:r.addContainer("external_container_db",...s[o]),this.$=s[o];break;case 59:r.addContainer("external_container_queue",...s[o]),this.$=s[o];break;case 60:r.addComponent("component",...s[o]),this.$=s[o];break;case 61:r.addComponent("component_db",...s[o]),this.$=s[o];break;case 62:r.addComponent("component_queue",...s[o]),this.$=s[o];break;case 63:r.addComponent("external_component",...s[o]),this.$=s[o];break;case 64:r.addComponent("external_component_db",...s[o]),this.$=s[o];break;case 65:r.addComponent("external_component_queue",...s[o]),this.$=s[o];break;case 67:r.addRel("rel",...s[o]),this.$=s[o];break;case 68:r.addRel("birel",...s[o]),this.$=s[o];break;case 69:r.addRel("rel_u",...s[o]),this.$=s[o];break;case 70:r.addRel("rel_d",...s[o]),this.$=s[o];break;case 71:r.addRel("rel_l",...s[o]),this.$=s[o];break;case 72:r.addRel("rel_r",...s[o]),this.$=s[o];break;case 73:r.addRel("rel_b",...s[o]),this.$=s[o];break;case 74:s[o].splice(0,1),r.addRel("rel",...s[o]),this.$=s[o];break;case 75:r.updateElStyle("update_el_style",...s[o]),this.$=s[o];break;case 76:r.updateRelStyle("update_rel_style",...s[o]),this.$=s[o];break;case 77:r.updateLayoutConfig("update_layout_config",...s[o]),this.$=s[o];break;case 78:this.$=[s[o]];break;case 79:s[o].unshift(s[o-1]),this.$=s[o];break;case 80:case 82:this.$=s[o].trim();break;case 81:var l={};l[s[o-1].trim()]=s[o].trim(),this.$=l;break;case 83:this.$=""}},table:[{3:1,4:2,5:3,6:4,7:M,8:$,9:P,10:H,11:5,12:10,18:V,22:U,25:z,26:j,27:W,28:Y},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:M,8:$,9:P,10:H,11:5,12:10,18:V,22:U,25:z,26:j,27:W,28:Y},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:q},t([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:G,33:X,34:K,36:Q,38:Z,39:58,40:70,42:71,44:e,46:i,47:r,48:a,49:s,50:n,51:o,53:32,54:l,55:h,56:d,57:u,58:p,59:g,60:y,61:f,62:m,63:b,64:x,65:k,66:_,67:C,68:v,69:T,70:E,71:S,72:w,73:A,74:B,75:L,76:D,77:J,78:tt,79:et,80:it,81:rt,82:at,83:st,84:nt},{23:79,29:29,30:30,31:31,32:G,33:X,34:K,36:Q,38:Z,39:58,40:70,42:71,44:e,46:i,47:r,48:a,49:s,50:n,51:o,53:32,54:l,55:h,56:d,57:u,58:p,59:g,60:y,61:f,62:m,63:b,64:x,65:k,66:_,67:C,68:v,69:T,70:E,71:S,72:w,73:A,74:B,75:L,76:D,77:J,78:tt,79:et,80:it,81:rt,82:at,83:st,84:nt},{23:80,29:29,30:30,31:31,32:G,33:X,34:K,36:Q,38:Z,39:58,40:70,42:71,44:e,46:i,47:r,48:a,49:s,50:n,51:o,53:32,54:l,55:h,56:d,57:u,58:p,59:g,60:y,61:f,62:m,63:b,64:x,65:k,66:_,67:C,68:v,69:T,70:E,71:S,72:w,73:A,74:B,75:L,76:D,77:J,78:tt,79:et,80:it,81:rt,82:at,83:st,84:nt},{23:81,29:29,30:30,31:31,32:G,33:X,34:K,36:Q,38:Z,39:58,40:70,42:71,44:e,46:i,47:r,48:a,49:s,50:n,51:o,53:32,54:l,55:h,56:d,57:u,58:p,59:g,60:y,61:f,62:m,63:b,64:x,65:k,66:_,67:C,68:v,69:T,70:E,71:S,72:w,73:A,74:B,75:L,76:D,77:J,78:tt,79:et,80:it,81:rt,82:at,83:st,84:nt},{23:82,29:29,30:30,31:31,32:G,33:X,34:K,36:Q,38:Z,39:58,40:70,42:71,44:e,46:i,47:r,48:a,49:s,50:n,51:o,53:32,54:l,55:h,56:d,57:u,58:p,59:g,60:y,61:f,62:m,63:b,64:x,65:k,66:_,67:C,68:v,69:T,70:E,71:S,72:w,73:A,74:B,75:L,76:D,77:J,78:tt,79:et,80:it,81:rt,82:at,83:st,84:nt},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},t(ot,[2,20],{53:32,39:58,40:70,42:71,30:87,44:e,46:i,47:r,48:a,49:s,50:n,51:o,54:l,55:h,56:d,57:u,58:p,59:g,60:y,61:f,62:m,63:b,64:x,65:k,66:_,67:C,68:v,69:T,70:E,71:S,72:w,73:A,74:B,75:L,76:D,77:J,78:tt,79:et,80:it,81:rt,82:at,83:st,84:nt}),t(ot,[2,21]),t(lt,[2,23],{15:[1,88]}),t(ot,[2,43],{15:[1,89]}),t(ct,[2,26]),t(ct,[2,27]),{35:[1,90]},{37:[1,91]},t(ct,[2,30]),{45:92,85:93,86:I,87:O,89:F,90:N},{45:98,85:93,86:I,87:O,89:F,90:N},{45:99,85:93,86:I,87:O,89:F,90:N},{45:100,85:93,86:I,87:O,89:F,90:N},{45:101,85:93,86:I,87:O,89:F,90:N},{45:102,85:93,86:I,87:O,89:F,90:N},{45:103,85:93,86:I,87:O,89:F,90:N},{45:104,85:93,86:I,87:O,89:F,90:N},{45:105,85:93,86:I,87:O,89:F,90:N},{45:106,85:93,86:I,87:O,89:F,90:N},{45:107,85:93,86:I,87:O,89:F,90:N},{45:108,85:93,86:I,87:O,89:F,90:N},{45:109,85:93,86:I,87:O,89:F,90:N},{45:110,85:93,86:I,87:O,89:F,90:N},{45:111,85:93,86:I,87:O,89:F,90:N},{45:112,85:93,86:I,87:O,89:F,90:N},{45:113,85:93,86:I,87:O,89:F,90:N},{45:114,85:93,86:I,87:O,89:F,90:N},{45:115,85:93,86:I,87:O,89:F,90:N},{45:116,85:93,86:I,87:O,89:F,90:N},t(R,[2,66]),{45:117,85:93,86:I,87:O,89:F,90:N},{45:118,85:93,86:I,87:O,89:F,90:N},{45:119,85:93,86:I,87:O,89:F,90:N},{45:120,85:93,86:I,87:O,89:F,90:N},{45:121,85:93,86:I,87:O,89:F,90:N},{45:122,85:93,86:I,87:O,89:F,90:N},{45:123,85:93,86:I,87:O,89:F,90:N},{45:124,85:93,86:I,87:O,89:F,90:N},{45:125,85:93,86:I,87:O,89:F,90:N},{45:126,85:93,86:I,87:O,89:F,90:N},{45:127,85:93,86:I,87:O,89:F,90:N},{30:128,39:58,40:70,42:71,44:e,46:i,47:r,48:a,49:s,50:n,51:o,53:32,54:l,55:h,56:d,57:u,58:p,59:g,60:y,61:f,62:m,63:b,64:x,65:k,66:_,67:C,68:v,69:T,70:E,71:S,72:w,73:A,74:B,75:L,76:D,77:J,78:tt,79:et,80:it,81:rt,82:at,83:st,84:nt},{15:[1,130],43:[1,129]},{45:131,85:93,86:I,87:O,89:F,90:N},{45:132,85:93,86:I,87:O,89:F,90:N},{45:133,85:93,86:I,87:O,89:F,90:N},{45:134,85:93,86:I,87:O,89:F,90:N},{45:135,85:93,86:I,87:O,89:F,90:N},{45:136,85:93,86:I,87:O,89:F,90:N},{45:137,85:93,86:I,87:O,89:F,90:N},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},t(ht,[2,9]),{14:142,21:q},{21:[2,13]},{1:[2,15]},t(ot,[2,22]),t(lt,[2,24],{31:31,29:143,32:G,33:X,34:K,36:Q,38:Z}),t(ot,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:G,33:X,34:K,36:Q,38:Z,44:e,46:i,47:r,48:a,49:s,50:n,51:o,54:l,55:h,56:d,57:u,58:p,59:g,60:y,61:f,62:m,63:b,64:x,65:k,66:_,67:C,68:v,69:T,70:E,71:S,72:w,73:A,74:B,75:L,76:D,77:J,78:tt,79:et,80:it,81:rt,82:at,83:st,84:nt}),t(ct,[2,28]),t(ct,[2,29]),t(R,[2,46]),t(dt,[2,78],{85:93,45:145,86:I,87:O,89:F,90:N}),t(ut,[2,80]),{88:[1,146]},t(ut,[2,82]),t(ut,[2,83]),t(R,[2,47]),t(R,[2,48]),t(R,[2,49]),t(R,[2,50]),t(R,[2,51]),t(R,[2,52]),t(R,[2,53]),t(R,[2,54]),t(R,[2,55]),t(R,[2,56]),t(R,[2,57]),t(R,[2,58]),t(R,[2,59]),t(R,[2,60]),t(R,[2,61]),t(R,[2,62]),t(R,[2,63]),t(R,[2,64]),t(R,[2,65]),t(R,[2,67]),t(R,[2,68]),t(R,[2,69]),t(R,[2,70]),t(R,[2,71]),t(R,[2,72]),t(R,[2,73]),t(R,[2,74]),t(R,[2,75]),t(R,[2,76]),t(R,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},t(pt,[2,35]),t(pt,[2,36]),t(pt,[2,37]),t(pt,[2,38]),t(pt,[2,39]),t(pt,[2,40]),t(pt,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},t(lt,[2,25]),t(ot,[2,45]),t(dt,[2,79]),t(ut,[2,81]),t(R,[2,31]),t(R,[2,42]),t(gt,[2,32]),t(gt,[2,33],{15:[1,152]}),t(ht,[2,10]),t(gt,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};$={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:case 78:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:case 21:case 75:break;case 19:c;break;case 20:return 15;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:case 58:return this.begin("rel_u"),76;case 59:case 60:return this.begin("rel_d"),77;case 61:case 62:return this.begin("rel_l"),78;case 63:case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:case 84:this.popState(),this.popState();break;case 74:case 76:return 90;case 77:this.begin("string");break;case 79:case 85:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};function yt(){this.yy={}}return M.lexer=$,new((yt.prototype=M).Parser=yt)}();const vn=En.parser=En,Sn=t=>null!==t.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/);let wn=[],An=[""],Bn="global",Ln="",Dn=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],In=[],On="",Fn=!1,Nn=4,$n=2;const Mn=function(e){return null==e?wn:wn.filter(t=>t.parentBoundary===e)},Pn=function(){return Fn},zn={addPersonOrSystem:function(e,i,r,a,s,n,o){if(null!==i&&null!==r){let t={};var l=wn.find(t=>t.alias===i);l&&i===l.alias?t=l:(t.alias=i,wn.push(t)),t.label=null==r?{text:""}:{text:r},null==a?t.descr={text:""}:"object"==typeof a?([l,r]=Object.entries(a)[0],t[l]={text:r}):t.descr={text:a},"object"==typeof s?([l,r]=Object.entries(s)[0],t[l]=r):t.sprite=s,"object"==typeof n?([a,l]=Object.entries(n)[0],t[a]=l):t.tags=n,"object"==typeof o?([r,s]=Object.entries(o)[0],t[r]=s):t.link=o,t.typeC4Shape={text:e},t.parentBoundary=Bn,t.wrap=Pn()}},addPersonOrSystemBoundary:function(e,i,r,a,s){if(null!==e&&null!==i){let t={};var n=Dn.find(t=>t.alias===e);n&&e===n.alias?t=n:(t.alias=e,Dn.push(t)),t.label=null==i?{text:""}:{text:i},null==r?t.type={text:"system"}:"object"==typeof r?([n,i]=Object.entries(r)[0],t[n]={text:i}):t.type={text:r},"object"==typeof a?([n,i]=Object.entries(a)[0],t[n]=i):t.tags=a,"object"==typeof s?([r,n]=Object.entries(s)[0],t[r]=n):t.link=s,t.parentBoundary=Bn,t.wrap=Pn(),Ln=Bn,Bn=e,An.push(Ln)}},addContainer:function(e,i,r,a,s,n,o,l){if(null!==i&&null!==r){let t={};var c=wn.find(t=>t.alias===i);c&&i===c.alias?t=c:(t.alias=i,wn.push(t)),t.label=null==r?{text:""}:{text:r},null==a?t.techn={text:""}:"object"==typeof a?([c,r]=Object.entries(a)[0],t[c]={text:r}):t.techn={text:a},null==s?t.descr={text:""}:"object"==typeof s?([c,r]=Object.entries(s)[0],t[c]={text:r}):t.descr={text:s},"object"==typeof n?([a,c]=Object.entries(n)[0],t[a]=c):t.sprite=n,"object"==typeof o?([r,s]=Object.entries(o)[0],t[r]=s):t.tags=o,"object"==typeof l?([a,c]=Object.entries(l)[0],t[a]=c):t.link=l,t.wrap=Pn(),t.typeC4Shape={text:e},t.parentBoundary=Bn}},addContainerBoundary:function(e,i,r,a,s){if(null!==e&&null!==i){let t={};var n=Dn.find(t=>t.alias===e);n&&e===n.alias?t=n:(t.alias=e,Dn.push(t)),t.label=null==i?{text:""}:{text:i},null==r?t.type={text:"container"}:"object"==typeof r?([n,i]=Object.entries(r)[0],t[n]={text:i}):t.type={text:r},"object"==typeof a?([n,i]=Object.entries(a)[0],t[n]=i):t.tags=a,"object"==typeof s?([r,n]=Object.entries(s)[0],t[r]=n):t.link=s,t.parentBoundary=Bn,t.wrap=Pn(),Ln=Bn,Bn=e,An.push(Ln)}},addComponent:function(e,i,r,a,s,n,o,l){if(null!==i&&null!==r){let t={};var c=wn.find(t=>t.alias===i);c&&i===c.alias?t=c:(t.alias=i,wn.push(t)),t.label=null==r?{text:""}:{text:r},null==a?t.techn={text:""}:"object"==typeof a?([c,r]=Object.entries(a)[0],t[c]={text:r}):t.techn={text:a},null==s?t.descr={text:""}:"object"==typeof s?([c,r]=Object.entries(s)[0],t[c]={text:r}):t.descr={text:s},"object"==typeof n?([a,c]=Object.entries(n)[0],t[a]=c):t.sprite=n,"object"==typeof o?([r,s]=Object.entries(o)[0],t[r]=s):t.tags=o,"object"==typeof l?([a,c]=Object.entries(l)[0],t[a]=c):t.link=l,t.wrap=Pn(),t.typeC4Shape={text:e},t.parentBoundary=Bn}},addDeploymentNode:function(e,i,r,a,s,t,n,o){if(null!==i&&null!==r){let t={};var l=Dn.find(t=>t.alias===i);l&&i===l.alias?t=l:(t.alias=i,Dn.push(t)),t.label=null==r?{text:""}:{text:r},null==a?t.type={text:"node"}:"object"==typeof a?([l,r]=Object.entries(a)[0],t[l]={text:r}):t.type={text:a},null==s?t.descr={text:""}:"object"==typeof s?([l,r]=Object.entries(s)[0],t[l]={text:r}):t.descr={text:s},"object"==typeof n?([a,l]=Object.entries(n)[0],t[a]=l):t.tags=n,"object"==typeof o?([r,s]=Object.entries(o)[0],t[r]=s):t.link=o,t.nodeType=e,t.parentBoundary=Bn,t.wrap=Pn(),Ln=Bn,Bn=i,An.push(Ln)}},popBoundaryParseStack:function(){Bn=Ln,An.pop(),Ln=An.pop(),An.push(Ln)},addRel:function(e,i,r,a,s,n,o,l,c){if(null!=e&&null!=i&&null!=r&&null!=a){let t={};var h=In.find(t=>t.from===i&&t.to===r);h?t=h:In.push(t),t.type=e,t.from=i,t.to=r,t.label={text:a},null==s?t.techn={text:""}:"object"==typeof s?([h,e]=Object.entries(s)[0],t[h]={text:e}):t.techn={text:s},null==n?t.descr={text:""}:"object"==typeof n?([a,h]=Object.entries(n)[0],t[a]={text:h}):t.descr={text:n},"object"==typeof o?([e,s]=Object.entries(o)[0],t[e]=s):t.sprite=o,"object"==typeof l?([a,h]=Object.entries(l)[0],t[a]=h):t.tags=l,"object"==typeof c?([n,e]=Object.entries(c)[0],t[n]=e):t.link=c,t.wrap=Pn()}},updateElStyle:function(t,e,i,r,a,s,n,o,l,c,h){let d=wn.find(t=>t.alias===e);var u,p;void 0===d&&void 0===(d=Dn.find(t=>t.alias===e))||(null!=i&&("object"==typeof i?([p,u]=Object.entries(i)[0],d[p]=u):d.bgColor=i),null!=r&&("object"==typeof r?([p,u]=Object.entries(r)[0],d[p]=u):d.fontColor=r),null!=a&&("object"==typeof a?([i,p]=Object.entries(a)[0],d[i]=p):d.borderColor=a),null!=s&&("object"==typeof s?([u,r]=Object.entries(s)[0],d[u]=r):d.shadowing=s),null!=n&&("object"==typeof n?([i,p]=Object.entries(n)[0],d[i]=p):d.shape=n),null!=o&&("object"==typeof o?([a,u]=Object.entries(o)[0],d[a]=u):d.sprite=o),null!=l&&("object"==typeof l?([r,s]=Object.entries(l)[0],d[r]=s):d.techn=l),null!=c&&("object"==typeof c?([i,p]=Object.entries(c)[0],d[i]=p):d.legendText=c),null!=h&&("object"==typeof h?([n,a]=Object.entries(h)[0],d[n]=a):d.legendSprite=h))},updateRelStyle:function(t,e,i,r,a,s,n){var o,l,c=In.find(t=>t.from===e&&t.to===i);void 0!==c&&(null!=r&&("object"==typeof r?([o,l]=Object.entries(r)[0],c[o]=l):c.textColor=r),null!=a&&("object"==typeof a?([o,l]=Object.entries(a)[0],c[o]=l):c.lineColor=a),null!=s&&("object"==typeof s?([r,o]=Object.entries(s)[0],c[r]=parseInt(o)):c.offsetX=parseInt(s)),null!=n)&&("object"==typeof n?([l,a]=Object.entries(n)[0],c[l]=parseInt(a)):c.offsetY=parseInt(n))},updateLayoutConfig:function(t,e,i){let r=Nn,a=$n;if("object"==typeof e){const t=Object.values(e)[0];r=parseInt(t)}else r=parseInt(e);if("object"==typeof i){const t=Object.values(i)[0];a=parseInt(t)}else a=parseInt(i);1<=r&&(Nn=r),1<=a&&($n=a)},autoWrap:Pn,setWrap:function(t){Fn=t},getC4ShapeArray:Mn,getC4Shape:function(e){return wn.find(t=>t.alias===e)},getC4ShapeKeys:function(t){return Object.keys(Mn(t))},getBoundarys:function(e){return null==e?Dn:Dn.filter(t=>t.parentBoundary===e)},getCurrentBoundaryParse:function(){return Bn},getParentBoundaryParse:function(){return Ln},getRels:function(){return In},getTitle:function(){return On},getC4Type:function(){return Rn},getC4ShapeInRow:function(){return Nn},getC4BoundaryInRow:function(){return $n},setAccTitle:_r,getAccTitle:Cr,getAccDescription:Er,setAccDescription:Tr,parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},getConfig:()=>Hi().c4,clear:function(){wn=[],Dn=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Ln="",Bn="global",An=[""],In=[],An=[""],On="",Fn=!1,Nn=4,$n=2},LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:function(t){t=bt(t,Hi());On=t},setC4Type:function(t){t=bt(t,Hi());Rn=t}},jn=function(t,e){var i=t.append("rect");if(i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),i.attr("rx",e.rx),i.attr("ry",e.ry),"undefined"!==e.attrs&&null!==e.attrs)for(var r in e.attrs)i.attr(r,e.attrs[r]);return"undefined"!==e.class&&i.attr("class",e.class),i},Yn=function(t,e,r,a,s,n){t=t.append("image"),t.attr("width",e),t.attr("height",r),t.attr("x",a),t.attr("y",s),e=n.startsWith("data:image/png;base64")?n:i(n);t.attr("xlink:href",e)},Wn=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},qn=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Un=function(){function e(t,e,i,r,a,s,n){u(e.append("text").attr("x",i+a/2).attr("y",r+s/2+5).style("text-anchor","middle").text(t),n)}function l(t,e,i,r,a,s,n,o){var{fontSize:l,fontFamily:c,fontWeight:h}=o,d=t.split(Et.lineBreakRegex);for(let t=0;t<d.length;t++){const s=t*l-l*(d.length-1)/2,o=e.append("text").attr("x",i+a/2).attr("y",r).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",l).style("font-weight",h).style("font-family",c);o.append("tspan").attr("dy",s).text(d[t]).attr("alignment-baseline","mathematical"),u(o,n)}}function i(t,e,i,r,a,s,n,o){e=e.append("switch"),s=e.append("foreignObject").attr("x",i).attr("y",r).attr("width",a).attr("height",s).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");s.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),l(t,e,i,r,a,0,n,o),u(s,n)}function u(t,e){for(const i in e)e.hasOwnProperty(i)&&t.attr(i,e[i])}return function(t){return"fo"===t.textPlacement?i:"old"===t.textPlacement?e:l}}(),Vn=function(t,e,i){t=t.append("g");let r=e.bgColor||"none",a=e.borderColor||"#444444",s=e.fontColor||"black",n={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(n={"stroke-width":1});var o={x:e.x,y:e.y,fill:r,stroke:a,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:n};jn(t,o);let l=i.boundaryFont();l.fontWeight="bold",l.fontSize=l.fontSize+2,l.fontColor=s,Un(i)(e.label.text,t,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},l),e.type&&""!==e.type.text&&((l=i.boundaryFont()).fontColor=s,Un(i)(e.type.text,t,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},l)),e.descr&&""!==e.descr.text&&((l=i.boundaryFont()).fontSize=l.fontSize-2,l.fontColor=s,Un(i)(e.descr.text,t,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},l))},Hn=function(t,e,i){let r=e.bgColor||i[e.typeC4Shape.text+"_bg_color"],a=e.borderColor||i[e.typeC4Shape.text+"_border_color"],s=e.fontColor||"#FFFFFF",n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}var o=t.append("g"),l=(o.attr("class","person-man"),Wn());switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":l.x=e.x,l.y=e.y,l.fill=r,l.width=e.width,l.height=e.height,l.stroke=a,l.rx=2.5,l.ry=2.5,l.attrs={"stroke-width":.5},jn(o,l);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":o.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",a).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",a).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":o.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",a).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",a).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2))}var t=qn(i,e.typeC4Shape.text);switch(o.append("text").attr("fill",s).attr("font-family",t.fontFamily).attr("font-size",t.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":Yn(o,48,48,e.x+e.width/2-24,e.y+e.image.Y,n)}let c=i[e.typeC4Shape.text+"Font"]();return c.fontWeight="bold",c.fontSize=c.fontSize+2,c.fontColor=s,Un(i)(e.label.text,o,e.x,e.y+e.label.Y,e.width,e.height,{fill:s},c),(c=i[e.typeC4Shape.text+"Font"]()).fontColor=s,e.techn&&""!==(null==(t=e.techn)?void 0:t.text)?Un(i)(e.techn.text,o,e.x,e.y+e.techn.Y,e.width,e.height,{fill:s,"font-style":"italic"},c):e.type&&""!==e.type.text&&Un(i)(e.type.text,o,e.x,e.y+e.type.Y,e.width,e.height,{fill:s,"font-style":"italic"},c),e.descr&&""!==e.descr.text&&((c=i.personFont()).fontColor=s,Un(i)(e.descr.text,o,e.x,e.y+e.descr.Y,e.width,e.height,{fill:s},c)),e.height},Gn=(t,e,i)=>{var r,a=t.append("g");let s=0;for(r of e){var n,o=r.textColor||"#444444",l=r.lineColor||"#444444",c=r.offsetX?parseInt(r.offsetX):0,h=r.offsetY?parseInt(r.offsetY):0,l=(0===s?((n=a.append("line")).attr("x1",r.startPoint.x),n.attr("y1",r.startPoint.y),n.attr("x2",r.endPoint.x),n.attr("y2",r.endPoint.y),n.attr("stroke-width","1"),n.attr("stroke",l),n.style("fill","none"),"rel_b"!==r.type&&n.attr("marker-end","url(#arrowhead)"),"birel"!==r.type&&"rel_b"!==r.type||n.attr("marker-start","url(#arrowend)"),s=-1):((n=a.append("path")).attr("fill","none").attr("stroke-width","1").attr("stroke",l).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",r.startPoint.x).replaceAll("starty",r.startPoint.y).replaceAll("controlx",r.startPoint.x+(r.endPoint.x-r.startPoint.x)/2-(r.endPoint.x-r.startPoint.x)/4).replaceAll("controly",r.startPoint.y+(r.endPoint.y-r.startPoint.y)/2).replaceAll("stopx",r.endPoint.x).replaceAll("stopy",r.endPoint.y)),"rel_b"!==r.type&&n.attr("marker-end","url(#arrowhead)"),"birel"!==r.type&&"rel_b"!==r.type||n.attr("marker-start","url(#arrowend)")),i.messageFont());Un(i)(r.label.text,a,Math.min(r.startPoint.x,r.endPoint.x)+Math.abs(r.endPoint.x-r.startPoint.x)/2+c,Math.min(r.startPoint.y,r.endPoint.y)+Math.abs(r.endPoint.y-r.startPoint.y)/2+h,r.label.width,r.label.height,{fill:o},l),r.techn&&""!==r.techn.text&&(l=i.messageFont(),Un(i)("["+r.techn.text+"]",a,Math.min(r.startPoint.x,r.endPoint.x)+Math.abs(r.endPoint.x-r.startPoint.x)/2+c,Math.min(r.startPoint.y,r.endPoint.y)+Math.abs(r.endPoint.y-r.startPoint.y)/2+i.messageFontSize+5+h,Math.max(r.label.width,r.techn.width),r.techn.height,{fill:o,"font-style":"italic"},l))}},Xn=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},Kn=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},Qn=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Zn=function(t){t=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);t.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),t.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},Jn=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},ts=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},es=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")};let is=0,rs=0,ns=4,ss=2,as=(En.yy=zn,{});class os{constructor(t){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,ls(t.db.getConfig())}setData(t,e,i,r){this.nextData.startx=this.data.startx=t,this.nextData.stopx=this.data.stopx=e,this.nextData.starty=this.data.starty=i,this.nextData.stopy=this.data.stopy=r}updateVal(t,e,i,r){void 0===t[e]?t[e]=i:t[e]=r(i,t[e])}insert(t){this.nextData.cnt=this.nextData.cnt+1;let e=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+t.margin:this.nextData.stopx+2*t.margin,i=e+t.width,r=this.nextData.starty+2*t.margin,a=r+t.height;(e>=this.data.widthLimit||i>=this.data.widthLimit||this.nextData.cnt>ns)&&(e=this.nextData.startx+t.margin+as.nextLinePaddingX,r=this.nextData.stopy+2*t.margin,this.nextData.stopx=i=e+t.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=a=r+t.height,this.nextData.cnt=1),t.x=e,t.y=r,this.updateVal(this.data,"startx",e,Math.min),this.updateVal(this.data,"starty",r,Math.min),this.updateVal(this.data,"stopx",i,Math.max),this.updateVal(this.data,"stopy",a,Math.max),this.updateVal(this.nextData,"startx",e,Math.min),this.updateVal(this.nextData,"starty",r,Math.min),this.updateVal(this.nextData,"stopx",i,Math.max),this.updateVal(this.nextData,"stopy",a,Math.max)}init(t){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},ls(t.db.getConfig())}bumpLastMargin(t){this.data.stopx+=t,this.data.stopy+=t}}const ls=function(t){yi(as,t),t.fontFamily&&(as.personFontFamily=as.systemFontFamily=as.messageFontFamily=t.fontFamily),t.fontSize&&(as.personFontSize=as.systemFontSize=as.messageFontSize=t.fontSize),t.fontWeight&&(as.personFontWeight=as.systemFontWeight=as.messageFontWeight=t.fontWeight)},cs=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),hs=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight});function ds(t,e,i,r,a){if(!e[t].width)if(i)e[t].text=wi(e[t].text,a,r),e[t].textLines=e[t].text.split(Et.lineBreakRegex).length,e[t].width=a,e[t].height=Bi(e[t].text,r);else{var s,i=e[t].text.split(Et.lineBreakRegex);e[t].textLines=i.length;e[t].height=0,e[t].width=0;for(const n of i)e[t].width=Math.max(Li(n,r),e[t].width),s=Bi(n,r),e[t].height=e[t].height+s}}const us=function(t,e,i){e.x=i.data.startx,e.y=i.data.starty,e.width=i.data.stopx-i.data.startx,e.height=i.data.stopy-i.data.starty,e.label.y=as.c4ShapeMargin-35;var i=e.wrap&&as.wrap,r=hs(as);r.fontSize=r.fontSize+2,r.fontWeight="bold",ds("label",e,i,r,Li(e.label.text,r)),Vn(t,e,as)},ps=function(i,r,a,s){let n=0;for(const h of s){n=0;const s=a[h];var o=cs(as,s.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,s.typeC4Shape.width=Li("<<"+s.typeC4Shape.text+">>",o),s.typeC4Shape.height=o.fontSize+2,s.typeC4Shape.Y=as.c4ShapePadding,n=s.typeC4Shape.Y+s.typeC4Shape.height-4,s.image={width:0,height:0,Y:0},s.typeC4Shape.text){case"person":case"external_person":s.image.width=48,s.image.height=48,s.image.Y=n,n=s.image.Y+s.image.height}s.sprite&&(s.image.width=48,s.image.height=48,s.image.Y=n,n=s.image.Y+s.image.height);var o=s.wrap&&as.wrap,l=as.width-2*as.c4ShapePadding,c=cs(as,s.typeC4Shape.text);c.fontSize=c.fontSize+2,c.fontWeight="bold",ds("label",s,o,c,l),s.label.Y=n+8,n=s.label.Y+s.label.height,s.type&&""!==s.type.text?(s.type.text="["+s.type.text+"]",ds("type",s,o,cs(as,s.typeC4Shape.text),l),s.type.Y=n+5,n=s.type.Y+s.type.height):s.techn&&""!==s.techn.text&&(s.techn.text="["+s.techn.text+"]",ds("techn",s,o,cs(as,s.techn.text),l),s.techn.Y=n+5,n=s.techn.Y+s.techn.height);let t=n,e=s.label.width;s.descr&&""!==s.descr.text&&(ds("descr",s,o,cs(as,s.typeC4Shape.text),l),s.descr.Y=n+20,n=s.descr.Y+s.descr.height,e=Math.max(s.label.width,s.descr.width),t=n-5*s.descr.textLines),e+=as.c4ShapePadding,s.width=Math.max(s.width||as.width,e,as.width),s.height=Math.max(s.height||as.height,t,as.height),s.margin=s.margin||as.c4ShapeMargin,i.insert(s),Hn(r,s,as)}i.bumpLastMargin(as.c4ShapeMargin)};class gs{constructor(t,e){this.x=t,this.y=e}}let ys=function(t,e){let i=t.x,r=t.y,a=e.x,s=e.y,n=i+t.width/2,o=r+t.height/2,l=Math.abs(i-a),c=Math.abs(r-s),h=c/l,d=t.height/t.width,u=null;return r==s&&i<a?u=new gs(i+t.width,o):r==s&&a<i?u=new gs(i,o):i==a&&r<s?u=new gs(n,r+t.height):i==a&&s<r&&(u=new gs(n,r)),a<i&&r<s?u=h<=d?new gs(i,o+h*t.width/2):new gs(n-l/c*t.height/2,r+t.height):i<a&&r<s?u=h<=d?new gs(i+t.width,o+h*t.width/2):new gs(n+l/c*t.height/2,r+t.height):i<a&&s<r?u=h<=d?new gs(i+t.width,o-h*t.width/2):new gs(n+t.height/2*l/c,r):a<i&&s<r&&(u=h<=d?new gs(i,o-t.width/2*h):new gs(n-t.height/2*l/c,r)),u},fs=function(t,e){var i={x:0,y:0},r=(i.x=e.x+e.width/2,i.y=e.y+e.height/2,ys(t,i));return i.x=t.x+t.width/2,i.y=t.y+t.height/2,{startPoint:r,endPoint:ys(e,i)}};function ms(e,i,r,t,a){var s,n,o=new os(a);o.data.widthLimit=r.data.widthLimit/Math.min(ss,t.length);for([s,n]of t.entries()){let t=0;n.image={width:0,height:0,Y:0},n.sprite&&(n.image.width=48,n.image.height=48,n.image.Y=t,t=n.image.Y+n.image.height);var l=n.wrap&&as.wrap,c=hs(as),l=(c.fontSize=c.fontSize+2,c.fontWeight="bold",ds("label",n,l,c,o.data.widthLimit),n.label.Y=t+8,t=n.label.Y+n.label.height,n.type&&""!==n.type.text&&(n.type.text="["+n.type.text+"]",ds("type",n,l,hs(as),o.data.widthLimit),n.type.Y=t+5,t=n.type.Y+n.type.height),n.descr&&""!==n.descr.text&&((c=hs(as)).fontSize=c.fontSize-2,ds("descr",n,l,c,o.data.widthLimit),n.descr.Y=t+20,t=n.descr.Y+n.descr.height),0==s||s%ss==0?(l=r.data.startx+as.diagramMarginX,c=r.data.stopy+as.diagramMarginY+t,o.setData(l,l,c,c)):(l=o.data.stopx!==o.data.startx?o.data.stopx+as.diagramMarginX:o.data.startx,c=o.data.starty,o.setData(l,l,c,c)),o.name=n.alias,a.db.getC4ShapeArray(n.alias)),c=a.db.getC4ShapeKeys(n.alias),l=(0<c.length&&ps(o,e,l,c),i=n.alias,a.db.getBoundarys(i));0<l.length&&ms(e,i,o,l,a),"global"!==n.alias&&us(e,n,o),r.data.stopy=Math.max(o.data.stopy+as.c4ShapeMargin,r.data.stopy),r.data.stopx=Math.max(o.data.stopx+as.c4ShapeMargin,r.data.stopx),is=Math.max(is,r.data.stopx),rs=Math.max(rs,r.data.stopy)}}const bs={drawPersonOrSystemArray:ps,drawBoundary:us,setConf:ls,draw:function(t,i,e,a){as=Hi().c4;var s=Hi().securityLevel;let n;"sandbox"===s&&(n=r("#i"+i));var o=r("sandbox"===s?n.nodes()[0].contentDocument.body:"body"),l=a.db,l=(a.db.setWrap(as.wrap),ns=l.getC4ShapeInRow(),ss=l.getC4BoundaryInRow(),pt.debug("C:"+JSON.stringify(as,null,2)),"sandbox"===s?o.select(`[id="${i}"]`):r(`[id="${i}"]`)),s=(ts(l),Jn(l),es(l),new os(a)),o=(s.setData(as.diagramMarginX,as.diagramMarginX,as.diagramMarginY,as.diagramMarginY),s.data.widthLimit=screen.availWidth,is=as.diagramMarginX,rs=as.diagramMarginY,a.db.getTitle());ms(l,"",s,a.db.getBoundarys(""),a),Xn(l),Kn(l),Zn(l),Qn(l);{i=l;var c=a.db.getRels(),h=a.db.getC4Shape,d=a,u;let e=0;for(u of c){e+=1;var p=u.wrap&&as.wrap,g={fontFamily:(g=as).messageFontFamily,fontSize:g.messageFontSize,fontWeight:g.messageFontWeight};"C4Dynamic"===d.db.getC4Type()&&(u.label.text=e+": "+u.label.text);let t=Li(u.label.text,g);ds("label",u,p,g,t),u.techn&&""!==u.techn.text&&(t=Li(u.techn.text,g),ds("techn",u,p,g,t)),u.descr&&""!==u.descr.text&&(t=Li(u.descr.text,g),ds("descr",u,p,g,t));p=h(u.from),g=h(u.to),p=fs(p,g);u.startPoint=p.startPoint,u.endPoint=p.endPoint}Gn(i,c,as)}s.data.stopx=is,s.data.stopy=rs;a=s.data,i=a.stopy-a.starty+2*as.diagramMarginY,c=a.stopx-a.startx+2*as.diagramMarginX,o&&l.append("text").text(o).attr("x",(a.stopx-a.startx)/2-4*as.diagramMarginX).attr("y",a.starty+as.diagramMarginY),tr(l,i,c,as.useMaxWidth),s=o?60:0;l.attr("viewBox",a.startx-as.diagramMarginX+" -"+(as.diagramMarginY+s)+" "+c+" "+(i+s)),pt.debug("models:",a)}};var xs=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e=[1,3],i=[1,7],r=[1,8],a=[1,9],s=[1,10],n=[1,13],o=[1,12],l=[1,16,25],c=[1,20],h=[1,32],d=[1,33],u=[1,34],p=[1,36],g=[1,39],y=[1,37],f=[1,38],m=[1,44],R=[1,45],M=[1,40],$=[1,41],P=[1,42],H=[1,43],b=[1,48],x=[1,49],k=[1,50],_=[1,51],C=[16,25],v=[1,65],T=[1,66],E=[1,67],S=[1,68],w=[1,69],A=[1,70],B=[1,71],V=[1,80],L=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],D=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],U=[5,8,9,10,11,16,19,23,25],I=[54,88,89,90,91],O=[54,65,66,88,89,90,91],z=[54,60,61,62,63,64,88,89,90,91],F=[16,25,32],N=[1,107],e={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 5:r.setDirection("TB");break;case 6:r.setDirection("BT");break;case 7:r.setDirection("RL");break;case 8:r.setDirection("LR");break;case 12:r.parseDirective("%%{","open_directive");break;case 13:r.parseDirective(s[o],"type_directive");break;case 14:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 15:r.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=s[o];break;case 22:this.$=s[o-1]+s[o];break;case 23:case 24:this.$=s[o-1]+"~"+s[o];break;case 25:r.addRelation(s[o]);break;case 26:s[o-1].title=r.cleanupLabel(s[o]),r.addRelation(s[o-1]);break;case 35:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 36:case 37:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 38:r.addClass(s[o]);break;case 39:r.addClass(s[o-2]),r.setCssClass(s[o-2],s[o]);break;case 40:r.addClass(s[o-3]),r.addMembers(s[o-3],s[o-1]);break;case 41:r.addClass(s[o-5]),r.setCssClass(s[o-5],s[o-3]),r.addMembers(s[o-5],s[o-1]);break;case 42:r.addAnnotation(s[o],s[o-2]);break;case 43:this.$=[s[o]];break;case 44:s[o].push(s[o-1]),this.$=s[o];break;case 45:case 47:case 48:break;case 46:r.addMember(s[o-1],r.cleanupLabel(s[o]));break;case 49:this.$={id1:s[o-2],id2:s[o],relation:s[o-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:s[o-3],id2:s[o],relation:s[o-1],relationTitle1:s[o-2],relationTitle2:"none"};break;case 51:this.$={id1:s[o-3],id2:s[o],relation:s[o-2],relationTitle1:"none",relationTitle2:s[o-1]};break;case 52:this.$={id1:s[o-4],id2:s[o],relation:s[o-2],relationTitle1:s[o-3],relationTitle2:s[o-1]};break;case 53:r.addNote(s[o],s[o-1]);break;case 54:r.addNote(s[o]);break;case 55:this.$={type1:s[o-2],type2:s[o],lineType:s[o-1]};break;case 56:this.$={type1:"none",type2:s[o],lineType:s[o-1]};break;case 57:this.$={type1:s[o-1],type2:"none",lineType:s[o]};break;case 58:this.$={type1:"none",type2:"none",lineType:s[o]};break;case 59:this.$=r.relationType.AGGREGATION;break;case 60:this.$=r.relationType.EXTENSION;break;case 61:this.$=r.relationType.COMPOSITION;break;case 62:this.$=r.relationType.DEPENDENCY;break;case 63:this.$=r.relationType.LOLLIPOP;break;case 64:this.$=r.lineType.LINE;break;case 65:this.$=r.lineType.DOTTED_LINE;break;case 66:case 72:this.$=s[o-2],r.setClickEvent(s[o-1],s[o]);break;case 67:case 73:this.$=s[o-3],r.setClickEvent(s[o-2],s[o-1]),r.setTooltip(s[o-2],s[o]);break;case 68:case 76:this.$=s[o-2],r.setLink(s[o-1],s[o]);break;case 69:case 77:this.$=s[o-3],r.setLink(s[o-2],s[o-1],s[o]);break;case 70:case 78:this.$=s[o-3],r.setLink(s[o-2],s[o-1]),r.setTooltip(s[o-2],s[o]);break;case 71:case 79:this.$=s[o-4],r.setLink(s[o-3],s[o-2],s[o]),r.setTooltip(s[o-3],s[o-1]);break;case 74:this.$=s[o-3],r.setClickEvent(s[o-2],s[o-1],s[o]);break;case 75:this.$=s[o-4],r.setClickEvent(s[o-3],s[o-2],s[o-1]),r.setTooltip(s[o-3],s[o]);break;case 80:r.setCssClass(s[o-1],s[o])}},table:[{3:1,4:2,5:e,6:4,7:5,8:i,9:r,10:a,11:s,12:6,13:11,19:n,23:o},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:e,6:4,7:5,8:i,9:r,10:a,11:s,12:6,13:11,19:n,23:o},{1:[2,9]},t(l,[2,5]),t(l,[2,6]),t(l,[2,7]),t(l,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:c},t([17,22],[2,13]),{6:31,7:30,8:i,9:r,10:a,11:s,13:11,19:n,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:h,41:d,43:u,44:p,49:g,51:y,52:f,55:m,57:R,67:M,68:$,70:P,74:H,88:b,89:x,90:k,91:_},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},t(C,[2,25],{32:[1,57]}),t(C,[2,27]),t(C,[2,28]),t(C,[2,29]),t(C,[2,30]),t(C,[2,31]),t(C,[2,32]),t(C,[2,33]),t(C,[2,34]),{40:[1,58]},{42:[1,59]},t(C,[2,37]),t(C,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:v,61:T,62:E,63:S,64:w,65:A,66:B}),{27:72,28:46,29:47,88:b,89:x,90:k,91:_},t(C,[2,47]),t(C,[2,48]),{28:73,88:b,89:x,90:k},{27:74,28:46,29:47,88:b,89:x,90:k,91:_},{27:75,28:46,29:47,88:b,89:x,90:k,91:_},{27:76,28:46,29:47,88:b,89:x,90:k,91:_},{54:[1,77]},{27:78,28:46,29:47,88:b,89:x,90:k,91:_},{54:V,56:79},t(L,[2,20],{28:46,29:47,27:81,30:[1,82],88:b,89:x,90:k,91:_}),t(L,[2,21],{30:[1,83]}),t(D,[2,94]),t(D,[2,95]),t(D,[2,96]),t([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),t(U,[2,10]),{15:84,22:c},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:i,9:r,10:a,11:s,13:11,19:n,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:h,41:d,43:u,44:p,49:g,51:y,52:f,55:m,57:R,67:M,68:$,70:P,74:H,88:b,89:x,90:k,91:_},t(C,[2,26]),t(C,[2,35]),t(C,[2,36]),{27:86,28:46,29:47,54:[1,87],88:b,89:x,90:k,91:_},{53:88,58:63,59:64,60:v,61:T,62:E,63:S,64:w,65:A,66:B},t(C,[2,46]),{59:89,65:A,66:B},t(I,[2,58],{58:90,60:v,61:T,62:E,63:S,64:w}),t(O,[2,59]),t(O,[2,60]),t(O,[2,61]),t(O,[2,62]),t(O,[2,63]),t(z,[2,64]),t(z,[2,65]),t(C,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:b,89:x,90:k},{54:V,56:99},t(C,[2,54]),t(C,[2,98]),t(L,[2,22]),t(L,[2,23]),t(L,[2,24]),{16:[1,100]},{25:[2,19]},t(F,[2,49]),{27:101,28:46,29:47,88:b,89:x,90:k,91:_},{27:102,28:46,29:47,54:[1,103],88:b,89:x,90:k,91:_},t(I,[2,57],{58:104,60:v,61:T,62:E,63:S,64:w}),t(I,[2,56]),{28:105,88:b,89:x,90:k},{47:106,51:N},{27:108,28:46,29:47,88:b,89:x,90:k,91:_},t(C,[2,66],{54:[1,109]}),t(C,[2,68],{54:[1,111],69:[1,110]}),t(C,[2,72],{54:[1,112],72:[1,113]}),t(C,[2,76],{54:[1,115],69:[1,114]}),t(C,[2,80]),t(C,[2,53]),t(U,[2,11]),t(F,[2,51]),t(F,[2,50]),{27:116,28:46,29:47,88:b,89:x,90:k,91:_},t(I,[2,55]),t(C,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:N},t(C,[2,42]),t(C,[2,67]),t(C,[2,69]),t(C,[2,70],{69:[1,120]}),t(C,[2,73]),t(C,[2,74],{54:[1,121]}),t(C,[2,77]),t(C,[2,78],{69:[1,122]}),t(F,[2,52]),{47:123,51:N},t(C,[2,40]),{48:[2,44]},t(C,[2,71]),t(C,[2,75]),t(C,[2,79]),{48:[1,124]},t(C,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};o={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:case 10:case 19:case 27:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:case 39:case 42:case 45:case 48:case 51:case 54:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 20:case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 43:return"STR";case 44:this.begin("bqstring");break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 49:return 73;case 50:this.begin("callback_name");break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 55:return 72;case 56:case 57:case 58:case 59:return 69;case 60:case 61:return 61;case 62:case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};function j(){this.yy={}}return e.lexer=o,new((j.prototype=e).Parser=j)}();const ks=xs.parser=xs,_s=(t,e)=>{return"dagre-wrapper"!==(null==(e=null==e?void 0:e.class)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*classDiagram/)},Cs=(t,e)=>{return null!==t.match(/^\s*classDiagram/)&&"dagre-wrapper"===(null==(e=null==e?void 0:e.class)?void 0:e.defaultRenderer)||null!==t.match(/^\s*classDiagram-v2/)},Ts="classid-";let Es=[],vs={},Ss=[],ws=0,As=[];const Bs=t=>Et.sanitizeText(t,Hi()),Ls=function(t){let e="",i=t;return 0<t.indexOf("~")&&(t=t.split("~"),i=t[0],e=Et.sanitizeText(t[1],Hi())),{className:i,type:e}},Ds=function(t){t=Ls(t);void 0===vs[t.className]&&(vs[t.className]={id:t.className,type:t.type,cssClasses:[],methods:[],members:[],annotations:[],domId:Ts+t.className+"-"+ws},ws++)},Is=function(t){for(const e of Object.keys(vs))if(vs[e].id===t)return vs[e].domId},Os=function(t,e){var t=Ls(t).className,i=vs[t];if("string"==typeof e){const t=e.trim();t.startsWith("<<")&&t.endsWith(">>")?i.annotations.push(Bs(t.substring(2,t.length-2))):0<t.indexOf(")")?i.methods.push(Bs(t)):t&&i.members.push(Bs(t))}},Fs=function(t,i){t.split(",").forEach(function(t){let e=t;t[0].match(/\d/)&&(e=Ts+e),void 0!==vs[e]&&vs[e].cssClasses.push(i)})},Ns=function(t,e,r){var i=Hi();let a=t,s=Is(a);if("loose"===i.securityLevel&&void 0!==e&&void 0!==vs[a]){let i=[];if("string"==typeof r){i=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<i.length;e++){let t=i[e].trim();'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),i[e]=t}}0===i.length&&i.push(s),As.push(function(){var t=document.querySelector(`[id="${s}"]`);null!==t&&t.addEventListener("click",function(){Ri.runFunc(e,...i)},!1)})}},$s=function(t){let i=r(".mermaidTooltip");null===(i._groups||i)[0][0]&&(i=r("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),r(t).select("svg").selectAll("g.node").on("mouseover",function(){var t,e=r(this);null!==e.attr("title")&&(t=this.getBoundingClientRect(),i.transition().duration(200).style("opacity",".9"),i.text(e.attr("title")).style("left",window.scrollX+t.left+(t.right-t.left)/2+"px").style("top",window.scrollY+t.top-14+document.body.scrollTop+"px"),i.html(i.html().replace(/&lt;br\/&gt;/g,"<br/>")),e.classed("hover",!0))}).on("mouseout",function(){i.transition().duration(500).style("opacity",0),r(this).classed("hover",!1)})};As.push($s);let Rs="TB";const Ms={parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},setAccTitle:_r,getAccTitle:Cr,getAccDescription:Er,setAccDescription:Tr,getConfig:()=>Hi().class,addClass:Ds,bindFunctions:function(e){As.forEach(function(t){t(e)})},clear:function(){Es=[],vs={},Ss=[],(As=[]).push($s),kr()},getClass:function(t){return vs[t]},getClasses:function(){return vs},getNotes:function(){return Ss},addAnnotation:function(t,e){t=Ls(t).className;vs[t].annotations.push(e)},addNote:function(t,e){e={id:"note"+Ss.length,class:e,text:t};Ss.push(e)},getRelations:function(){return Es},addRelation:function(t){pt.debug("Adding relation: "+JSON.stringify(t)),Ds(t.id1),Ds(t.id2),t.id1=Ls(t.id1).className,t.id2=Ls(t.id2).className,t.relationTitle1=Et.sanitizeText(t.relationTitle1.trim(),Hi()),t.relationTitle2=Et.sanitizeText(t.relationTitle2.trim(),Hi()),Es.push(t)},getDirection:()=>Rs,setDirection:t=>{Rs=t},addMember:Os,addMembers:function(e,t){Array.isArray(t)&&(t.reverse(),t.forEach(t=>Os(e,t)))},cleanupLabel:function(t){return":"===t.substring(0,1)?Et.sanitizeText(t.substr(1).trim(),Hi()):Bs(t.trim())},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},setClickEvent:function(t,e,i){t.split(",").forEach(function(t){Ns(t,e,i),vs[t].haveCallback=!0}),Fs(t,"clickable")},setCssClass:Fs,setLink:function(t,i,r){const a=Hi();t.split(",").forEach(function(t){let e=t;t[0].match(/\d/)&&(e=Ts+e),void 0!==vs[e]&&(vs[e].link=Ri.formatUrl(i,a),"sandbox"===a.securityLevel?vs[e].linkTarget="_top":vs[e].linkTarget="string"==typeof r?Bs(r):"_blank")}),Fs(t,"clickable")},getTooltip:function(t){return vs[t].tooltip},setTooltip:function(t,e){const i=Hi();t.split(",").forEach(function(t){void 0!==e&&(vs[t].tooltip=Et.sanitizeText(e,i))})},lookUpDomId:Is,setDiagramTitle:vr,getDiagramTitle:Sr};let Ps=0;const zs=function(t){var e=t.match(/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/),i=t.match(/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/);return e&&!i?js(e):i?Ys(i):Ws(t)},js=function(t){let e="",i="";try{var r=t[1]?t[1].trim():"",a=t[2]?t[2].trim():"",s=t[3]?Tt(t[3].trim()):"",n=t[4]?t[4].trim():"",o=t[5]?t[5].trim():"";i=r+a+s+" "+n,e=Us(o)}catch(e){i=t}return{displayText:i,cssStyle:e}},Ys=function(t){let e="",i="";try{var r=t[1]?t[1].trim():"",a=t[2]?t[2].trim():"",s=t[3]?Tt(t[3].trim()):"",n=t[4]?t[4].trim():"";i=r+a+"("+s+")"+(t[5]?" : "+Tt(t[5]).trim():""),e=Us(n)}catch(e){i=t}return{displayText:i,cssStyle:e}},Ws=function(r){let a="",s="",n,o=r.indexOf("("),l=r.indexOf(")");if(1<o&&o<l&&l<=r.length){let t="",e="",i=r.substring(0,1);e=(i.match(/\w/)?r.substring(0,o):(i.match(/[#+~-]/)&&(t=i),r.substring(1,o))).trim();var c=r.substring(o+1,l);r.substring(l+1,1),s=Us(r.substring(l+1,l+2)),a=t+e+"("+Tt(c.trim())+")",l<r.length&&""!==(n=r.substring(l+2).trim())&&(n=" : "+Tt(n),a+=n)}else a=Tt(r);return{displayText:a,cssStyle:s}},qs=function(t,e,i,r){e=zs(e),t=t.append("tspan").attr("x",r.padding).text(e.displayText);""!==e.cssStyle&&t.attr("style",e.cssStyle),i||t.attr("dy",r.textHeight)},Us=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},Vs=function(t,e,i,r){pt.debug("Rendering class ",e,i);var a=e.id,s={id:a,label:e.id,width:0,height:0},t=t.append("g").attr("id",r.db.lookUpDomId(a)).attr("class","classGroup");let n,o=(n=(e.link?t.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget):t).append("text").attr("y",i.textHeight+i.padding).attr("x",0),!0),l=(e.annotations.forEach(function(t){t=n.append("tspan").text("«"+t+"»");o||t.attr("dy",i.textHeight),o=!1}),e.id);void 0!==e.type&&""!==e.type&&(l+="<"+e.type+">");r=n.append("tspan").text(l).attr("class","title");o||r.attr("dy",i.textHeight);const c=n.node().getBBox().height,h=t.append("line").attr("x1",0).attr("y1",i.padding+c+i.dividerMargin/2).attr("y2",i.padding+c+i.dividerMargin/2),d=t.append("text").attr("x",i.padding).attr("y",c+i.dividerMargin+i.textHeight).attr("fill","white").attr("class","classText"),u=(o=!0,e.members.forEach(function(t){qs(d,t,o,i),o=!1}),d.node().getBBox()),p=t.append("line").attr("x1",0).attr("y1",i.padding+c+i.dividerMargin+u.height).attr("y2",i.padding+c+i.dividerMargin+u.height),g=t.append("text").attr("x",i.padding).attr("y",c+2*i.dividerMargin+u.height+i.textHeight).attr("fill","white").attr("class","classText");o=!0,e.methods.forEach(function(t){qs(g,t,o,i),o=!1});a=t.node().getBBox(),r=" ";0<e.cssClasses.length&&(r+=e.cssClasses.join(" "));const y=t.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",a.width+2*i.padding).attr("height",a.height+i.padding+.5*i.dividerMargin).attr("class",r).node().getBBox().width;return n.node().childNodes.forEach(function(t){t.setAttribute("x",(y-t.getBBox().width)/2)}),e.tooltip&&n.insert("title").text(e.tooltip),h.attr("x2",y),p.attr("x2",y),s.width=y,s.height=a.height+i.padding+.5*i.dividerMargin,s},Hs=function(t,e,i,r,a){function s(t){switch(t){case a.db.relationType.AGGREGATION:return"aggregation";case a.db.relationType.EXTENSION:return"extension";case a.db.relationType.COMPOSITION:return"composition";case a.db.relationType.DEPENDENCY:return"dependency";case a.db.relationType.LOLLIPOP:return"lollipop"}}e.points=e.points.filter(t=>!Number.isNaN(t.y));var o=e.points,l=Y().x(function(t){return t.x}).y(function(t){return t.y}).curve(n),l=t.append("path").attr("d",l(o)).attr("id","edge"+Ps).attr("class","relation");let c,h,d="";r.arrowMarkerAbsolute&&(d=(d=(d=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),1==i.relation.lineType&&l.attr("class","relation dashed-line"),10==i.relation.lineType&&l.attr("class","relation dotted-line"),"none"!==i.relation.type1&&l.attr("marker-start","url("+d+"#"+s(i.relation.type1)+"Start)"),"none"!==i.relation.type2&&l.attr("marker-end","url("+d+"#"+s(i.relation.type2)+"End)");o=e.points.length;let u,p,g,y,f=Ri.calcLabelPosition(e.points);if(c=f.x,h=f.y,o%2!=0&&1<o&&(l=Ri.calcCardinalityPosition("none"!==i.relation.type1,e.points,e.points[0]),e=Ri.calcCardinalityPosition("none"!==i.relation.type2,e.points,e.points[o-1]),pt.debug("cardinality_1_point "+JSON.stringify(l)),pt.debug("cardinality_2_point "+JSON.stringify(e)),u=l.x,p=l.y,g=e.x,y=e.y),void 0!==i.title){const e=t.append("g").attr("class","classLabel"),n=e.append("text").attr("class","label").attr("x",c).attr("y",h).attr("fill","red").attr("text-anchor","middle").text(i.title),a=(window.label=n).node().getBBox();e.insert("rect",":first-child").attr("class","box").attr("x",a.x-r.padding/2).attr("y",a.y-r.padding/2).attr("width",a.width+r.padding).attr("height",a.height+r.padding)}pt.info("Rendering relation "+JSON.stringify(i)),void 0!==i.relationTitle1&&"none"!==i.relationTitle1&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",u).attr("y",p).attr("fill","black").attr("font-size","6").text(i.relationTitle1),void 0!==i.relationTitle2&&"none"!==i.relationTitle2&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",g).attr("y",y).attr("fill","black").attr("font-size","6").text(i.relationTitle2),Ps++},Gs=function(t,e,i,r){pt.debug("Rendering note ",e,i);var a=e.id,s={id:a,text:e.text,width:0,height:0},t=t.append("g").attr("id",a).attr("class","classGroup");let n=t.append("text").attr("y",i.textHeight+i.padding).attr("x",0);a=JSON.parse(`"${e.text}"`).split("\n");a.forEach(function(t){pt.debug("Adding line: "+t),n.append("tspan").text(t).attr("class","title").attr("dy",i.textHeight)});const o=t.node().getBBox(),l=t.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",o.width+2*i.padding).attr("height",o.height+a.length*i.textHeight+i.padding+.5*i.dividerMargin).node().getBBox().width;return n.node().childNodes.forEach(function(t){t.setAttribute("x",(l-t.getBBox().width)/2)}),s.width=l,s.height=o.height+a.length*i.textHeight+i.padding+.5*i.dividerMargin,s};let Xs={};const Ks=function(e){var t=Object.entries(Xs).find(t=>t[1].label===e);if(t)return t[0]},Qs={draw:function(t,e,i,a){const s=Hi().class;Xs={},pt.info("Rendering diagram "+t);var t=Hi().securityLevel;let n;"sandbox"===t&&(n=r("#i"+e));const o=r("sandbox"===t?n.nodes()[0].contentDocument.body:"body"),l=o.select(`[id='${e}']`),c=((t=l).append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z"),new tt.Graph({multigraph:!0})),h=(c.setGraph({isMultiGraph:!0}),c.setDefaultEdgeLabel(function(){return{}}),a.db.getClasses()),d=Object.keys(h);for(const t of d){const e=h[t],i=Vs(l,e,s,a);Xs[i.id]=i,c.setNode(i.id,i),pt.info("Org height: "+i.height)}a.db.getRelations().forEach(function(t){pt.info("tjoho"+Ks(t.id1)+Ks(t.id2)+JSON.stringify(t)),c.setEdge(Ks(t.id1),Ks(t.id2),{relation:t},t.title||"DEFAULT")}),a.db.getNotes().forEach(function(t){pt.debug("Adding note: "+JSON.stringify(t));var e=Gs(l,t,s,a);Xs[e.id]=e,c.setNode(e.id,e),t.class&&t.class in h&&c.setEdge(t.id,Ks(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),J(c),c.nodes().forEach(function(t){void 0!==t&&void 0!==c.node(t)&&(pt.debug("Node "+t+": "+JSON.stringify(c.node(t))),o.select("#"+(a.db.lookUpDomId(t)||t)).attr("transform","translate("+(c.node(t).x-c.node(t).width/2)+","+(c.node(t).y-c.node(t).height/2)+" )"))}),c.edges().forEach(function(t){void 0!==t&&void 0!==c.edge(t)&&(pt.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(c.edge(t))),Hs(l,c.edge(t),c.edge(t).relation,s,a))});var e=l.node().getBBox(),t=e.width+40,u=e.height+40,e=(tr(l,u,t,s.useMaxWidth),`${e.x-20} ${e.y-20} ${t} `+u);pt.debug("viewBox "+e),l.attr("viewBox",e)}},Zs={extension:(t,e,i)=>{pt.trace("Making markers for ",i),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 12 20").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},Js=(e,t,i,r)=>{t.forEach(t=>{Zs[t](e,i,r)})},ta=(t,e,i,a)=>{let s=t||"";var n;if("object"==typeof s&&(s=s[0]),Ct(Hi().flowchart.htmlLabels))return s=s.replace(/\\n|\n/g,"<br />"),pt.info("vertexText"+s),t={isNode:a,label:mu(s).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:e.replace("fill:","color:")},a=r(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),(n=a.append("xhtml:div")).html('<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+t.label+"</span>"),(t=t.labelStyle)&&n.attr("style",t),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),a.node();{const t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));for(const e of"string"==typeof s?s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?s:[]){const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),i?r.setAttribute("class","title-row"):r.setAttribute("class","row"),r.textContent=e.trim(),t.appendChild(r)}return t}},ea=(t,e,i,a)=>{var i=i||"node default",t=t.insert("g").attr("class",i).attr("id",e.domId||e.id),i=t.insert("g").attr("class","label").attr("style",e.labelStyle),s=void 0===e.labelText?"":"string"==typeof e.labelText?e.labelText:e.labelText[0],s=i.node().appendChild(ta(bt(mu(s),Hi()),e.labelStyle,!1,a));let n=s.getBBox();if(Ct(Hi().flowchart.htmlLabels)){const t=s.children[0],e=r(s);n=t.getBoundingClientRect(),e.attr("width",n.width),e.attr("height",n.height)}a=e.padding/2;return i.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),{shapeSvg:t,bbox:n,halfPadding:a,label:i}},ia=(t,e)=>{e=e.node().getBBox();t.width=e.width,t.height=e.height};function ra(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+i/2+")")}let na={},sa={},aa={};const oa=(t,e)=>(pt.trace("In isDecendant",e," ",t," = ",sa[e].includes(t)),!!sa[e].includes(t)),la=(a,s,n,o)=>{pt.warn("Copying children of ",a,"root",o,"data",s.node(a),o);var t=s.children(a)||[];a!==o&&t.push(a),pt.warn("Copying (nodes) clusterId",a,"nodes",t),t.forEach(t=>{var e;0<s.children(t).length?la(t,s,n,o):(e=s.node(t),pt.info("cp ",t," to ",o," with parent ",a),n.setNode(t,e),o!==s.parent(t)&&(pt.warn("Setting parent",t,s.parent(t)),n.setParent(t,s.parent(t))),a!==o&&t!==a?(pt.debug("Setting parent",t,a),n.setParent(t,a)):(pt.info("In copy ",a,"root",o,"data",s.node(a),o),pt.debug("Not Setting parent for node=",t,"cluster!==rootId",a!==o,"node!==clusterId",t!==a)),e=s.edges(t),pt.debug("Copying Edges",e),e.forEach(t=>{pt.info("Edge",t);var e,i,r=s.edge(t.v,t.w,t.name);pt.info("Edge data",r,o);try{e=t,i=o,pt.info("Decendants of ",i," is ",sa[i]),pt.info("Edge is ",e),e.v!==i&&e.w!==i&&(sa[i]?sa[i].includes(e.v)||oa(e.v,i)||oa(e.w,i)||sa[i].includes(e.w):(pt.debug("Tilt, ",i,",not in decendants"),!1))?(pt.info("Copying as ",t.v,t.w,r,t.name),n.setEdge(t.v,t.w,r,t.name),pt.info("newGraph edges ",n.edges(),n.edge(n.edges()[0]))):pt.info("Skipping copy of edge ",t.v,"--\x3e",t.w," rootId: ",o," clusterId:",a)}catch(t){pt.error(t)}})),pt.debug("Removing node",t),s.removeNode(t)})},ca=(t,e)=>{var i=e.children(t);let r=[...i];for(const a of i)aa[a]=t,r=[...r,...ca(a,e)];return r},ha=(t,e)=>{pt.trace("Searching",t);const i=e.children(t);if(pt.trace("Searching children of id ",t,i),i.length<1)return pt.trace("This is a valid node",t),t;for(const r of i){const i=ha(r,e);if(i)return pt.trace("Found replacement for",t," => ",i),i}},da=t=>na[t]&&na[t].externalConnections&&na[t]?na[t].id:t,ua=(i,r)=>{if(pt.warn("extractor - ",r,et.write(i),i.children("D")),10<r)pt.error("Bailing out");else{let t=i.nodes(),e=!1;for(const r of t){const t=i.children(r);e=e||0<t.length}if(e){pt.debug("Nodes = ",t,r);for(const e of t)if(pt.debug("Extracting node",e,na,na[e]&&!na[e].externalConnections,!i.parent(e),i.node(e),i.children("D")," Depth ",r),na[e])if(!na[e].externalConnections&&i.children(e)&&0<i.children(e).length){pt.warn("Cluster without external connections, without a parent and with children",e,r);let t="TB"===i.graph().rankdir?"LR":"TB";na[e]&&na[e].clusterData&&na[e].clusterData.dir&&(t=na[e].clusterData.dir,pt.warn("Fixing dir",na[e].clusterData.dir,t));var a=new tt.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:t,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});pt.warn("Old graph before copy",et.write(i)),la(e,i,a,e),i.setNode(e,{clusterNode:!0,id:e,clusterData:na[e].clusterData,labelText:na[e].labelText,graph:a}),pt.warn("New graph after copy node: (",e,")",et.write(a)),pt.debug("Old graph after copy",et.write(i))}else pt.warn("Cluster ** ",e," **not meeting the criteria !externalConnections:",!na[e].externalConnections," no parent: ",!i.parent(e)," children ",i.children(e)&&0<i.children(e).length,i.children("D"),r),pt.debug(na);else pt.debug("Not a cluster",e,r);t=i.nodes(),pt.warn("New list of nodes",t);for(const e of t){const t=i.node(e);pt.warn(" Now next level",e,t),t.clusterNode&&ua(t.graph,r+1)}}else pt.debug("Done, no node has children",i.nodes())}},pa=(e,t)=>{if(0===t.length)return[];let i=Object.assign(t);return t.forEach(t=>{t=e.children(t),t=pa(e,t);i=[...i,...t]}),i};function ga(t,e,i,r){var a=t.x,t=t.y,s=a-r.x,n=t-r.y,o=Math.sqrt(e*e*n*n+i*i*s*s),s=Math.abs(e*i*s/o),e=(r.x<a&&(s=-s),Math.abs(e*i*n/o));return{x:a+s,y:t+(e=r.y<t?-e:e)}}function ya(t,e,i,r){var a,s,n,o,l=e.y-t.y,c=t.x-e.x,h=e.x*t.y-t.x*e.y,d=l*i.x+c*i.y+h,u=l*r.x+c*r.y+h;if(!(0!=d&&0!=u&&fa(d,u)||(a=r.y-i.y,s=i.x-r.x,n=r.x*i.y-i.x*r.y,d=a*t.x+s*t.y+n,u=a*e.x+s*e.y+n,0!==d&&0!==u&&fa(d,u))||0==(o=l*s-a*c)))return i=Math.abs(o/2),{x:(r=c*n-s*h)<0?(r-i)/o:(r+i)/o,y:(r=a*h-l*n)<0?(r-i)/o:(r+i)/o}}function fa(t,e){return 0<t*e}const ma=(t,e)=>{var i,r=t.x,a=t.y,s=e.x-r,e=e.y-a,n=t.width/2,t=t.height/2,t=Math.abs(e)*n>Math.abs(s)*t?(e<0&&(t=-t),i=0==e?0:t*s/e,t):(i=n=s<0?-n:n,0==s?0:n*e/s);return{x:r+i,y:a+t}},ba={node:function(t,e){return t.intersect(e)},circle:function(t,e,i){return ga(t,e,e,i)},ellipse:ga,polygon:function(t,e,r){var i=t.x,a=t.y,s=[],n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach(function(t){n=Math.min(n,t.x),o=Math.min(o,t.y)}):(n=Math.min(n,e.x),o=Math.min(o,e.y));for(var l=i-t.width/2-n,c=a-t.height/2-o,h=0;h<e.length;h++){var d=e[h],u=e[h<e.length-1?h+1:0],d=ya(t,r,{x:l+d.x,y:c+d.y},{x:l+u.x,y:c+u.y});d&&s.push(d)}return s.length?(1<s.length&&s.sort(function(t,e){var i=t.x-r.x,t=t.y-r.y,i=Math.sqrt(i*i+t*t),t=e.x-r.x,e=e.y-r.y,t=Math.sqrt(t*t+e*e);return i<t?-1:i===t?0:1}),s[0]):t},rect:ma},xa=(t,e)=>{const{shapeSvg:i,bbox:r}=ea(t,e,void 0,!0),a=r.width+e.padding+(r.height+e.padding),s=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];pt.info("Question main (Circle)");t=ra(i,a,a,s);return t.attr("style",e.style),ia(e,t),e.intersect=function(t){return pt.warn("Intersect called"),ba.polygon(e,s,t)},i};function ka(t,e,i,r){const a=[],s=t=>{a.push(t,0)},n=t=>{a.push(0,t)};(e.includes("t")?(pt.debug("add top border"),s):n)(i),(e.includes("r")?(pt.debug("add right border"),s):n)(r),(e.includes("b")?(pt.debug("add bottom border"),s):n)(i),(e.includes("l")?(pt.debug("add left border"),s):n)(r),t.attr("stroke-dasharray",a.join(" "))}const _a=(t,e,i)=>{t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let r=70,a=10;"LR"===i&&(r=10,a=70);i=t.append("rect").attr("x",-1*r/2).attr("y",-1*a/2).attr("width",r).attr("height",a).attr("class","fork-join");return ia(e,i),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return ba.rect(e,t)},t},Ca={rhombus:xa,question:xa,rect:(t,e)=>{var{shapeSvg:t,bbox:i,halfPadding:r}=ea(t,e,"node "+e.classes,!0),a=(pt.trace("Classes = ",e.classes),t.insert("rect",":first-child")),s=i.width+e.padding,n=i.height+e.padding;if(a.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-i.width/2-r).attr("y",-i.height/2-r).attr("width",s).attr("height",n),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(ka(a,e.props.borders,s,n),t.delete("borders")),t.forEach(t=>{pt.warn("Unknown node property "+t)})}return ia(e,a),e.intersect=function(t){return ba.rect(e,t)},t},labelRect:(t,e)=>{var t=ea(t,e,"label",!0)["shapeSvg"],i=(pt.trace("Classes = ",e.classes),t.insert("rect",":first-child"));if(i.attr("width",0).attr("height",0),t.attr("class","label edgeLabel"),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(ka(i,e.props.borders,0,0),t.delete("borders")),t.forEach(t=>{pt.warn("Unknown node property "+t)})}return ia(e,i),e.intersect=function(t){return ba.rect(e,t)},t},rectWithTitle:(t,e)=>{var i=e.classes?"node "+e.classes:"node default",t=t.insert("g").attr("class",i).attr("id",e.domId||e.id),i=t.insert("rect",":first-child"),a=t.insert("line"),s=t.insert("g").attr("class","label"),n=e.labelText.flat?e.labelText.flat():e.labelText,o="object"==typeof n?n[0]:n,o=(pt.info("Label text abc79",o,n,"object"==typeof n),s.node().appendChild(ta(o,e.labelStyle,!0,!0)));let l={width:0,height:0};if(Ct(Hi().flowchart.htmlLabels)){const t=o.children[0],e=r(o);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}pt.info("Text 2",n);var n=n.slice(1,n.length),c=o.getBBox(),n=s.node().appendChild(ta(n.join?n.join("<br/>"):n,e.labelStyle,!0,!0));if(Ct(Hi().flowchart.htmlLabels)){const t=n.children[0],e=r(n);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}var h=e.padding/2;return r(n).attr("transform","translate( "+(l.width>c.width?0:(c.width-l.width)/2)+", "+(c.height+h+5)+")"),r(o).attr("transform","translate( "+(l.width<c.width?0:-(c.width-l.width)/2)+", 0)"),l=s.node().getBBox(),s.attr("transform","translate("+-l.width/2+", "+(-l.height/2-h+3)+")"),i.attr("class","outer title-state").attr("x",-l.width/2-h).attr("y",-l.height/2-h).attr("width",l.width+e.padding).attr("height",l.height+e.padding),a.attr("class","divider").attr("x1",-l.width/2-h).attr("x2",l.width/2+h).attr("y1",-l.height/2-h+c.height+h).attr("y2",-l.height/2-h+c.height+h),ia(e,i),e.intersect=function(t){return ba.rect(e,t)},t},choice:(t,e)=>{t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);return t.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(t){return t.x+","+t.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return ba.circle(e,14,t)},t},circle:(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:a}=ea(t,e,void 0,!0),s=i.insert("circle",":first-child");return s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+a).attr("width",r.width+e.padding).attr("height",r.height+e.padding),pt.info("Circle main"),ia(e,s),e.intersect=function(t){return pt.info("Circle intersect",e,r.width/2+a,t),ba.circle(e,r.width/2+a,t)},i},doublecircle:(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:a}=ea(t,e,void 0,!0),s=i.insert("g",":first-child"),n=s.insert("circle"),o=s.insert("circle");return n.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+a+5).attr("width",r.width+e.padding+10).attr("height",r.height+e.padding+10),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+a).attr("width",r.width+e.padding).attr("height",r.height+e.padding),pt.info("DoubleCircle main"),ia(e,n),e.intersect=function(t){return pt.info("DoubleCircle intersect",e,r.width/2+a+5,t),ba.circle(e,r.width/2+a+5,t)},i},stadium:(t,e)=>{var{shapeSvg:t,bbox:i}=ea(t,e,void 0,!0),r=i.height+e.padding,i=i.width+r/4+e.padding,i=t.insert("rect",":first-child").attr("style",e.style).attr("rx",r/2).attr("ry",r/2).attr("x",-i/2).attr("y",-r/2).attr("width",i).attr("height",r);return ia(e,i),e.intersect=function(t){return ba.rect(e,t)},t},hexagon:(t,e)=>{const{shapeSvg:i,bbox:r}=ea(t,e,void 0,!0),a=r.height+e.padding,s=a/4,n=r.width+2*s+e.padding,o=[{x:s,y:0},{x:n-s,y:0},{x:n,y:-a/2},{x:n-s,y:-a},{x:s,y:-a},{x:0,y:-a/2}],l=ra(i,n,a,o);return l.attr("style",e.style),ia(e,l),e.intersect=function(t){return ba.polygon(e,o,t)},i},rect_left_inv_arrow:(t,e)=>{const{shapeSvg:i,bbox:r}=ea(t,e,void 0,!0),a=r.width+e.padding,s=r.height+e.padding,n=[{x:-s/2,y:0},{x:a,y:0},{x:a,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}];return ra(i,a,s,n).attr("style",e.style),e.width=a+s,e.height=s,e.intersect=function(t){return ba.polygon(e,n,t)},i},lean_right:(t,e)=>{const{shapeSvg:i,bbox:r}=ea(t,e,void 0,!0),a=r.width+e.padding,s=r.height+e.padding,n=[{x:-2*s/6,y:0},{x:a-s/6,y:0},{x:a+2*s/6,y:-s},{x:s/6,y:-s}],o=ra(i,a,s,n);return o.attr("style",e.style),ia(e,o),e.intersect=function(t){return ba.polygon(e,n,t)},i},lean_left:(t,e)=>{const{shapeSvg:i,bbox:r}=ea(t,e,void 0,!0),a=r.width+e.padding,s=r.height+e.padding,n=[{x:2*s/6,y:0},{x:a+s/6,y:0},{x:a-2*s/6,y:-s},{x:-s/6,y:-s}],o=ra(i,a,s,n);return o.attr("style",e.style),ia(e,o),e.intersect=function(t){return ba.polygon(e,n,t)},i},trapezoid:(t,e)=>{const{shapeSvg:i,bbox:r}=ea(t,e,void 0,!0),a=r.width+e.padding,s=r.height+e.padding,n=[{x:-2*s/6,y:0},{x:a+2*s/6,y:0},{x:a-s/6,y:-s},{x:s/6,y:-s}],o=ra(i,a,s,n);return o.attr("style",e.style),ia(e,o),e.intersect=function(t){return ba.polygon(e,n,t)},i},inv_trapezoid:(t,e)=>{const{shapeSvg:i,bbox:r}=ea(t,e,void 0,!0),a=r.width+e.padding,s=r.height+e.padding,n=[{x:s/6,y:0},{x:a-s/6,y:0},{x:a+2*s/6,y:-s},{x:-2*s/6,y:-s}],o=ra(i,a,s,n);return o.attr("style",e.style),ia(e,o),e.intersect=function(t){return ba.polygon(e,n,t)},i},rect_right_inv_arrow:(t,e)=>{const{shapeSvg:i,bbox:r}=ea(t,e,void 0,!0),a=r.width+e.padding,s=r.height+e.padding,n=[{x:0,y:0},{x:a+s/2,y:0},{x:a,y:-s/2},{x:a+s/2,y:-s},{x:0,y:-s}],o=ra(i,a,s,n);return o.attr("style",e.style),ia(e,o),e.intersect=function(t){return ba.polygon(e,n,t)},i},cylinder:(t,a)=>{const{shapeSvg:e,bbox:i}=ea(t,a,void 0,!0),r=i.width+a.padding,s=r/2,n=s/(2.5+r/50),o=i.height+n+a.padding,l="M 0,"+n+" a "+s+","+n+" 0,0,0 "+r+" 0 a "+s+","+n+" 0,0,0 "+-r+" 0 l 0,"+o+" a "+s+","+n+" 0,0,0 "+r+" 0 l 0,"+-o,c=e.attr("label-offset-y",n).insert("path",":first-child").attr("style",a.style).attr("d",l).attr("transform","translate("+-r/2+","+-(o/2+n)+")");return ia(a,c),a.intersect=function(e){var i=ba.rect(a,e),r=i.x-a.x;if(0!=s&&(Math.abs(r)<a.width/2||Math.abs(r)==a.width/2&&Math.abs(i.y-a.y)>a.height/2-n)){let t=n*n*(1-r*r/(s*s));0!=t&&(t=Math.sqrt(t)),t=n-t,0<e.y-a.y&&(t=-t),i.y+=t}return i},e},start:(t,e)=>{var t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),i=t.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),ia(e,i),e.intersect=function(t){return ba.circle(e,7,t)},t},end:(t,e)=>{var t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),i=t.insert("circle",":first-child"),r=t.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),i.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),ia(e,r),e.intersect=function(t){return ba.circle(e,7,t)},t},note:(t,e)=>{var{shapeSvg:t,bbox:i,halfPadding:r}=ea(t,e,"node "+e.classes,!0),a=(pt.info("Classes = ",e.classes),t.insert("rect",":first-child"));return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-i.width/2-r).attr("y",-i.height/2-r).attr("width",i.width+e.padding).attr("height",i.height+e.padding),ia(e,a),e.intersect=function(t){return ba.rect(e,t)},t},subroutine:(t,e)=>{const{shapeSvg:i,bbox:r}=ea(t,e,void 0,!0),a=r.width+e.padding,s=r.height+e.padding,n=[{x:0,y:0},{x:a,y:0},{x:a,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],o=ra(i,a,s,n);return o.attr("style",e.style),ia(e,o),e.intersect=function(t){return ba.polygon(e,n,t)},i},fork:_a,join:_a,class_box:(t,s)=>{var e=s.padding/2,i=s.classes?"node "+s.classes:"node default",t=t.insert("g").attr("class",i).attr("id",s.domId||s.id),i=t.insert("rect",":first-child"),a=t.insert("line"),n=t.insert("line");let o=0,l=4;const c=t.insert("g").attr("class","label");let h=0;var d=s.classData.annotations&&s.classData.annotations[0],u=s.classData.annotations[0]?"«"+s.classData.annotations[0]+"»":"",u=c.node().appendChild(ta(u,s.labelStyle,!0,!0));let p=u.getBBox();if(Ct(Hi().flowchart.htmlLabels)){const t=u.children[0],s=r(u);p=t.getBoundingClientRect(),s.attr("width",p.width),s.attr("height",p.height)}s.classData.annotations[0]&&(l+=p.height+4,o+=p.width);let g=s.classData.id;void 0!==s.classData.type&&""!==s.classData.type&&(Hi().flowchart.htmlLabels?g+="&lt;"+s.classData.type+"&gt;":g+="<"+s.classData.type+">");var y=c.node().appendChild(ta(g,s.labelStyle,!0,!0));r(y).attr("class","classTitle");let f=y.getBBox();if(Ct(Hi().flowchart.htmlLabels)){const t=y.children[0],s=r(y);f=t.getBoundingClientRect(),s.attr("width",f.width),s.attr("height",f.height)}l+=f.height+4,f.width>o&&(o=f.width);const m=[],b=(s.classData.members.forEach(t=>{t=zs(t);let e=t.displayText;Hi().flowchart.htmlLabels&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var i=c.node().appendChild(ta(e,t.cssStyle||s.labelStyle,!0,!0));let a=i.getBBox();if(Ct(Hi().flowchart.htmlLabels)){const t=i.children[0],s=r(i);a=t.getBoundingClientRect(),s.attr("width",a.width),s.attr("height",a.height)}a.width>o&&(o=a.width),l+=a.height+4,m.push(i)}),l+=8,[]);s.classData.methods.forEach(t=>{t=zs(t);let e=t.displayText;Hi().flowchart.htmlLabels&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var i=c.node().appendChild(ta(e,t.cssStyle||s.labelStyle,!0,!0));let a=i.getBBox();if(Ct(Hi().flowchart.htmlLabels)){const t=i.children[0],s=r(i);a=t.getBoundingClientRect(),s.attr("width",a.width),s.attr("height",a.height)}a.width>o&&(o=a.width),l+=a.height+4,b.push(i)}),l+=8,d&&(d=(o-p.width)/2,r(u).attr("transform","translate( "+(-1*o/2+d)+", "+-1*l/2+")"),h=p.height+4);u=(o-f.width)/2;return r(y).attr("transform","translate( "+(-1*o/2+u)+", "+(-1*l/2+h)+")"),h+=f.height+4,a.attr("class","divider").attr("x1",-o/2-e).attr("x2",o/2+e).attr("y1",-l/2-e+8+h).attr("y2",-l/2-e+8+h),h+=8,m.forEach(t=>{r(t).attr("transform","translate( "+-o/2+", "+(-1*l/2+h+4)+")"),h+=f.height+4}),h+=8,n.attr("class","divider").attr("x1",-o/2-e).attr("x2",o/2+e).attr("y1",-l/2-e+8+h).attr("y2",-l/2-e+8+h),h+=8,b.forEach(t=>{r(t).attr("transform","translate( "+-o/2+", "+(-1*l/2+h)+")"),h+=f.height+4}),i.attr("class","outer title-state").attr("x",-o/2-e).attr("y",-l/2-e).attr("width",o+s.padding).attr("height",l+s.padding),ia(s,i),s.intersect=function(t){return ba.rect(s,t)},t}};let Ta={};const Ea=t=>{var e=Ta[t.id],i=(pt.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")"),t.diff||0);return t.clusterNode?e.attr("transform","translate("+(t.x+i-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),i},va={rect:(t,e)=>{pt.trace("Creating subgraph rect for ",e.id,e);var t=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),i=t.insert("rect",":first-child"),a=t.insert("g").attr("class","cluster-label"),s=a.node().appendChild(ta(e.labelText,e.labelStyle,void 0,!0));let n=s.getBBox();if(Ct(Hi().flowchart.htmlLabels)){const t=s.children[0],e=r(s);n=t.getBoundingClientRect(),e.attr("width",n.width),e.attr("height",n.height)}var s=0*e.padding,o=s/2,l=e.width<=n.width+s?n.width+s:e.width,o=(e.width<=n.width+s?e.diff=(n.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,pt.trace("Data ",e,JSON.stringify(e)),i.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-l/2).attr("y",e.y-e.height/2-o).attr("width",l).attr("height",e.height+s),a.attr("transform","translate("+(e.x-n.width/2)+", "+(e.y-e.height/2)+")"),i.node().getBBox());return e.width=o.width,e.height=o.height,e.intersect=function(t){return ma(e,t)},t},roundedWithTitle:(t,e)=>{var t=t.insert("g").attr("class",e.classes).attr("id",e.id),i=t.insert("rect",":first-child"),a=t.insert("g").attr("class","cluster-label"),s=t.append("rect"),n=a.node().appendChild(ta(e.labelText,e.labelStyle,void 0,!0));let o=n.getBBox();if(Ct(Hi().flowchart.htmlLabels)){const t=n.children[0],e=r(n);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}o=n.getBBox();var n=0*e.padding,l=n/2,c=e.width<=o.width+e.padding?o.width+e.padding:e.width,s=(e.width<=o.width+e.padding?e.diff=(o.width+0*e.padding-e.width)/2:e.diff=-e.padding/2,i.attr("class","outer").attr("x",e.x-c/2-l).attr("y",e.y-e.height/2-l).attr("width",c+n).attr("height",e.height+n),s.attr("class","inner").attr("x",e.x-c/2-l).attr("y",e.y-e.height/2-l+o.height-1).attr("width",c+n).attr("height",e.height+n-o.height-3),a.attr("transform","translate("+(e.x-o.width/2)+", "+(e.y-e.height/2-e.padding/3+(Ct(Hi().flowchart.htmlLabels)?5:3))+")"),i.node().getBBox());return e.height=s.height,e.intersect=function(t){return ma(e,t)},t},noteGroup:(t,e)=>{var t=t.insert("g").attr("class","note-cluster").attr("id",e.id),i=t.insert("rect",":first-child"),r=0*e.padding,a=r/2,a=(i.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2-a).attr("width",e.width+r).attr("height",e.height+r).attr("fill","none"),i.node().getBBox());return e.width=a.width,e.height=a.height,e.intersect=function(t){return ma(e,t)},t},divider:(t,e)=>{var t=t.insert("g").attr("class",e.classes).attr("id",e.id),i=t.insert("rect",":first-child"),r=0*e.padding,a=r/2,a=(i.attr("class","divider").attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2).attr("width",e.width+r).attr("height",e.height+r),i.node().getBBox());return e.width=a.width,e.height=a.height,e.diff=-e.padding/2,e.intersect=function(t){return ma(e,t)},t}};let Sa={},wa={},Aa={};function Ba(t,e){Hi().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}const La=(t,n)=>{pt.warn("abc88 cutPathAtIntersect",t,n);let o=[],l=t[0],c=!1;return t.forEach(t=>{if(pt.info("abc88 checking point",t,n),i=t,r=(e=n).x,a=e.y,r=Math.abs(i.x-r),i=Math.abs(i.y-a),a=e.width/2,e=e.height/2,a<=r||e<=i||c)pt.warn("abc88 outside",t,l),l=t,c||o.push(t);else{const s=((t,r,a)=>{pt.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(r)}
  insidePoint : ${JSON.stringify(a)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:`+t.height);const s=t.x,e=t.y,i=Math.abs(s-a.x),n=t.width/2;let o=a.x<r.x?n-i:n+i;var t=t.height/2,l=Math.abs(r.y-a.y),c=Math.abs(r.x-a.x);if(Math.abs(e-r.y)*n>Math.abs(s-r.x)*t){t=a.y<r.y?r.y-t-e:e-t-r.y;o=c*t/l;const s={x:a.x<r.x?a.x+o:a.x-c+o,y:a.y<r.y?a.y+l-t:a.y-l+t};return 0===o&&(s.x=r.x,s.y=r.y),0===c&&(s.x=r.x),0===l&&(s.y=r.y),pt.warn(`abc89 topp/bott calc, Q ${l}, q ${t}, R ${c}, r `+o,s),s}{let t=l*(o=a.x<r.x?r.x-n-s:s-n-r.x)/c,e=a.x<r.x?a.x+c-o:a.x-c+o,i=a.y<r.y?a.y+t:a.y-t;return pt.warn(`sides calc abc89, Q ${l}, q ${t}, R ${c}, r `+o,{_x:e,_y:i}),0===o&&(e=r.x,i=r.y),0===c&&(e=r.x),0===l&&(i=r.y),{x:e,y:i}}})(n,l,t);pt.warn("abc88 inside",t,l,s),pt.warn("abc88 intersection",s);let e=!1;o.forEach(t=>{e=e||t.x===s.x&&t.y===s.y}),o.some(t=>t.x===s.x&&t.y===s.y)?pt.warn("abc88 no intersect",s,o):o.push(s),c=!0}var e,i,r,a}),pt.warn("abc88 returning points",o),o},Da=(t,c,l,i)=>{pt.info("Graph in recursive render: XXX",et.write(c),i);const o=c.graph().rankdir;pt.trace("Dir in recursive render - dir:",o);var e,t=t.insert("g").attr("class","root");c.nodes()?pt.info("Recursive render XXX",c.nodes()):pt.info("No nodes found for",c),0<c.edges().length&&pt.trace("Recursive edges",c.edge(c.edges()[0]));const a=t.insert("g").attr("class","clusters"),h=t.insert("g").attr("class","edgePaths"),d=t.insert("g").attr("class","edgeLabels"),u=t.insert("g").attr("class","nodes");c.nodes().forEach(function(t){var r=c.node(t);if(void 0!==i){const l=JSON.parse(JSON.stringify(i.clusterData));pt.info("Setting data for cluster XXX (",t,") ",l,i),c.setNode(i.id,l),c.parent(t)||(pt.trace("Setting parent",t,i.id),c.setParent(t,i.id,l))}if(pt.info("(Insert) Node XXX"+t+": "+JSON.stringify(c.node(t))),r&&r.clusterNode){pt.info("Cluster identified",t,r.width,c.node(t));const e=Da(u,r.graph,l,c.node(t)),i=e.elem;ia(r,i),r.diff=e.diff||0,pt.info("Node bounds (abc123)",t,r,r.width,r.x,r.y),s=i,a=r,Ta[a.id]=s,pt.warn("Recursive render complete ",i,r)}else if(0<c.children(t).length)pt.info("Cluster - the non recursive path XXX",t,r.id,r,c),pt.info(ha(r.id,c)),na[r.id]={id:ha(r.id,c),node:r};else{pt.info("Node - the non recursive path",t,r.id,r);{var a=u;var s=c.node(t);r=o;let e,i;if(s.link){let t;"sandbox"===Hi().securityLevel?t="_top":s.linkTarget&&(t=s.linkTarget||"_blank"),e=a.insert("svg:a").attr("xlink:href",s.link).attr("target",t),i=Ca[s.shape](e,s,r)}else i=Ca[s.shape](a,s,r),e=i;s.tooltip&&i.attr("title",s.tooltip),s.class&&i.attr("class","node default "+s.class),Ta[s.id]=e,s.haveCallback&&Ta[s.id].attr("class",Ta[s.id].attr("class")+" clickable")}}}),c.edges().forEach(function(t){var i=c.edge(t.v,t.w,t.name);pt.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),pt.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(c.edge(t))),pt.info("Fix",na,"ids:",t.v,t.w,"Translateing: ",na[t.v],na[t.w]);{var a=d,s=i;const n=ta(s.label,s.labelStyle),o=a.insert("g").attr("class","edgeLabel"),l=o.insert("g").attr("class","label");l.node().appendChild(n);let t,e=n.getBBox();if(Ct(Hi().flowchart.htmlLabels)){const a=n.children[0],s=r(n);e=a.getBoundingClientRect(),s.attr("width",e.width),s.attr("height",e.height)}if(l.attr("transform","translate("+-e.width/2+", "+-e.height/2+")"),wa[s.id]=o,s.width=e.width,s.height=e.height,s.startLabelLeft){const n=ta(s.startLabelLeft,s.labelStyle),r=a.insert("g").attr("class","edgeTerminals"),o=r.insert("g").attr("class","inner"),l=(t=o.node().appendChild(n),n.getBBox());o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),Aa[s.id]||(Aa[s.id]={}),Aa[s.id].startLeft=r,Ba(t,s.startLabelLeft)}if(s.startLabelRight){const n=ta(s.startLabelRight,s.labelStyle),r=a.insert("g").attr("class","edgeTerminals"),o=r.insert("g").attr("class","inner"),l=(t=r.node().appendChild(n),o.node().appendChild(n),n.getBBox());o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),Aa[s.id]||(Aa[s.id]={}),Aa[s.id].startRight=r,Ba(t,s.startLabelRight)}if(s.endLabelLeft){const n=ta(s.endLabelLeft,s.labelStyle),r=a.insert("g").attr("class","edgeTerminals"),o=r.insert("g").attr("class","inner"),l=(t=o.node().appendChild(n),n.getBBox());o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),r.node().appendChild(n),Aa[s.id]||(Aa[s.id]={}),Aa[s.id].endLeft=r,Ba(t,s.endLabelLeft)}if(s.endLabelRight){const n=ta(s.endLabelRight,s.labelStyle),r=a.insert("g").attr("class","edgeTerminals"),o=r.insert("g").attr("class","inner"),l=(t=o.node().appendChild(n),n.getBBox());o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),r.node().appendChild(n),Aa[s.id]||(Aa[s.id]={}),Aa[s.id].endRight=r,Ba(t,s.endLabelRight)}}}),c.edges().forEach(function(t){pt.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))}),pt.info("#############################################"),pt.info("###                Layout                 ###"),pt.info("#############################################"),pt.info(c),J(c),pt.info("Graph after layout:",et.write(c));let s=0;return e=c,pa(e,e.children()).forEach(function(t){var e,i,r=c.node(t);pt.info("Position "+t+": "+JSON.stringify(c.node(t))),pt.info("Position "+t+": ("+r.x,","+r.y,") width: ",r.width," height: ",r.height),(!r||!r.clusterNode)&&0<c.children(t).length?(t=a,e=r,pt.trace("Inserting cluster"),i=e.shape||"rect",Sa[e.id]=va[i](t,e),na[r.id].node=r):Ea(r)}),c.edges().forEach(function(i){var r=c.edge(i),i=(pt.info("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(r),r),function(t,e,i,r,a,s){let o=i.points,l=!1;var c=s.node(e.v),s=s.node(e.w),e=(pt.info("abc88 InsertEdge: ",i),s.intersect&&c.intersect&&((o=o.slice(1,i.points.length-1)).unshift(c.intersect(o[0])),pt.info("Last point",o[o.length-1],s,s.intersect(o[o.length-1])),o.push(s.intersect(o[o.length-1]))),i.toCluster&&(pt.info("to cluster abc88",r[i.toCluster]),o=La(i.points,r[i.toCluster].node),l=!0),i.fromCluster&&(pt.info("from cluster abc88",r[i.fromCluster]),o=La(o.reverse(),r[i.fromCluster].node).reverse(),l=!0),o.filter(t=>!Number.isNaN(t.y))),c=("graph"===a||"flowchart"===a)&&i.curve||n,s=Y().x(function(t){return t.x}).y(function(t){return t.y}).curve(c);let h;switch(i.thickness){case"normal":h="edge-thickness-normal";break;case"thick":h="edge-thickness-thick";break;default:h=""}switch(i.pattern){case"solid":h+=" edge-pattern-solid";break;case"dotted":h+=" edge-pattern-dotted";break;case"dashed":h+=" edge-pattern-dashed"}var d=t.append("path").attr("d",s(e)).attr("id",i.id).attr("class"," "+h+(i.classes?" "+i.classes:"")).attr("style",i.style);let u="";switch((Hi().flowchart.arrowMarkerAbsolute||Hi().state.arrowMarkerAbsolute)&&(u=(u=(u=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),pt.info("arrowTypeStart",i.arrowTypeStart),pt.info("arrowTypeEnd",i.arrowTypeEnd),i.arrowTypeStart){case"arrow_cross":d.attr("marker-start","url("+u+"#"+a+"-crossStart)");break;case"arrow_point":d.attr("marker-start","url("+u+"#"+a+"-pointStart)");break;case"arrow_barb":d.attr("marker-start","url("+u+"#"+a+"-barbStart)");break;case"arrow_circle":d.attr("marker-start","url("+u+"#"+a+"-circleStart)");break;case"aggregation":d.attr("marker-start","url("+u+"#"+a+"-aggregationStart)");break;case"extension":d.attr("marker-start","url("+u+"#"+a+"-extensionStart)");break;case"composition":d.attr("marker-start","url("+u+"#"+a+"-compositionStart)");break;case"dependency":d.attr("marker-start","url("+u+"#"+a+"-dependencyStart)");break;case"lollipop":d.attr("marker-start","url("+u+"#"+a+"-lollipopStart)")}switch(i.arrowTypeEnd){case"arrow_cross":d.attr("marker-end","url("+u+"#"+a+"-crossEnd)");break;case"arrow_point":d.attr("marker-end","url("+u+"#"+a+"-pointEnd)");break;case"arrow_barb":d.attr("marker-end","url("+u+"#"+a+"-barbEnd)");break;case"arrow_circle":d.attr("marker-end","url("+u+"#"+a+"-circleEnd)");break;case"aggregation":d.attr("marker-end","url("+u+"#"+a+"-aggregationEnd)");break;case"extension":d.attr("marker-end","url("+u+"#"+a+"-extensionEnd)");break;case"composition":d.attr("marker-end","url("+u+"#"+a+"-compositionEnd)");break;case"dependency":d.attr("marker-end","url("+u+"#"+a+"-dependencyEnd)");break;case"lollipop":d.attr("marker-end","url("+u+"#"+a+"-lollipopEnd)")}r={};return l&&(r.updatedPath=o),r.originalPath=i.points,r}(h,i,r,na,l,c)),a=i,i=(pt.info("Moving label abc78 ",r.id,r.label,wa[r.id]),a.updatedPath||a.originalPath);if(r.label){var s,o=wa[r.id];let t=r.x,e=r.y;i&&(s=Ri.calcLabelPosition(i),pt.info("Moving label "+r.label+" from (",t,",",e,") to (",s.x,",",s.y,") abc78"),a.updatedPath)&&(t=s.x,e=s.y),o.attr("transform","translate("+t+", "+e+")")}if(r.startLabelLeft){const a=Aa[r.id].startLeft;let t=r.x,e=r.y;if(i){const a=Ri.calcTerminalLabelPosition(r.arrowTypeStart?10:0,"start_left",i);t=a.x,e=a.y}a.attr("transform","translate("+t+", "+e+")")}if(r.startLabelRight){const a=Aa[r.id].startRight;let t=r.x,e=r.y;if(i){const a=Ri.calcTerminalLabelPosition(r.arrowTypeStart?10:0,"start_right",i);t=a.x,e=a.y}a.attr("transform","translate("+t+", "+e+")")}if(r.endLabelLeft){const a=Aa[r.id].endLeft;let t=r.x,e=r.y;if(i){const a=Ri.calcTerminalLabelPosition(r.arrowTypeEnd?10:0,"end_left",i);t=a.x,e=a.y}a.attr("transform","translate("+t+", "+e+")")}if(r.endLabelRight){const a=Aa[r.id].endRight;let t=r.x,e=r.y;if(i){const a=Ri.calcTerminalLabelPosition(r.arrowTypeEnd?10:0,"end_right",i);t=a.x,e=a.y}a.attr("transform","translate("+t+", "+e+")")}}),c.nodes().forEach(function(t){var e=c.node(t);pt.info(t,e.type,e.diff),"group"===e.type&&(s=e.diff)}),{elem:t,diff:s}},Ia=(t,e,i,r,a)=>{var o;Js(t,i,r,a),Ta={},wa={},Aa={},Sa={},sa={},aa={},na={},pt.warn("Graph at first:",et.write(e)),(o=e)?(pt.debug("Opting in, graph "),o.nodes().forEach(function(t){0<o.children(t).length&&(pt.warn("Cluster identified",t," Replacement id in edges: ",ha(t,o)),sa[t]=ca(t,o),na[t]={id:ha(t,o),clusterData:o.node(t)})}),o.nodes().forEach(function(e){var t=o.children(e),i=o.edges();0<t.length?(pt.debug("Cluster identified",e,sa),i.forEach(t=>{t.v!==e&&t.w!==e&&oa(t.v,e)^oa(t.w,e)&&(pt.warn("Edge: ",t," leaves cluster ",e),pt.warn("Decendants of XXX ",e,": ",sa[e]),na[e].externalConnections=!0)})):pt.debug("Not a cluster ",e,sa)}),o.edges().forEach(function(t){var e,i,r,a=o.edge(t);pt.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),pt.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(o.edge(t)));let s=t.v,n=t.w;pt.warn("Fix XXX",na,"ids:",t.v,t.w,"Translating: ",na[t.v]," --- ",na[t.w]),na[t.v]&&na[t.w]&&na[t.v]===na[t.w]?(pt.warn("Fixing and trixing link to self - removing XXX",t.v,t.w,t.name),pt.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),s=da(t.v),n=da(t.w),o.removeEdge(t.v,t.w,t.name),e=t.w+"---"+t.v,o.setNode(e,{domId:e,id:e,labelStyle:"",labelText:a.label,padding:0,shape:"labelRect",style:""}),i=JSON.parse(JSON.stringify(a)),r=JSON.parse(JSON.stringify(a)),i.label="",i.arrowTypeEnd="none",r.label="",i.fromCluster=t.v,r.toCluster=t.v,o.setEdge(s,e,i,t.name+"-cyclic-special"),o.setEdge(e,n,r,t.name+"-cyclic-special")):(na[t.v]||na[t.w])&&(pt.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),s=da(t.v),n=da(t.w),o.removeEdge(t.v,t.w,t.name),s!==t.v&&(a.fromCluster=t.v),n!==t.w&&(a.toCluster=t.w),pt.warn("Fix Replacing with XXX",s,n,t.name),o.setEdge(s,n,a,t.name))}),pt.warn("Adjusted Graph",et.write(o)),ua(o,0),pt.trace(na)):pt.debug("Opting out, no graph "),pt.warn("Graph after:",et.write(e)),Da(t,e,r)},Oa=t=>Et.sanitizeText(t,Hi());let Fa={dividerMargin:10,padding:5,textHeight:10};function Na(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const $a={setConf:function(e){Object.keys(e).forEach(function(t){Fa[t]=e[t]})},draw:function(t,e,i,a){pt.info("Drawing class - ",e);var s,n,o,l,c,h,d,u=Hi().flowchart,p=Hi().securityLevel,g=(pt.info("config:",u),u.nodeSpacing||50),y=u.rankSpacing||50,g=new tt.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:a.db.getDirection(),nodesep:g,ranksep:y,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),y=a.db.getClasses(),f=a.db.getRelations(),b=a.db.getNotes();let x;pt.info(f),l=y,c=g,h=a,d=Object.keys(l),pt.info("keys:",d),pt.info(l),d.forEach(function(t){t=l[t];let e="";0<t.cssClasses.length&&(e=e+" "+t.cssClasses.join(" "));var i,r={labelStyle:""},a=void 0!==t.text?t.text:t.id;t.type,c.setNode(t.id,{labelStyle:r.labelStyle,shape:i="class_box",labelText:Oa(a),classData:t,rx:0,ry:0,class:e,style:r.style,id:t.id,domId:t.domId,tooltip:h.db.getTooltip(t.id)||"",haveCallback:t.haveCallback,link:t.link,width:"group"===t.type?500:void 0,type:t.type,padding:Hi().flowchart.padding}),pt.info("setNode",{labelStyle:r.labelStyle,shape:i,labelText:a,rx:0,ry:0,class:e,style:r.style,id:t.id,width:"group"===t.type?500:void 0,type:t.type,padding:Hi().flowchart.padding})});{var k=f,_=g;const C=Hi().flowchart;let a=0;k.forEach(function(t){a++;var e={classes:"relation"};e.pattern=1==t.relation.lineType?"dashed":"solid",e.id="id"+a,"arrow_open"===t.type?e.arrowhead="none":e.arrowhead="normal",pt.info(e,t),e.startLabelRight="none"===t.relationTitle1?"":t.relationTitle1,e.endLabelLeft="none"===t.relationTitle2?"":t.relationTitle2,e.arrowTypeStart=Na(t.relation.type1),e.arrowTypeEnd=Na(t.relation.type2);let i="",r="";if(void 0!==t.style){const k=Ci(t.style);i=k.style,r=k.labelStyle}else i="fill:none";e.style=i,e.labelStyle=r,void 0!==t.interpolate?e.curve=ki(t.interpolate,m):void 0!==k.defaultInterpolate?e.curve=ki(k.defaultInterpolate,m):e.curve=ki(C.curve,m),t.text=t.title,void 0===t.text?void 0!==t.style&&(e.arrowheadStyle="fill: #333"):(e.arrowheadStyle="fill: #333",e.labelpos="c",Hi().flowchart.htmlLabels?(e.labelType="html",e.label='<span class="edgeLabel">'+t.text+"</span>"):(e.labelType="text",e.label=t.text.replace(Et.lineBreakRegex,"\n"),void 0===t.style&&(e.style=e.style||"stroke: #333; stroke-width: 1.5px;fill:none"),e.labelStyle=e.labelStyle.replace("color:","fill:"))),_.setEdge(t.id1,t.id2,e,a)})}d=b,s=g,n=f.length+1,o=y,pt.info(d),d.forEach(function(t,e){var i=t.text;s.setNode(t.id,{labelStyle:"",shape:"note",labelText:Oa(i),noteData:t,rx:0,ry:0,class:"",style:"",id:t.id,domId:t.id,tooltip:"",type:"note",padding:Hi().flowchart.padding}),pt.info("setNode",{labelStyle:"",shape:"note",labelText:i,rx:0,ry:0,style:"",id:t.id,type:"note",padding:Hi().flowchart.padding}),t.class&&t.class in o&&((i={classes:"relation",pattern:"dotted"}).id="edgeNote"+(e=n+e),i.arrowhead="none",pt.info(`Note edge: ${JSON.stringify(i)}, `+JSON.stringify(t)),i.startLabelRight="",i.endLabelLeft="",i.arrowTypeStart="none",i.arrowTypeEnd="none",i.style="fill:none",i.labelStyle="",i.curve=ki(Fa.curve,m),s.setEdge(t.id,t.class,i,e))}),"sandbox"===p&&(x=r("#i"+e));b=r("sandbox"===p?x.nodes()[0].contentDocument.body:"body"),f=b.select(`[id="${e}"]`),y=b.select("#"+e+" g");if(Ia(y,g,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),Ri.insertTitle(f,"classTitleText",u.titleTopMargin,a.db.getDiagramTitle()),er(g,f,u.diagramPadding,u.useMaxWidth),!u.htmlLabels){const t="sandbox"===p?x.nodes()[0].contentDocument:document,i=t.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const e of i){const i=e.getBBox(),r=t.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx",0),r.setAttribute("ry",0),r.setAttribute("width",i.width),r.setAttribute("height",i.height),e.insertBefore(r,e.firstChild)}}}};var Ra=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e=[1,2],i=[1,5],r=[6,9,11,23,25,27,29,30,31,51],a=[1,17],s=[1,18],n=[1,19],o=[1,20],l=[1,21],c=[1,22],h=[1,25],d=[1,30],u=[1,31],p=[1,32],g=[1,33],y=[6,9,11,15,20,23,25,27,29,30,31,44,45,46,47,51],f=[1,45],m=[30,31,48,49],b=[4,6,9,11,23,25,27,29,30,31,51],x=[44,45,46,47],k=[22,37],_=[1,65],C=[1,64],v=[22,37,39,41],e={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyTypeList:35,attributeComment:36,ATTRIBUTE_WORD:37,attributeKeyType:38,COMMA:39,ATTRIBUTE_KEY:40,COMMENT:41,cardinality:42,relType:43,ZERO_OR_ONE:44,ZERO_OR_MORE:45,ONE_OR_MORE:46,ONLY_ONE:47,NON_IDENTIFYING:48,IDENTIFYING:49,WORD:50,open_directive:51,type_directive:52,arg_directive:53,close_directive:54,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",39:"COMMA",40:"ATTRIBUTE_KEY",41:"COMMENT",44:"ZERO_OR_ONE",45:"ZERO_OR_MORE",46:"ONE_OR_MORE",47:"ONLY_ONE",48:"NON_IDENTIFYING",49:"IDENTIFYING",50:"WORD",51:"open_directive",52:"type_directive",53:"arg_directive",54:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[35,3],[38,1],[36,1],[18,3],[42,1],[42,1],[42,1],[42,1],[43,1],[43,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 1:break;case 3:case 7:case 8:this.$=[];break;case 4:s[o-1].push(s[o]),this.$=s[o-1];break;case 5:case 6:case 20:case 43:case 28:case 29:case 32:this.$=s[o];break;case 12:r.addEntity(s[o-4]),r.addEntity(s[o-2]),r.addRelationship(s[o-4],s[o],s[o-2],s[o-3]);break;case 13:r.addEntity(s[o-3]),r.addAttributes(s[o-3],s[o-1]);break;case 14:r.addEntity(s[o-2]);break;case 15:r.addEntity(s[o]);break;case 16:case 17:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 18:case 19:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 21:case 41:case 42:case 33:this.$=s[o].replace(/"/g,"");break;case 22:case 30:this.$=[s[o]];break;case 23:s[o].push(s[o-1]),this.$=s[o];break;case 24:this.$={attributeType:s[o-1],attributeName:s[o]};break;case 25:this.$={attributeType:s[o-2],attributeName:s[o-1],attributeKeyTypeList:s[o]};break;case 26:this.$={attributeType:s[o-2],attributeName:s[o-1],attributeComment:s[o]};break;case 27:this.$={attributeType:s[o-3],attributeName:s[o-2],attributeKeyTypeList:s[o-1],attributeComment:s[o]};break;case 31:s[o-2].push(s[o]),this.$=s[o-2];break;case 34:this.$={cardA:s[o],relType:s[o-1],cardB:s[o-2]};break;case 35:this.$=r.Cardinality.ZERO_OR_ONE;break;case 36:this.$=r.Cardinality.ZERO_OR_MORE;break;case 37:this.$=r.Cardinality.ONE_OR_MORE;break;case 38:this.$=r.Cardinality.ONLY_ONE;break;case 39:this.$=r.Identification.NON_IDENTIFYING;break;case 40:this.$=r.Identification.IDENTIFYING;break;case 44:r.parseDirective("%%{","open_directive");break;case 45:r.parseDirective(s[o],"type_directive");break;case 46:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 47:r.parseDirective("}%%","close_directive","er")}},table:[{3:1,4:e,7:3,12:4,51:i},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,51:i},{13:8,52:[1,9]},{52:[2,44]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:a,25:s,27:n,29:o,30:l,31:c,51:i},{1:[2,2]},{14:23,15:[1,24],54:h},t([15,54],[2,45]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:15,10:26,12:4,17:16,23:a,25:s,27:n,29:o,30:l,31:c,51:i},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),t(r,[2,15],{18:27,42:29,20:[1,28],44:d,45:u,46:p,47:g}),{24:[1,34]},{26:[1,35]},{28:[1,36]},t(r,[2,19]),t(y,[2,20]),t(y,[2,21]),{11:[1,37]},{16:38,53:[1,39]},{11:[2,47]},t(r,[2,5]),{17:40,30:l,31:c},{21:41,22:[1,42],32:43,33:44,37:f},{43:46,48:[1,47],49:[1,48]},t(m,[2,35]),t(m,[2,36]),t(m,[2,37]),t(m,[2,38]),t(r,[2,16]),t(r,[2,17]),t(r,[2,18]),t(b,[2,9]),{14:49,54:h},{54:[2,46]},{15:[1,50]},{22:[1,51]},t(r,[2,14]),{21:52,22:[2,22],32:43,33:44,37:f},{34:53,37:[1,54]},{37:[2,28]},{42:55,44:d,45:u,46:p,47:g},t(x,[2,39]),t(x,[2,40]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],50:[1,58]},t(r,[2,13]),{22:[2,23]},t(k,[2,24],{35:61,36:62,38:63,40:_,41:C}),t([22,37,40,41],[2,29]),t([30,31],[2,34]),t(b,[2,10]),t(r,[2,12]),t(r,[2,41]),t(r,[2,42]),t(r,[2,43]),t(k,[2,25],{36:66,39:[1,67],41:C}),t(k,[2,26]),t(v,[2,30]),t(k,[2,33]),t(v,[2,32]),t(k,[2,27]),{38:68,40:_},t(v,[2,31])],defaultActions:{5:[2,44],7:[2,2],25:[2,47],39:[2,46],45:[2,28],52:[2,23]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};a={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),51;case 8:return this.begin("type_directive"),52;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),54;case 11:return 53;case 12:case 13:case 15:case 22:case 27:break;case 14:return 11;case 16:return 9;case 17:return 31;case 18:return 50;case 19:return 4;case 20:return this.begin("block"),20;case 21:return 39;case 23:return 40;case 24:case 25:return 37;case 26:return 41;case 28:return this.popState(),22;case 29:case 58:return e.yytext[0];case 30:case 34:case 35:case 48:return 44;case 31:case 32:case 33:case 41:case 43:case 50:return 46;case 36:case 37:case 38:case 39:case 40:case 42:case 49:return 45;case 44:case 45:case 46:case 47:return 47;case 51:case 54:case 55:case 56:return 48;case 52:case 53:return 49;case 57:return 30;case 59:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28,29],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}};function T(){this.yy={}}return e.lexer=a,new((T.prototype=e).Parser=T)}();const Ma=Ra.parser=Ra,Pa=t=>null!==t.match(/^\s*erDiagram/);let za={},ja=[];const Ya=function(t){return void 0===za[t]&&(za[t]={attributes:[]},pt.info("Added new entity :",t)),za[t]},Wa={Cardinality:{ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification:{NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},getConfig:()=>Hi().er,addEntity:Ya,addAttributes:function(t,e){let i,r=Ya(t);for(i=e.length-1;0<=i;i--)r.attributes.push(e[i]),pt.debug("Added attribute ",e[i].attributeName)},getEntities:()=>za,addRelationship:function(t,e,i,r){t={entityA:t,roleA:e,entityB:i,relSpec:r};ja.push(t),pt.debug("Added new relationship :",t)},getRelationships:()=>ja,clear:function(){za={},ja=[],kr()},setAccTitle:_r,getAccTitle:Cr,setAccDescription:Tr,getAccDescription:Er,setDiagramTitle:vr,getDiagramTitle:Sr},qa={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},Ua=qa,Va=function(t,e){let i;t.append("defs").append("marker").attr("id",qa.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",qa.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),(i=t.append("defs").append("marker").attr("id",qa.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),(i=t.append("defs").append("marker").attr("id",qa.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",qa.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",qa.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),(i=t.append("defs").append("marker").attr("id",qa.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),(i=t.append("defs").append("marker").attr("id",qa.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},Ha=/[^\dA-Za-z](\W)*/g;let Ga={},Xa=new Map;const Ka=function(s,n,o){let l;return Object.keys(n).forEach(function(t){[i=""]=[t],e=i.replace(Ha,"");var e=""+to("entity")+to(e)+it(i,Ja),i=(Xa.set(t,e),s.append("g").attr("id",e)),r=(l=void 0===l?e:l,"text-"+e),a=i.append("text").classed("er entityLabel",!0).attr("id",r).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",Hi().fontFamily).style("font-size",Ga.fontSize+"px").text(t),{width:a,height:t}=((l,c,h)=>{const d=Ga.entityPadding/3,u=Ga.entityPadding/3,n=.85*Ga.fontSize,t=c.node().getBBox(),p=[];let g=!1,y=!1,f=0,m=0,b=0,x=0,o=t.height+2*d,k=1,e=(h.forEach(t=>{void 0!==t.attributeKeyTypeList&&0<t.attributeKeyTypeList.length&&(g=!0),void 0!==t.attributeComment&&(y=!0)}),h.forEach(t=>{var e=c.node().id+"-attr-"+k;let i=0;var r=Tt(t.attributeType),r=l.append("text").classed("er entityLabel",!0).attr("id",e+"-type").attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Hi().fontFamily).style("font-size",n+"px").text(r),a=l.append("text").classed("er entityLabel",!0).attr("id",e+"-name").attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Hi().fontFamily).style("font-size",n+"px").text(t.attributeName),s={},r=(s.tn=r,s.nn=a,r.node().getBBox()),a=a.node().getBBox();if(f=Math.max(f,r.width),m=Math.max(m,a.width),i=Math.max(r.height,a.height),g){const c=void 0!==t.attributeKeyTypeList?t.attributeKeyTypeList.join(","):"",d=l.append("text").classed("er entityLabel",!0).attr("id",e+"-key").attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Hi().fontFamily).style("font-size",n+"px").text(c),p=(s.kn=d).node().getBBox();b=Math.max(b,p.width),i=Math.max(i,p.height)}if(y){const c=l.append("text").classed("er entityLabel",!0).attr("id",e+"-comment").attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Hi().fontFamily).style("font-size",n+"px").text(t.attributeComment||""),d=(s.cn=c).node().getBBox();x=Math.max(x,d.width),i=Math.max(i,d.height)}s.height=i,p.push(s),o+=i+2*d,k+=1}),4);g&&(e+=2),y&&(e+=2);var i=f+m+b+x,r={width:Math.max(Ga.minEntityWidth,Math.max(t.width+2*Ga.entityPadding,i+u*e)),height:0<h.length?o:Math.max(Ga.minEntityHeight,t.height+2*Ga.entityPadding)};if(0<h.length){const h=Math.max(0,(r.width-i-u*e)/(e/2));c.attr("transform","translate("+r.width/2+","+(d+t.height/2)+")");let n=t.height+2*d,o="attributeBoxOdd";p.forEach(t=>{var e=n+d+t.height/2;t.tn.attr("transform","translate("+u+","+e+")");const i=l.insert("rect","#"+t.tn.node().id).classed("er "+o,!0).attr("x",0).attr("y",n).attr("width",f+2*u+h).attr("height",t.height+2*d),r=parseFloat(i.attr("x"))+parseFloat(i.attr("width"));t.nn.attr("transform","translate("+(r+u)+","+e+")");var a=l.insert("rect","#"+t.nn.node().id).classed("er "+o,!0).attr("x",r).attr("y",n).attr("width",m+2*u+h).attr("height",t.height+2*d);let s=parseFloat(a.attr("x"))+parseFloat(a.attr("width"));if(g){t.kn.attr("transform","translate("+(s+u)+","+e+")");const i=l.insert("rect","#"+t.kn.node().id).classed("er "+o,!0).attr("x",s).attr("y",n).attr("width",b+2*u+h).attr("height",t.height+2*d);s=parseFloat(i.attr("x"))+parseFloat(i.attr("width"))}y&&(t.cn.attr("transform","translate("+(s+u)+","+e+")"),l.insert("rect","#"+t.cn.node().id).classed("er "+o,"true").attr("x",s).attr("y",n).attr("width",x+2*u+h).attr("height",t.height+2*d)),n+=t.height+2*d,o="attributeBoxOdd"===o?"attributeBoxEven":"attributeBoxOdd"})}else r.height=Math.max(Ga.minEntityHeight,o),c.attr("transform","translate("+r.width/2+","+r.height/2+")");return r})(i,a,n[t].attributes),i=i.insert("rect","#"+r).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",a).attr("height",t).node().getBBox();o.setNode(e,{width:i.width,height:i.height,shape:"rect",id:e})}),l},Qa=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")};let Za=0;const Ja="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function to(t=""){return 0<t.length?t+"-":""}const eo={setConf:function(t){for(const e of Object.keys(t))Ga[e]=t[e]},draw:function(t,e,i,c){Ga=Hi().er,pt.info("Drawing ER diagram");var a,s,o,l=Hi().securityLevel;let h;"sandbox"===l&&(h=r("#i"+e));const d=r("sandbox"===l?h.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);let u;Va(d,Ga),u=new tt.Graph({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:Ga.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const p=Ka(d,c.db.getEntities(),u),g=(l=c.db.getRelationships(),a=u,l.forEach(function(t){a.setEdge(Xa.get(t.entityA),Xa.get(t.entityB),{relationship:t},Qa(t))}),l);J(u),s=d,(o=u).nodes().forEach(function(t){void 0!==t&&void 0!==o.node(t)&&s.select("#"+t).attr("transform","translate("+(o.node(t).x-o.node(t).width/2)+","+(o.node(t).y-o.node(t).height/2)+" )")}),g.forEach(function(e){{var i=d,r=u,a=p,s=c,r=(Za++,r.edge(Xa.get(e.entityA),Xa.get(e.entityB),Qa(e))),o=Y().x(function(t){return t.x}).y(function(t){return t.y}).curve(n),l=i.insert("path","#"+a).classed("er relationshipLine",!0).attr("d",o(r.points)).style("stroke",Ga.stroke).style("fill","none");e.relSpec.relType===s.db.Identification.NON_IDENTIFYING&&l.attr("stroke-dasharray","8,8");let t="";switch(Ga.arrowMarkerAbsolute&&(t=(t=(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),e.relSpec.cardA){case s.db.Cardinality.ZERO_OR_ONE:l.attr("marker-end","url("+t+"#"+Ua.ZERO_OR_ONE_END+")");break;case s.db.Cardinality.ZERO_OR_MORE:l.attr("marker-end","url("+t+"#"+Ua.ZERO_OR_MORE_END+")");break;case s.db.Cardinality.ONE_OR_MORE:l.attr("marker-end","url("+t+"#"+Ua.ONE_OR_MORE_END+")");break;case s.db.Cardinality.ONLY_ONE:l.attr("marker-end","url("+t+"#"+Ua.ONLY_ONE_END+")")}switch(e.relSpec.cardB){case s.db.Cardinality.ZERO_OR_ONE:l.attr("marker-start","url("+t+"#"+Ua.ZERO_OR_ONE_START+")");break;case s.db.Cardinality.ZERO_OR_MORE:l.attr("marker-start","url("+t+"#"+Ua.ZERO_OR_MORE_START+")");break;case s.db.Cardinality.ONE_OR_MORE:l.attr("marker-start","url("+t+"#"+Ua.ONE_OR_MORE_START+")");break;case s.db.Cardinality.ONLY_ONE:l.attr("marker-start","url("+t+"#"+Ua.ONLY_ONE_START+")")}a=l.node().getTotalLength(),o=l.node().getPointAtLength(.5*a),r="rel"+Za,s=i.append("text").classed("er relationshipLabel",!0).attr("id",r).attr("x",o.x).attr("y",o.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",Hi().fontFamily).style("font-size",Ga.fontSize+"px").text(e.roleA).node().getBBox(),i.insert("rect","#"+r).classed("er relationshipLabelBox",!0).attr("x",o.x-s.width/2).attr("y",o.y-s.height/2).attr("width",s.width).attr("height",s.height)}});var e=Ga.diagramPadding,l=(Ri.insertTitle(d,"entityTitleText",Ga.titleTopMargin,c.db.getDiagramTitle()),d.node().getBBox()),y=l.width+2*e,f=l.height+2*e;tr(d,f,y,Ga.useMaxWidth),d.attr("viewBox",`${l.x-e} ${l.y-e} ${y} `+f)}};var io=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var R=[1,9],M=[1,7],$=[1,6],P=[1,8],H=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],V=[2,10],U=[1,20],z=[1,21],j=[1,22],W=[1,23],Y=[1,30],q=[1,32],G=[1,33],X=[1,34],K=[1,62],Q=[1,48],Z=[1,52],J=[1,36],tt=[1,37],et=[1,38],it=[1,39],rt=[1,40],at=[1,56],st=[1,63],nt=[1,51],ot=[1,53],lt=[1,55],ct=[1,59],ht=[1,60],dt=[1,41],ut=[1,42],pt=[1,43],gt=[1,44],yt=[1,61],ft=[1,50],mt=[1,54],bt=[1,57],xt=[1,58],kt=[1,49],_t=[1,66],Ct=[1,71],e=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],vt=[1,75],Tt=[1,74],Et=[1,76],St=[20,21,23,81,82],wt=[1,99],i=[1,104],r=[1,107],a=[1,108],At=[1,101],s=[1,106],n=[1,109],Bt=[1,102],o=[1,114],l=[1,113],c=[1,103],h=[1,105],d=[1,110],u=[1,111],p=[1,112],g=[1,115],Lt=[20,21,22,23,81,82],Dt=[20,21,22,23,53,81,82],y=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],f=[20,21,23],It=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Ot=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ft=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],m=[1,149],b=[1,157],x=[1,158],k=[1,159],_=[1,160],C=[1,144],v=[1,145],Nt=[1,141],T=[1,152],E=[1,153],S=[1,154],w=[1,155],A=[1,156],B=[1,161],L=[1,162],D=[1,147],I=[1,150],O=[1,146],F=[1,143],Rt=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Mt=[1,165],$t=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],N=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],Pt=[12,21,22,24],Ht=[22,106],Vt=[1,250],Ut=[1,245],zt=[1,246],jt=[1,254],Wt=[1,251],Yt=[1,248],qt=[1,247],Gt=[1,249],Xt=[1,252],Kt=[1,253],Qt=[1,255],Zt=[1,273],Jt=[20,21,23,106],te=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],R={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 5:r.parseDirective("%%{","open_directive");break;case 6:r.parseDirective(s[o],"type_directive");break;case 7:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 8:r.parseDirective("}%%","close_directive","flowchart");break;case 10:case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 11:(!Array.isArray(s[o])||0<s[o].length)&&s[o-1].push(s[o]),this.$=s[o-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:case 78:case 150:this.$=s[o];break;case 19:r.setDirection("TB"),this.$="TB";break;case 20:r.setDirection(s[o-1]),this.$=s[o-1];break;case 35:this.$=s[o-1].nodes;break;case 41:this.$=r.addSubGraph(s[o-6],s[o-1],s[o-4]);break;case 42:this.$=r.addSubGraph(s[o-3],s[o-1],s[o-3]);break;case 43:this.$=r.addSubGraph(void 0,s[o-1],void 0);break;case 45:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 46:case 47:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 51:r.addLink(s[o-2].stmt,s[o],s[o-1]),this.$={stmt:s[o],nodes:s[o].concat(s[o-2].nodes)};break;case 52:r.addLink(s[o-3].stmt,s[o-1],s[o-2]),this.$={stmt:s[o-1],nodes:s[o-1].concat(s[o-3].nodes)};break;case 53:this.$={stmt:s[o-1],nodes:s[o-1]};break;case 54:this.$={stmt:s[o],nodes:s[o]};break;case 55:case 123:case 125:this.$=[s[o]];break;case 56:this.$=s[o-4].concat(s[o]);break;case 57:this.$=[s[o-2]],r.setClass(s[o-2],s[o]);break;case 58:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"square");break;case 59:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"doublecircle");break;case 60:this.$=s[o-5],r.addVertex(s[o-5],s[o-2],"circle");break;case 61:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"ellipse");break;case 62:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"stadium");break;case 63:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"subroutine");break;case 64:this.$=s[o-7],r.addVertex(s[o-7],s[o-1],"rect",void 0,void 0,void 0,Object.fromEntries([[s[o-5],s[o-3]]]));break;case 65:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"cylinder");break;case 66:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"round");break;case 67:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"diamond");break;case 68:this.$=s[o-5],r.addVertex(s[o-5],s[o-2],"hexagon");break;case 69:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"odd");break;case 70:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"trapezoid");break;case 71:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"inv_trapezoid");break;case 72:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"lean_right");break;case 73:this.$=s[o-3],r.addVertex(s[o-3],s[o-1],"lean_left");break;case 74:this.$=s[o],r.addVertex(s[o]);break;case 75:s[o-1].text=s[o],this.$=s[o-1];break;case 76:case 77:s[o-2].text=s[o-1],this.$=s[o-2];break;case 79:var l=r.destructLink(s[o],s[o-2]);this.$={type:l.type,stroke:l.stroke,length:l.length,text:s[o-1]};break;case 80:l=r.destructLink(s[o]),this.$={type:l.type,stroke:l.stroke,length:l.length};break;case 81:this.$=s[o-1];break;case 83:case 97:case 153:case 151:this.$=s[o-1]+""+s[o];break;case 98:case 99:this.$=s[o-4],r.addClass(s[o-2],s[o]);break;case 100:this.$=s[o-4],r.setClass(s[o-2],s[o]);break;case 101:case 109:this.$=s[o-1],r.setClickEvent(s[o-1],s[o]);break;case 102:case 110:this.$=s[o-3],r.setClickEvent(s[o-3],s[o-2]),r.setTooltip(s[o-3],s[o]);break;case 103:this.$=s[o-2],r.setClickEvent(s[o-2],s[o-1],s[o]);break;case 104:this.$=s[o-4],r.setClickEvent(s[o-4],s[o-3],s[o-2]),r.setTooltip(s[o-4],s[o]);break;case 105:case 111:this.$=s[o-1],r.setLink(s[o-1],s[o]);break;case 106:case 112:this.$=s[o-3],r.setLink(s[o-3],s[o-2]),r.setTooltip(s[o-3],s[o]);break;case 107:case 113:this.$=s[o-3],r.setLink(s[o-3],s[o-2],s[o]);break;case 108:case 114:this.$=s[o-5],r.setLink(s[o-5],s[o-4],s[o]),r.setTooltip(s[o-5],s[o-2]);break;case 115:this.$=s[o-4],r.addVertex(s[o-2],void 0,void 0,s[o]);break;case 116:case 118:this.$=s[o-4],r.updateLink(s[o-2],s[o]);break;case 117:this.$=s[o-4],r.updateLink([s[o-2]],s[o]);break;case 119:this.$=s[o-8],r.updateLinkInterpolate([s[o-6]],s[o-2]),r.updateLink([s[o-6]],s[o]);break;case 120:this.$=s[o-8],r.updateLinkInterpolate(s[o-6],s[o-2]),r.updateLink(s[o-6],s[o]);break;case 121:this.$=s[o-6],r.updateLinkInterpolate([s[o-4]],s[o]);break;case 122:this.$=s[o-6],r.updateLinkInterpolate(s[o-4],s[o]);break;case 124:case 126:s[o-2].push(s[o]),this.$=s[o-2];break;case 128:this.$=s[o-1]+s[o];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"}}},table:[{3:1,4:2,5:3,6:5,12:R,16:4,21:M,22:$,24:P},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:R,16:4,21:M,22:$,24:P},t(H,V,{17:11}),{7:12,13:[1,13]},{16:14,21:M,22:$,24:P},{16:15,21:M,22:$,24:P},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:U,21:z,22:j,23:W,32:24,33:25,34:26,35:27,36:28,37:29,38:Y,43:31,44:q,46:G,48:X,50:35,51:45,52:K,54:46,66:Q,67:Z,86:J,87:tt,88:et,89:it,90:rt,91:at,95:st,105:nt,106:ot,109:lt,111:ct,112:ht,116:47,118:dt,119:ut,120:pt,121:gt,122:yt,123:ft,124:mt,125:bt,126:xt,127:kt},{8:64,10:[1,65],15:_t},t([10,15],[2,6]),t(H,[2,17]),t(H,[2,18]),t(H,[2,19]),{20:[1,68],21:[1,69],22:Ct,27:67,30:70},t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),{9:72,20:vt,21:Tt,23:Et,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:vt,21:Tt,23:Et},{9:81,20:vt,21:Tt,23:Et},{9:82,20:vt,21:Tt,23:Et},{9:83,20:vt,21:Tt,23:Et},{9:84,20:vt,21:Tt,23:Et},{9:86,20:vt,21:Tt,22:[1,85],23:Et},t(e,[2,44]),{45:[1,87]},{47:[1,88]},t(e,[2,47]),t(St,[2,54],{30:89,22:Ct}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:wt,52:i,66:r,67:a,84:[1,97],91:At,97:96,98:[1,94],100:[1,95],105:s,106:n,109:Bt,111:o,112:l,115:100,117:98,122:c,123:h,124:d,125:u,126:p,127:g},t(e,[2,158]),t(e,[2,159]),t(e,[2,160]),t(e,[2,161]),t(Lt,[2,55],{53:[1,116]}),t(Dt,[2,74],{116:129,40:[1,117],52:K,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:Q,67:Z,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:at,95:st,105:nt,106:ot,109:lt,111:ct,112:ht,122:yt,123:ft,124:mt,125:bt,126:xt,127:kt}),t(y,[2,150]),t(y,[2,175]),t(y,[2,176]),t(y,[2,177]),t(y,[2,178]),t(y,[2,179]),t(y,[2,180]),t(y,[2,181]),t(y,[2,182]),t(y,[2,183]),t(y,[2,184]),t(y,[2,185]),t(y,[2,186]),t(y,[2,187]),t(y,[2,188]),t(y,[2,189]),t(y,[2,190]),{9:130,20:vt,21:Tt,23:Et},{11:131,14:[1,132]},t(f,[2,8]),t(H,[2,20]),t(H,[2,26]),t(H,[2,27]),{21:[1,133]},t(It,[2,34],{30:134,22:Ct}),t(e,[2,35]),{50:135,51:45,52:K,54:46,66:Q,67:Z,91:at,95:st,105:nt,106:ot,109:lt,111:ct,112:ht,116:47,122:yt,123:ft,124:mt,125:bt,126:xt,127:kt},t(Ot,[2,48]),t(Ot,[2,49]),t(Ot,[2,50]),t(Ft,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:m,24:b,26:x,38:k,39:139,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},t([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),t(e,[2,36]),t(e,[2,37]),t(e,[2,38]),t(e,[2,39]),t(e,[2,40]),{22:m,24:b,26:x,38:k,39:163,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},t(Rt,V,{17:164}),t(e,[2,45]),t(e,[2,46]),t(St,[2,53],{52:Mt}),{26:wt,52:i,66:r,67:a,91:At,97:166,102:[1,167],105:s,106:n,109:Bt,111:o,112:l,115:100,117:98,122:c,123:h,124:d,125:u,126:p,127:g},{95:[1,168],103:169,105:[1,170]},{26:wt,52:i,66:r,67:a,91:At,95:[1,171],97:172,105:s,106:n,109:Bt,111:o,112:l,115:100,117:98,122:c,123:h,124:d,125:u,126:p,127:g},{26:wt,52:i,66:r,67:a,91:At,97:173,105:s,106:n,109:Bt,111:o,112:l,115:100,117:98,122:c,123:h,124:d,125:u,126:p,127:g},t(f,[2,101],{22:[1,174],99:[1,175]}),t(f,[2,105],{22:[1,176]}),t(f,[2,109],{115:100,117:178,22:[1,177],26:wt,52:i,66:r,67:a,91:At,105:s,106:n,109:Bt,111:o,112:l,122:c,123:h,124:d,125:u,126:p,127:g}),t(f,[2,111],{22:[1,179]}),t($t,[2,152]),t($t,[2,154]),t($t,[2,155]),t($t,[2,156]),t($t,[2,157]),t(N,[2,162]),t(N,[2,163]),t(N,[2,164]),t(N,[2,165]),t(N,[2,166]),t(N,[2,167]),t(N,[2,168]),t(N,[2,169]),t(N,[2,170]),t(N,[2,171]),t(N,[2,172]),t(N,[2,173]),t(N,[2,174]),{52:K,54:180,66:Q,67:Z,91:at,95:st,105:nt,106:ot,109:lt,111:ct,112:ht,116:47,122:yt,123:ft,124:mt,125:bt,126:xt,127:kt},{22:m,24:b,26:x,38:k,39:181,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:182,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:184,42:_,52:i,57:[1,183],66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:185,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:186,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:187,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{66:[1,188]},{22:m,24:b,26:x,38:k,39:189,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:190,42:_,52:i,66:r,67:a,71:[1,191],73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:192,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:193,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:194,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},t(y,[2,151]),t(Pt,[2,3]),{8:195,15:_t},{15:[2,7]},t(H,[2,28]),t(It,[2,33]),t(St,[2,51],{30:196,22:Ct}),t(Ft,[2,75],{22:[1,197]}),{22:[1,198]},{22:m,24:b,26:x,38:k,39:199,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,42:_,52:i,66:r,67:a,73:C,81:v,82:[1,200],83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},t(N,[2,82]),t(N,[2,84]),t(N,[2,140]),t(N,[2,141]),t(N,[2,142]),t(N,[2,143]),t(N,[2,144]),t(N,[2,145]),t(N,[2,146]),t(N,[2,147]),t(N,[2,148]),t(N,[2,149]),t(N,[2,85]),t(N,[2,86]),t(N,[2,87]),t(N,[2,88]),t(N,[2,89]),t(N,[2,90]),t(N,[2,91]),t(N,[2,92]),t(N,[2,93]),t(N,[2,94]),t(N,[2,95]),{9:203,20:vt,21:Tt,22:m,23:Et,24:b,26:x,38:k,40:[1,202],42:_,52:i,66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{18:18,19:19,20:U,21:z,22:j,23:W,32:24,33:25,34:26,35:27,36:28,37:29,38:Y,42:[1,204],43:31,44:q,46:G,48:X,50:35,51:45,52:K,54:46,66:Q,67:Z,86:J,87:tt,88:et,89:it,90:rt,91:at,95:st,105:nt,106:ot,109:lt,111:ct,112:ht,116:47,118:dt,119:ut,120:pt,121:gt,122:yt,123:ft,124:mt,125:bt,126:xt,127:kt},{22:Ct,30:205},{22:[1,206],26:wt,52:i,66:r,67:a,91:At,105:s,106:n,109:Bt,111:o,112:l,115:100,117:178,122:c,123:h,124:d,125:u,126:p,127:g},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},t(Ht,[2,123]),{22:[1,211]},{22:[1,212],26:wt,52:i,66:r,67:a,91:At,105:s,106:n,109:Bt,111:o,112:l,115:100,117:178,122:c,123:h,124:d,125:u,126:p,127:g},{22:[1,213],26:wt,52:i,66:r,67:a,91:At,105:s,106:n,109:Bt,111:o,112:l,115:100,117:178,122:c,123:h,124:d,125:u,126:p,127:g},{84:[1,214]},t(f,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},t($t,[2,153]),{84:[1,219],101:[1,220]},t(Lt,[2,57],{116:129,52:K,66:Q,67:Z,91:at,95:st,105:nt,106:ot,109:lt,111:ct,112:ht,122:yt,123:ft,124:mt,125:bt,126:xt,127:kt}),{22:m,24:b,26:x,38:k,41:[1,221],42:_,52:i,66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,42:_,52:i,56:[1,222],66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:223,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,42:_,52:i,58:[1,224],66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,42:_,52:i,60:[1,225],66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,42:_,52:i,62:[1,226],66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,42:_,52:i,64:[1,227],66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{67:[1,228]},{22:m,24:b,26:x,38:k,42:_,52:i,66:r,67:a,70:[1,229],73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,42:_,52:i,66:r,67:a,72:[1,230],73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,39:231,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,41:[1,232],42:_,52:i,66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,42:_,52:i,66:r,67:a,73:C,75:[1,233],77:[1,234],81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{22:m,24:b,26:x,38:k,42:_,52:i,66:r,67:a,73:C,75:[1,236],77:[1,235],81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{9:237,20:vt,21:Tt,23:Et},t(St,[2,52],{52:Mt}),t(Ft,[2,77]),t(Ft,[2,76]),{22:m,24:b,26:x,38:k,42:_,52:i,66:r,67:a,68:[1,238],73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},t(Ft,[2,79]),t(N,[2,83]),{22:m,24:b,26:x,38:k,39:239,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},t(Rt,V,{17:240}),t(e,[2,43]),{51:241,52:K,54:46,66:Q,67:Z,91:at,95:st,105:nt,106:ot,109:lt,111:ct,112:ht,116:47,122:yt,123:ft,124:mt,125:bt,126:xt,127:kt},{22:Vt,66:Ut,67:zt,86:jt,96:242,102:Wt,105:Yt,107:243,108:244,109:qt,110:Gt,111:Xt,112:Kt,113:Qt},{22:Vt,66:Ut,67:zt,86:jt,96:256,102:Wt,105:Yt,107:243,108:244,109:qt,110:Gt,111:Xt,112:Kt,113:Qt},{22:Vt,66:Ut,67:zt,86:jt,96:257,102:Wt,104:[1,258],105:Yt,107:243,108:244,109:qt,110:Gt,111:Xt,112:Kt,113:Qt},{22:Vt,66:Ut,67:zt,86:jt,96:259,102:Wt,104:[1,260],105:Yt,107:243,108:244,109:qt,110:Gt,111:Xt,112:Kt,113:Qt},{105:[1,261]},{22:Vt,66:Ut,67:zt,86:jt,96:262,102:Wt,105:Yt,107:243,108:244,109:qt,110:Gt,111:Xt,112:Kt,113:Qt},{22:Vt,66:Ut,67:zt,86:jt,96:263,102:Wt,105:Yt,107:243,108:244,109:qt,110:Gt,111:Xt,112:Kt,113:Qt},{26:wt,52:i,66:r,67:a,91:At,97:264,105:s,106:n,109:Bt,111:o,112:l,115:100,117:98,122:c,123:h,124:d,125:u,126:p,127:g},t(f,[2,102]),{84:[1,265]},t(f,[2,106],{22:[1,266]}),t(f,[2,107]),t(f,[2,110]),t(f,[2,112],{22:[1,267]}),t(f,[2,113]),t(Dt,[2,58]),t(Dt,[2,59]),{22:m,24:b,26:x,38:k,42:_,52:i,58:[1,268],66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},t(Dt,[2,66]),t(Dt,[2,61]),t(Dt,[2,62]),t(Dt,[2,63]),{66:[1,269]},t(Dt,[2,65]),t(Dt,[2,67]),{22:m,24:b,26:x,38:k,42:_,52:i,66:r,67:a,72:[1,270],73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},t(Dt,[2,69]),t(Dt,[2,70]),t(Dt,[2,72]),t(Dt,[2,71]),t(Dt,[2,73]),t(Pt,[2,4]),t([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:m,24:b,26:x,38:k,41:[1,271],42:_,52:i,66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{18:18,19:19,20:U,21:z,22:j,23:W,32:24,33:25,34:26,35:27,36:28,37:29,38:Y,42:[1,272],43:31,44:q,46:G,48:X,50:35,51:45,52:K,54:46,66:Q,67:Z,86:J,87:tt,88:et,89:it,90:rt,91:at,95:st,105:nt,106:ot,109:lt,111:ct,112:ht,116:47,118:dt,119:ut,120:pt,121:gt,122:yt,123:ft,124:mt,125:bt,126:xt,127:kt},t(Lt,[2,56]),t(f,[2,115],{106:Zt}),t(Jt,[2,125],{108:274,22:Vt,66:Ut,67:zt,86:jt,102:Wt,105:Yt,109:qt,110:Gt,111:Xt,112:Kt,113:Qt}),t(te,[2,127]),t(te,[2,129]),t(te,[2,130]),t(te,[2,131]),t(te,[2,132]),t(te,[2,133]),t(te,[2,134]),t(te,[2,135]),t(te,[2,136]),t(te,[2,137]),t(te,[2,138]),t(te,[2,139]),t(f,[2,116],{106:Zt}),t(f,[2,117],{106:Zt}),{22:[1,275]},t(f,[2,118],{106:Zt}),{22:[1,276]},t(Ht,[2,124]),t(f,[2,98],{106:Zt}),t(f,[2,99],{106:Zt}),t(f,[2,100],{115:100,117:178,26:wt,52:i,66:r,67:a,91:At,105:s,106:n,109:Bt,111:o,112:l,122:c,123:h,124:d,125:u,126:p,127:g}),t(f,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:vt,21:Tt,23:Et},t(e,[2,42]),{22:Vt,66:Ut,67:zt,86:jt,102:Wt,105:Yt,107:283,108:244,109:qt,110:Gt,111:Xt,112:Kt,113:Qt},t(te,[2,128]),{26:wt,52:i,66:r,67:a,91:At,97:284,105:s,106:n,109:Bt,111:o,112:l,115:100,117:98,122:c,123:h,124:d,125:u,126:p,127:g},{26:wt,52:i,66:r,67:a,91:At,97:285,105:s,106:n,109:Bt,111:o,112:l,115:100,117:98,122:c,123:h,124:d,125:u,126:p,127:g},t(f,[2,108]),t(f,[2,114]),t(Dt,[2,60]),{22:m,24:b,26:x,38:k,39:286,42:_,52:i,66:r,67:a,73:C,81:v,83:140,84:Nt,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},t(Dt,[2,68]),t(Rt,V,{17:287}),t(Jt,[2,126],{108:274,22:Vt,66:Ut,67:zt,86:jt,102:Wt,105:Yt,109:qt,110:Gt,111:Xt,112:Kt,113:Qt}),t(f,[2,121],{115:100,117:178,22:[1,288],26:wt,52:i,66:r,67:a,91:At,105:s,106:n,109:Bt,111:o,112:l,122:c,123:h,124:d,125:u,126:p,127:g}),t(f,[2,122],{115:100,117:178,22:[1,289],26:wt,52:i,66:r,67:a,91:At,105:s,106:n,109:Bt,111:o,112:l,122:c,123:h,124:d,125:u,126:p,127:g}),{22:m,24:b,26:x,38:k,41:[1,290],42:_,52:i,66:r,67:a,73:C,81:v,83:201,85:151,86:T,87:E,88:S,89:w,90:A,91:B,92:L,94:142,95:D,105:s,106:n,109:I,111:o,112:l,113:O,114:F,115:148,122:c,123:h,124:d,125:u,126:p,127:g},{18:18,19:19,20:U,21:z,22:j,23:W,32:24,33:25,34:26,35:27,36:28,37:29,38:Y,42:[1,291],43:31,44:q,46:G,48:X,50:35,51:45,52:K,54:46,66:Q,67:Z,86:J,87:tt,88:et,89:it,90:rt,91:at,95:st,105:nt,106:ot,109:lt,111:ct,112:ht,116:47,118:dt,119:ut,120:pt,121:gt,122:yt,123:ft,124:mt,125:bt,126:xt,127:kt},{22:Vt,66:Ut,67:zt,86:jt,96:292,102:Wt,105:Yt,107:243,108:244,109:qt,110:Gt,111:Xt,112:Kt,113:Qt},{22:Vt,66:Ut,67:zt,86:jt,96:293,102:Wt,105:Yt,107:243,108:244,109:qt,110:Gt,111:Xt,112:Kt,113:Qt},t(Dt,[2,64]),t(e,[2,41]),t(f,[2,119],{106:Zt}),t(f,[2,120],{106:Zt})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};M={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:case 15:case 24:case 27:case 30:case 33:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 25:return 100;case 26:this.begin("callbackname");break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 31:return 99;case 32:this.begin("click");break;case 34:return 90;case 35:case 36:case 37:return t.lex.firstGraph()&&this.begin("dir"),24;case 38:return 38;case 39:return 42;case 40:case 41:case 42:case 43:return 101;case 44:return this.popState(),25;case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:return this.popState(),26;case 55:return 118;case 56:return 119;case 57:return 120;case 58:return 121;case 59:return 105;case 60:return 111;case 61:return 53;case 62:return 67;case 63:return 52;case 64:return 20;case 65:return 106;case 66:return 126;case 67:case 68:case 69:return 82;case 70:case 71:case 72:return 81;case 73:return 59;case 74:return 60;case 75:return 61;case 76:return 62;case 77:return 63;case 78:return 64;case 79:return 65;case 80:return 69;case 81:return 70;case 82:return 55;case 83:return 56;case 84:return 109;case 85:return 112;case 86:return 127;case 87:return 124;case 88:return 113;case 89:case 90:return 125;case 91:return 114;case 92:return 73;case 93:return 92;case 94:return"SEP";case 95:return 91;case 96:return 66;case 97:return 75;case 98:return 74;case 99:return 77;case 100:return 76;case 101:return 122;case 102:return 123;case 103:return 68;case 104:return 57;case 105:return 58;case 106:return 40;case 107:return 41;case 108:return 71;case 109:return 72;case 110:return 133;case 111:return 21;case 112:return 22;case 113:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[44,45,46,47,48,49,50,51,52,53,54],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],inclusive:!0}}};function ee(){this.yy={}}return R.lexer=M,new((ee.prototype=R).Parser=ee)}();const ro=io.parser=io,no=(t,e)=>{var i;return"dagre-wrapper"!==(null==(i=null==e?void 0:e.flowchart)?void 0:i.defaultRenderer)&&"elk"!==(null==(i=null==e?void 0:e.flowchart)?void 0:i.defaultRenderer)&&null!==t.match(/^\s*graph/)},so=(t,e)=>{var i;return"dagre-d3"!==(null==(i=null==e?void 0:e.flowchart)?void 0:i.defaultRenderer)&&"elk"!==(null==(i=null==e?void 0:e.flowchart)?void 0:i.defaultRenderer)&&(null!==t.match(/^\s*graph/)||null!==t.match(/^\s*flowchart/))};let ao,oo,lo=0,co=Hi(),ho={},uo=[],po={},go=[],yo={},fo={},mo=0,bo=!0,xo=[];const ko=t=>Et.sanitizeText(t,co),_o=function(t){for(const e of Object.keys(ho))if(ho[e].id===t)return ho[e].domId;return t},Co=function(t,e,i,r){t={start:t,end:e,type:void 0,text:""};void 0!==(r=i.text)&&(t.text=ko(r.trim()),'"'===t.text[0])&&'"'===t.text[t.text.length-1]&&(t.text=t.text.substring(1,t.text.length-1)),void 0!==i&&(t.type=i.type,t.stroke=i.stroke,t.length=i.length),uo.push(t)},To=function(t,e){t.split(",").forEach(function(t){void 0!==ho[t]&&ho[t].classes.push(e),void 0!==yo[t]&&yo[t].classes.push(e)})},Eo=function(t){let i=r(".mermaidTooltip");null===(i._groups||i)[0][0]&&(i=r("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),r(t).select("svg").selectAll("g.node").on("mouseover",function(){var t,e=r(this);null!==e.attr("title")&&(t=this.getBoundingClientRect(),i.transition().duration(200).style("opacity",".9"),i.text(e.attr("title")).style("left",window.scrollX+t.left+(t.right-t.left)/2+"px").style("top",window.scrollY+t.top-14+document.body.scrollTop+"px"),i.html(i.html().replace(/&lt;br\/&gt;/g,"<br/>")),e.classed("hover",!0))}).on("mouseout",function(){i.transition().duration(500).style("opacity",0),r(this).classed("hover",!1)})},vo=(xo.push(Eo),function(t){for(var[e,i]of go.entries())if(i.id===t)return e;return-1});let So=-1;const wo=[],Ao=function(i,r){const a=go[r].nodes;if(!(2e3<(So+=1))){if(wo[So]=r,go[r].id===i)return{result:!0,count:0};let t=0,e=1;for(;t<a.length;){const r=vo(a[t]);if(0<=r){const a=Ao(i,r);if(a.result)return{result:!0,count:e+a.count};e+=a.count}t+=1}return{result:!1,count:e}}},Bo=(t,e)=>{let i=!1;return t.forEach(t=>{0<=t.nodes.indexOf(e)&&(i=!0)}),i},Lo=(i,r)=>{const a=[];return i.nodes.forEach((t,e)=>{Bo(r,t)||a.push(i.nodes[e])}),{nodes:a}},Do={parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},defaultConfig:()=>Pi.flowchart,setAccTitle:_r,getAccTitle:Cr,getAccDescription:Er,setAccDescription:Tr,addVertex:function(t,e,i,r,a,s,n={}){let o,l=t;void 0!==l&&0!==l.trim().length&&(void 0===ho[l]&&(ho[l]={id:l,domId:"flowchart-"+l+"-"+lo,styles:[],classes:[]}),lo++,void 0!==e?(co=Hi(),'"'===(o=ko(e.trim()))[0]&&'"'===o[o.length-1]&&(o=o.substring(1,o.length-1)),ho[l].text=o):void 0===ho[l].text&&(ho[l].text=t),void 0!==i&&(ho[l].type=i),null!=r&&r.forEach(function(t){ho[l].styles.push(t)}),null!=a&&a.forEach(function(t){ho[l].classes.push(t)}),void 0!==s&&(ho[l].dir=s),void 0===ho[l].props?ho[l].props=n:void 0!==n&&Object.assign(ho[l].props,n))},lookUpDomId:_o,addLink:function(t,e,i,r){let a,s;for(a=0;a<t.length;a++)for(s=0;s<e.length;s++)Co(t[a],e[s],i,r)},updateLinkInterpolate:function(t,e){t.forEach(function(t){"default"===t?uo.defaultInterpolate=e:uo[t].interpolate=e})},updateLink:function(t,e){t.forEach(function(t){"default"===t?uo.defaultStyle=e:(-1===Ri.isSubstringInArray("fill",e)&&e.push("fill:none"),uo[t].style=e)})},addClass:function(i,t){void 0===po[i]&&(po[i]={id:i,styles:[],textStyles:[]}),null!=t&&t.forEach(function(t){var e;t.match("color")&&(e=t.replace("fill","bgFill").replace("color","fill"),po[i].textStyles.push(e)),po[i].styles.push(t)})},setDirection:function(t){"TD"===(ao=(ao=(ao=(ao=(ao=t).match(/.*</)?"RL":ao).match(/.*\^/)?"BT":ao).match(/.*>/)?"LR":ao).match(/.*v/)?"TB":ao)&&(ao="TB")},setClass:To,setTooltip:function(t,e){t.split(",").forEach(function(t){void 0!==e&&(fo["gen-1"===oo?_o(t):t]=ko(e))})},getTooltip:function(t){return fo[t]},setClickEvent:function(t,i,s){t.split(",").forEach(function(t){{var r=i,a=s;let e=_o(t);if("loose"===Hi().securityLevel&&void 0!==r){let i=[];if("string"==typeof a){i=a.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<i.length;e++){let t=i[e].trim();'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),i[e]=t}}0===i.length&&i.push(t),void 0!==ho[t]&&(ho[t].haveCallback=!0,xo.push(function(){var t=document.querySelector(`[id="${e}"]`);null!==t&&t.addEventListener("click",function(){Ri.runFunc(r,...i)},!1)}))}}}),To(t,"clickable")},setLink:function(t,e,i){t.split(",").forEach(function(t){void 0!==ho[t]&&(ho[t].link=Ri.formatUrl(e,co),ho[t].linkTarget=i)}),To(t,"clickable")},bindFunctions:function(e){xo.forEach(function(t){t(e)})},getDirection:function(){return ao.trim()},getVertices:function(){return ho},getEdges:function(){return uo},getClasses:function(){return po},clear:function(t="gen-1"){ho={},po={},uo=[],xo=[Eo],go=[],yo={},mo=0,fo=[],bo=!0,oo=t,kr()},setGen:t=>{oo=t||"gen-2"},defaultStyle:function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},addSubGraph:function(t,e,i){let r=t.trim(),a=i,s=(t===i&&i.match(/\s/)&&(r=void 0),[]);var{nodeList:t,dir:i}=function(t){const i={boolean:{},number:{},string:{}},r=[];let a;return{nodeList:t.filter(function(t){var e=typeof t;return t.stmt&&"dir"===t.stmt?(a=t.value,!1):""!==t.trim()&&(e in i?!i[e].hasOwnProperty(t)&&(i[e][t]=!0):!r.includes(t)&&r.push(t))}),dir:a}}(s.concat.apply(s,e));if(s=t,"gen-1"===oo)for(let t=0;t<s.length;t++)s[t]=_o(s[t]);r=r||"subGraph"+mo,a=a||"",a=ko(a),mo+=1;e={id:r,nodes:s,title:a.trim(),classes:[],dir:i};return pt.info("Adding",e.id,e.nodes,e.dir),e.nodes=Lo(e,go).nodes,go.push(e),yo[r]=e,r},getDepthFirstPos:function(t){return wo[t]},indexNodes:function(){So=-1,0<go.length&&Ao("none",go.length-1)},getSubGraphs:function(){return go},destructLink:(n,r)=>{var t,e=(()=>{var t=n.trim();let e=t.slice(0,-1),i="arrow_open";switch(t.slice(-1)){case"x":i="arrow_cross","x"===t[0]&&(i="double_"+i,e=e.slice(1));break;case">":i="arrow_point","<"===t[0]&&(i="double_"+i,e=e.slice(1));break;case"o":i="arrow_circle","o"===t[0]&&(i="double_"+i,e=e.slice(1))}let r="normal",a=e.length-1;"="===e[0]&&(r="thick");var s=(e=>{var i=e.length;let r=0;for(let t=0;t<i;++t)"."===e[t]&&++r;return r})(e);return s&&(r="dotted",a=s),{type:i,stroke:r,length:a}})();if(r){if((t=(()=>{let t=r.trim(),e="arrow_open";switch(t[0]){case"<":e="arrow_point",t=t.slice(1);break;case"x":e="arrow_cross",t=t.slice(1);break;case"o":e="arrow_circle",t=t.slice(1)}let i="normal";return t.includes("=")&&(i="thick"),t.includes(".")&&(i="dotted"),{type:e,stroke:i}})()).stroke!==e.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===t.type)t.type=e.type;else{if(t.type!==e.type)return{type:"INVALID",stroke:"INVALID"};t.type="double_"+t.type}return"double_arrow"===t.type&&(t.type="double_arrow_point"),t.length=e.length,t}return e},lex:{firstGraph:()=>!!bo&&!(bo=!1)},exists:Bo,makeUniq:Lo,setDiagramTitle:vr,getDiagramTitle:Sr},Io={},Oo=function(t){for(const e of Object.keys(t))Io[e]=t[e]},Fo={},No=function(o,l,t,e,c,h){const d=e.select(`[id="${t}"]`);Object.keys(o).forEach(function(t){t=o[t];let e="default";0<t.classes.length&&(e=t.classes.join(" "));var i=Ci(t.styles);let r,a=void 0!==t.text?t.text:t.id;if(Ct(Hi().flowchart.htmlLabels)){const o={label:a.replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)};(r=st(d,o).node()).parentNode.removeChild(r)}else{const o=c.createElementNS("http://www.w3.org/2000/svg","text"),l=(o.setAttribute("style",i.labelStyle.replace("color:","fill:")),a.split(Et.lineBreakRegex));for(const t of l){const l=c.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","1"),l.textContent=t,o.appendChild(l)}r=o}let s=0,n="";switch(t.type){case"round":s=5,n="rect";break;case"square":case"group":default:n="rect";break;case"diamond":n="question";break;case"hexagon":n="hexagon";break;case"odd":case"odd_right":n="rect_left_inv_arrow";break;case"lean_right":n="lean_right";break;case"lean_left":n="lean_left";break;case"trapezoid":n="trapezoid";break;case"inv_trapezoid":n="inv_trapezoid";break;case"circle":n="circle";break;case"ellipse":n="ellipse";break;case"stadium":n="stadium";break;case"subroutine":n="subroutine";break;case"cylinder":n="cylinder";break;case"doublecircle":n="doublecircle"}l.setNode(t.id,{labelStyle:i.labelStyle,shape:n,labelText:a,rx:s,ry:s,class:e,style:i.style,id:t.id,link:t.link,linkTarget:t.linkTarget,tooltip:h.db.getTooltip(t.id)||"",domId:h.db.lookUpDomId(t.id),haveCallback:t.haveCallback,width:"group"===t.type?500:void 0,dir:t.dir,type:t.type,props:t.props,padding:Hi().flowchart.padding}),pt.info("setNode",{labelStyle:i.labelStyle,shape:n,labelText:a,rx:s,ry:s,class:e,style:i.style,id:t.id,domId:h.db.lookUpDomId(t.id),width:"group"===t.type?500:void 0,type:t.type,dir:t.dir,props:t.props,padding:Hi().flowchart.padding})})},$o=function(o,l,t){pt.info("abc78 edges = ",o);let c,h,d=0,u={};if(void 0!==o.defaultStyle){const l=Ci(o.defaultStyle);c=l.style,h=l.labelStyle}o.forEach(function(t){d++;var e="L-"+t.start+"-"+t.end,i=(void 0===u[e]?u[e]=0:u[e]++,pt.info("abc78 new entry",e,u[e]),e+"-"+u[e]),e=(pt.info("abc78 new link id to be used is",e,i,u[e]),"LS-"+t.start),r="LE-"+t.end,a={style:"",labelStyle:""};switch(a.minlen=t.length||1,"arrow_open"===t.type?a.arrowhead="none":a.arrowhead="normal",a.arrowTypeStart="arrow_open",a.arrowTypeEnd="arrow_open",t.type){case"double_arrow_cross":a.arrowTypeStart="arrow_cross";case"arrow_cross":a.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":a.arrowTypeStart="arrow_point";case"arrow_point":a.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":a.arrowTypeStart="arrow_circle";case"arrow_circle":a.arrowTypeEnd="arrow_circle"}let s="",n="";switch(t.stroke){case"normal":s="fill:none;",void 0!==c&&(s=c),void 0!==h&&(n=h),a.thickness="normal",a.pattern="solid";break;case"dotted":a.thickness="normal",a.pattern="dotted",a.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":a.thickness="thick",a.pattern="solid",a.style="stroke-width: 3.5px;fill:none;"}if(void 0!==t.style){const o=Ci(t.style);s=o.style,n=o.labelStyle}a.style=a.style+=s,a.labelStyle=a.labelStyle+=n,void 0!==t.interpolate?a.curve=ki(t.interpolate,m):void 0!==o.defaultInterpolate?a.curve=ki(o.defaultInterpolate,m):a.curve=ki(Fo.curve,m),void 0===t.text?void 0!==t.style&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c"),a.labelType="text",a.label=t.text.replace(Et.lineBreakRegex,"\n"),void 0===t.style&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),a.labelStyle=a.labelStyle.replace("color:","fill:"),a.id=i,a.classes="flowchart-link "+e+" "+r,l.setEdge(t.start,t.end,a,d)})},Ro={setConf:function(t){for(const e of Object.keys(t))Fo[e]=t[e]},addVertices:No,addEdges:$o,getClasses:function(t,e){pt.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch(t){}},draw:function(t,s,e,i){pt.info("Drawing flowchart"),i.db.clear(),Do.setGen("gen-2"),i.parser.parse(t);let a=i.db.getDirection();void 0===a&&(a="TD");const{securityLevel:n,flowchart:o}=Hi(),l=o.nodeSpacing||50,c=o.rankSpacing||50;let h;"sandbox"===n&&(h=r("#i"+s));const d=r("sandbox"===n?h.nodes()[0].contentDocument.body:"body"),u="sandbox"===n?h.nodes()[0].contentDocument:document,p=new tt.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:a,nodesep:l,ranksep:c,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let g;var y=i.db.getSubGraphs();pt.info("Subgraphs - ",y);for(let t=y.length-1;0<=t;t--)g=y[t],pt.info("Subgraph - ",g),i.db.addVertex(g.id,g.title,"group",void 0,g.classes,g.dir);const f=i.db.getVertices(),m=i.db.getEdges();pt.info("Edges",m);let b=0;for(b=y.length-1;0<=b;b--){g=y[b],v("cluster").append("text");for(let t=0;t<g.nodes.length;t++)pt.info("Setting up subgraphs",g.nodes[t],g.id),p.setParent(g.nodes[t],g.id)}No(f,p,s,d,u,i),$o(m,p);var t=d.select(`[id="${s}"]`),x=d.select("#"+s+" g");if(Ia(x,p,["point","circle","cross"],"flowchart",s),Ri.insertTitle(t,"flowchartTitleText",o.titleTopMargin,i.db.getDiagramTitle()),er(p,t,o.diagramPadding,o.useMaxWidth),i.db.indexNodes("subGraph"+b),!o.htmlLabels){const t=u.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const s of t){const t=s.getBBox(),e=u.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("rx",0),e.setAttribute("ry",0),e.setAttribute("width",t.width),e.setAttribute("height",t.height),s.insertBefore(e,s.firstChild)}}Object.keys(f).forEach(function(t){var e=f[t];if(e.link){var i=r("#"+s+' [id="'+t+'"]');if(i){const t=u.createElementNS("http://www.w3.org/2000/svg","a"),s=(t.setAttributeNS("http://www.w3.org/2000/svg","class",e.classes.join(" ")),t.setAttributeNS("http://www.w3.org/2000/svg","href",e.link),t.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===n?t.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):e.linkTarget&&t.setAttributeNS("http://www.w3.org/2000/svg","target",e.linkTarget),i.insert(function(){return t},":first-child")),r=i.select(".label-container"),a=(r&&s.append(function(){return r.node()}),i.select(".label"));a&&s.append(function(){return a.node()})}}})}};var Mo=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e=[1,3],i=[1,5],r=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],a=[1,15],s=[1,16],n=[1,17],o=[1,18],l=[1,19],c=[1,20],h=[1,21],d=[1,22],u=[1,23],p=[1,24],g=[1,25],y=[1,26],f=[1,27],m=[1,29],b=[1,31],x=[1,34],k=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],e={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 2:return s[o-1];case 3:case 7:case 8:this.$=[];break;case 4:s[o-1].push(s[o]),this.$=s[o-1];break;case 5:case 6:this.$=s[o];break;case 9:r.setDateFormat(s[o].substr(11)),this.$=s[o].substr(11);break;case 10:r.enableInclusiveEndDates(),this.$=s[o].substr(18);break;case 11:r.TopAxis(),this.$=s[o].substr(8);break;case 12:r.setAxisFormat(s[o].substr(11)),this.$=s[o].substr(11);break;case 13:r.setTickInterval(s[o].substr(13)),this.$=s[o].substr(13);break;case 14:r.setExcludes(s[o].substr(9)),this.$=s[o].substr(9);break;case 15:r.setIncludes(s[o].substr(9)),this.$=s[o].substr(9);break;case 16:r.setTodayMarker(s[o].substr(12)),this.$=s[o].substr(12);break;case 17:r.setDiagramTitle(s[o].substr(6)),this.$=s[o].substr(6);break;case 18:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 19:case 20:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 21:r.addSection(s[o].substr(8)),this.$=s[o].substr(8);break;case 23:r.addTask(s[o-1],s[o]),this.$="task";break;case 27:this.$=s[o-1],r.setClickEvent(s[o-1],s[o],null);break;case 28:this.$=s[o-2],r.setClickEvent(s[o-2],s[o-1],s[o]);break;case 29:this.$=s[o-2],r.setClickEvent(s[o-2],s[o-1],null),r.setLink(s[o-2],s[o]);break;case 30:this.$=s[o-3],r.setClickEvent(s[o-3],s[o-2],s[o-1]),r.setLink(s[o-3],s[o]);break;case 31:this.$=s[o-2],r.setClickEvent(s[o-2],s[o],null),r.setLink(s[o-2],s[o-1]);break;case 32:this.$=s[o-3],r.setClickEvent(s[o-3],s[o-1],s[o]),r.setLink(s[o-3],s[o-2]);break;case 33:this.$=s[o-1],r.setLink(s[o-1],s[o]);break;case 34:case 40:this.$=s[o-1]+" "+s[o];break;case 35:case 36:case 38:this.$=s[o-2]+" "+s[o-1]+" "+s[o];break;case 37:case 39:this.$=s[o-3]+" "+s[o-2]+" "+s[o-1]+" "+s[o];break;case 41:r.parseDirective("%%{","open_directive");break;case 42:r.parseDirective(s[o],"type_directive");break;case 43:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 44:r.parseDirective("}%%","close_directive","gantt")}},table:[{3:1,4:2,5:e,30:4,40:i},{1:[3]},{3:6,4:2,5:e,30:4,40:i},t(r,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:a,13:s,14:n,15:o,16:l,17:c,18:h,19:d,20:u,21:p,23:g,25:y,26:f,27:28,28:m,30:4,35:b,40:i},{32:32,33:[1,33],43:x},t([33,43],[2,42]),t(r,[2,8],{1:[2,2]}),t(r,[2,4]),{4:30,10:35,12:a,13:s,14:n,15:o,16:l,17:c,18:h,19:d,20:u,21:p,23:g,25:y,26:f,27:28,28:m,30:4,35:b,40:i},t(r,[2,6]),t(r,[2,7]),t(r,[2,9]),t(r,[2,10]),t(r,[2,11]),t(r,[2,12]),t(r,[2,13]),t(r,[2,14]),t(r,[2,15]),t(r,[2,16]),t(r,[2,17]),{22:[1,36]},{24:[1,37]},t(r,[2,20]),t(r,[2,21]),t(r,[2,22]),{29:[1,38]},t(r,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},t(r,[2,5]),t(r,[2,18]),t(r,[2,19]),t(r,[2,23]),t(r,[2,27],{37:[1,44],38:[1,45]}),t(r,[2,33],{36:[1,46]}),t(k,[2,25]),{32:47,43:x},{43:[2,43]},t(r,[2,28],{38:[1,48]}),t(r,[2,29]),t(r,[2,31],{37:[1,49]}),{11:[1,50]},t(r,[2,30]),t(r,[2,32]),t(k,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};a={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:case 20:case 23:case 26:case 29:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:case 13:case 14:case 16:case 17:case 18:break;case 15:return 11;case 19:this.begin("href");break;case 21:return 38;case 22:this.begin("callbackname");break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 27:return 37;case 28:this.begin("click");break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};function _(){this.yy={}}return e.lexer=a,new((_.prototype=e).Parser=_)}();const Po=Mo.parser=Mo,zo=t=>null!==t.match(/^\s*gantt/);e.extend(lt),e.extend(ct),e.extend(ht);let jo,Yo="",Wo="",qo="",Uo=[],Vo=[],Ho={},Go=[],Xo=[],Ko="";const Qo=["active","done","crit","milestone"];let Zo=[],Jo=!1,tl=!1,el=0;const il=function(t,e,i,r){return!r.includes(t.format(e.trim()))&&(!!(6<=t.isoWeekday()&&i.includes("weekends"))||!!i.includes(t.format("dddd").toLowerCase())||i.includes(t.format(e.trim())))},rl=function(r,a,s,n){if(s.length&&!r.manualEndTime){let t,i;t=(t=r.startTime instanceof Date?e(r.startTime):e(r.startTime,a,!0)).add(1,"d"),i=r.endTime instanceof Date?e(r.endTime):e(r.endTime,a,!0);var[a,s]=nl(t,i,a,s,n);r.endTime=a.toDate(),r.renderEndTime=s}},nl=function(t,e,i,r,a){let s=!1,n=null;for(;t<=e;)s||(n=e.toDate()),(s=il(t,i,r,a))&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,n]},sl=function(t,i,r){r=r.trim();var a=/^after\s+([\d\w- ]+)/.exec(r.trim());if(null!==a){let e=null;if(a[1].split(" ").forEach(function(t){t=gl(t);void 0!==t&&(!e||t.endTime>e.endTime)&&(e=t)}),e)return e.endTime;{const t=new Date;return t.setHours(0,0,0,0),t}}a=e(r,i.trim(),!0);if(a.isValid())return a.toDate();{pt.debug("Invalid date:"+r),pt.debug("With date format:"+i.trim());const t=new Date(r);if(void 0===t||isNaN(t.getTime()))throw new Error("Invalid date:"+r);return t}},al=function(t){t=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return null!==t?[Number.parseFloat(t[1]),t[2]]:[NaN,"ms"]},ol=function(t,i,r,a=!1){r=r.trim();let s=e(r,i.trim(),!0);if(s.isValid())return(s=a?s.add(1,"d"):s).toDate();let n=e(t);var[i,a]=al(r);if(!Number.isNaN(i)){const t=n.add(i,a);t.isValid()&&(n=t)}return n.toDate()};let ll=0;const cl=function(t){return void 0===t?"task"+(ll+=1):t};let hl,dl,ul=[];const pl={},gl=function(t){t=pl[t];return ul[t]},yl=function(){function t(t){var i,r=ul[t];switch(ul[t].raw.startTime.type){case"prevTaskEnd":{const t=gl(r.prevTaskId);r.startTime=t.endTime;break}case"getStartDate":(i=sl(0,Yo,ul[t].raw.startTime.startData))&&(ul[t].startTime=i)}ul[t].startTime&&(ul[t].endTime=ol(ul[t].startTime,Yo,ul[t].raw.endTime.data,Jo),ul[t].endTime)&&(ul[t].processed=!0,ul[t].manualEndTime=e(ul[t].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),rl(ul[t],Yo,Vo,Uo)),ul[t].processed}let i=!0;for(const[e,r]of ul.entries())t(e),i=i&&r.processed;return i},fl=function(t,e){t.split(",").forEach(function(t){t=gl(t);void 0!==t&&t.classes.push(e)})},ml=function(e,i){Zo.push(function(){var t=document.querySelector(`[id="${e}"]`);null!==t&&t.addEventListener("click",function(){i()})},function(){var t=document.querySelector(`[id="${e}-text"]`);null!==t&&t.addEventListener("click",function(){i()})})},bl={parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},getConfig:()=>Hi().gantt,clear:function(){Go=[],Xo=[],Ko="",Zo=[],ll=0,hl=void 0,dl=void 0,ul=[],Yo="",Wo="",jo=void 0,qo="",Uo=[],Vo=[],Jo=!1,tl=!1,el=0,Ho={},kr()},setDateFormat:function(t){Yo=t},getDateFormat:function(){return Yo},enableInclusiveEndDates:function(){Jo=!0},endDatesAreInclusive:function(){return Jo},enableTopAxis:function(){tl=!0},topAxisEnabled:function(){return tl},setAxisFormat:function(t){Wo=t},getAxisFormat:function(){return Wo},setTickInterval:function(t){jo=t},getTickInterval:function(){return jo},setTodayMarker:function(t){qo=t},getTodayMarker:function(){return qo},setAccTitle:_r,getAccTitle:Cr,setDiagramTitle:vr,getDiagramTitle:Sr,setAccDescription:Tr,getAccDescription:Er,addSection:function(t){Ko=t,Go.push(t)},getSections:function(){return Go},getTasks:function(){let t=yl(),e=0;for(;!t&&e<10;)t=yl(),e++;return Xo=ul},addTask:function(t,e){t={section:Ko,type:Ko,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},e=function(t,e){var i=(":"===e.substr(0,1)?e.substr(1,e.length):e).split(","),r={};xl(i,r,Qo);for(let t=0;t<i.length;t++)i[t]=i[t].trim();switch(i.length){case 1:r.id=cl(),r.startTime={type:"prevTaskEnd",id:t},r.endTime={data:i[0]};break;case 2:r.id=cl(),r.startTime={type:"getStartDate",startData:i[0]},r.endTime={data:i[1]};break;case 3:r.id=cl(i[0]),r.startTime={type:"getStartDate",startData:i[1]},r.endTime={data:i[2]}}return r}(dl,e),t.raw.startTime=e.startTime,t.raw.endTime=e.endTime,t.id=e.id,t.prevTaskId=dl,t.active=e.active,t.done=e.done,t.crit=e.crit,t.milestone=e.milestone,t.order=el,el++,e=ul.push(t);dl=t.id,pl[t.id]=e-1},findTaskById:gl,addTaskOrg:function(t,i){t={section:Ko,type:Ko,description:t,task:t,classes:[]},i=function(t,i){var r=(":"===i.substr(0,1)?i.substr(1,i.length):i).split(","),a={};xl(r,a,Qo);for(let t=0;t<r.length;t++)r[t]=r[t].trim();let s="";switch(r.length){case 1:a.id=cl(),a.startTime=t.endTime,s=r[0];break;case 2:a.id=cl(),a.startTime=sl(0,Yo,r[0]),s=r[1];break;case 3:a.id=cl(r[0]),a.startTime=sl(0,Yo,r[1]),s=r[2]}return s&&(a.endTime=ol(a.startTime,Yo,s,Jo),a.manualEndTime=e(s,"YYYY-MM-DD",!0).isValid(),rl(a,Yo,Vo,Uo)),a}(hl,i);t.startTime=i.startTime,t.endTime=i.endTime,t.id=i.id,t.active=i.active,t.done=i.done,t.crit=i.crit,t.milestone=i.milestone,hl=t,Xo.push(t)},setIncludes:function(t){Uo=t.toLowerCase().split(/[\s,]+/)},getIncludes:function(){return Uo},setExcludes:function(t){Vo=t.toLowerCase().split(/[\s,]+/)},getExcludes:function(){return Vo},setClickEvent:function(t,i,a){t.split(",").forEach(function(t){var e=i,r=a;if("loose"===Hi().securityLevel&&void 0!==e){let i=[];if("string"==typeof r){i=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<i.length;e++){let t=i[e].trim();'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),i[e]=t}}0===i.length&&i.push(t),void 0!==gl(t)&&ml(t,()=>{Ri.runFunc(e,...i)})}}),fl(t,"clickable")},setLink:function(t,e){let r=e;"loose"!==Hi().securityLevel&&(r=i(e)),t.split(",").forEach(function(t){void 0!==gl(t)&&(ml(t,()=>{window.open(r,"_self")}),Ho[t]=r)}),fl(t,"clickable")},getLinks:function(){return Ho},bindFunctions:function(e){Zo.forEach(function(t){t(e)})},parseDuration:al,isInvalidDate:il};function xl(i,r,t){let a=!0;for(;a;)a=!1,t.forEach(function(t){var e=new RegExp("^\\s*"+t+"\\s*$");i[0].match(e)&&(r[t]=!0,i.shift(1),a=!0)})}let kl;const _l={setConf:function(){pt.debug("Something is calling, setConf, remove the call")},draw:function(t,i,Q,a){const o=Hi().gantt,s=Hi().securityLevel;let n;"sandbox"===s&&(n=r("#i"+i));const Z=r("sandbox"===s?n.nodes()[0].contentDocument.body:"body"),l="sandbox"===s?n.nodes()[0].contentDocument:document,c=l.getElementById(i);void 0===(kl=c.parentElement.offsetWidth)&&(kl=1200),void 0!==o.useWidth&&(kl=o.useWidth);var h=a.db.getTasks(),d=h.length*(o.barHeight+o.barGap)+2*o.topPadding;c.setAttribute("viewBox","0 0 "+kl+" "+d);const u=Z.select(`[id="${i}"]`),p=S().domain([w(h,function(t){return t.startTime}),A(h,function(t){return t.endTime})]).rangeRound([0,kl-o.leftPadding-o.rightPadding]);let g=[];for(const t of h)g.push(t.type);const J=g;g=function(i){var r={},a=[];for(let t=0,e=i.length;t<e;++t)Object.prototype.hasOwnProperty.call(r,i[t])||(r[i[t]]=!0,a.push(i[t]));return a}(g),h.sort(function(t,e){t=t.startTime,e=e.startTime;let i=0;return e<t?i=1:t<e&&(i=-1),i});var y,f,tt=kl,m=d,b=o.barHeight,x=b+o.barGap,k=o.topPadding,_=o.leftPadding,et=(B().domain([0,g.length]).range(["#00B9FA","#F95002"]).interpolate(L),x),C=k,it=_,rt=m,v=h,at=a.db.getExcludes(),st=a.db.getIncludes(),T=v.reduce((t,{startTime:e})=>t?Math.min(t,e):e,0),nt=v.reduce((t,{endTime:e})=>t?Math.max(t,e):e,0),ot=a.db.getDateFormat();if(T&&nt){var lt=[];let t=null,i=e(T);for(;i.valueOf()<=nt;)a.db.isInvalidDate(i,ot,at,st)?t?t.end=i:t={start:i,end:i}:t&&(lt.push(t),t=null),i=i.add(1,"d");u.append("g").selectAll("rect").data(lt).enter().append("rect").attr("id",function(t){return"exclude-"+t.start.format("YYYY-MM-DD")}).attr("x",function(t){return p(t.start)+it}).attr("y",o.gridLineStartPadding).attr("width",function(t){var e=t.end.add(1,"day");return p(e)-p(t.start)}).attr("height",rt-C-o.gridLineStartPadding).attr("transform-origin",function(t,e){return(p(t.start)+it+.5*(p(t.end)-p(t.start))).toString()+"px "+(e*et+.5*rt).toString()+"px"}).attr("class","exclude-range")}var E=_,v=k,T=m,P=D(p).tickSize(-T+v+o.gridLineStartPadding).tickFormat(I(a.db.getAxisFormat()||o.axisFormat||"%Y-%m-%d"));if(null!==(C=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(a.db.getTickInterval()||o.tickInterval))){const E=C[1];switch(C[2]){case"minute":P.ticks(R.every(E));break;case"hour":P.ticks($.every(E));break;case"day":P.ticks(N.every(E));break;case"week":P.ticks(F.every(E));break;case"month":P.ticks(O.every(E))}}if(u.append("g").attr("class","grid").attr("transform","translate("+E+", "+(T-50)+")").call(P).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),a.db.topAxisEnabled()||o.topAxis){var H=M(p).tickSize(-T+v+o.gridLineStartPadding).tickFormat(I(a.db.getAxisFormat()||o.axisFormat||"%Y-%m-%d"));if(null!==C){const E=C[1];switch(C[2]){case"minute":H.ticks(R.every(E));break;case"hour":H.ticks($.every(E));break;case"day":H.ticks(N.every(E));break;case"week":H.ticks(F.every(E));break;case"month":H.ticks(O.every(E))}}u.append("g").attr("class","grid").attr("transform","translate("+E+", "+v+")").call(H).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}{T=h;var V=x,U=k,z=_,j=b,W=tt;u.append("g").selectAll("rect").data(T).enter().append("rect").attr("x",0).attr("y",function(t,e){return t.order*V+U-2}).attr("width",function(){return W-o.rightPadding/2}).attr("height",V).attr("class",function(t){for(var[e,i]of g.entries())if(t.type===i)return"section section"+e%o.numberSectionStyles;return"section section0"});const G=u.append("g").selectAll("rect").data(T).enter(),X=a.db.getLinks();if(G.append("rect").attr("id",function(t){return t.id}).attr("rx",3).attr("ry",3).attr("x",function(t){return t.milestone?p(t.startTime)+z+.5*(p(t.endTime)-p(t.startTime))-.5*j:p(t.startTime)+z}).attr("y",function(t,e){return t.order*V+U}).attr("width",function(t){return t.milestone?j:p(t.renderEndTime||t.endTime)-p(t.startTime)}).attr("height",j).attr("transform-origin",function(t,e){return e=t.order,(p(t.startTime)+z+.5*(p(t.endTime)-p(t.startTime))).toString()+"px "+(e*V+U+.5*j).toString()+"px"}).attr("class",function(t){const e="task";let i="",r=(0<t.classes.length&&(i=t.classes.join(" ")),0);for(const[e,i]of g.entries())t.type===i&&(r=e%o.numberSectionStyles);let a="";return t.active?t.crit?a+=" activeCrit":a=" active":t.done?a=t.crit?" doneCrit":" done":t.crit&&(a+=" crit"),0===a.length&&(a=" task"),t.milestone&&(a=" milestone "+a),a=(a+=r)+(" "+i),e+a}),G.append("text").attr("id",function(t){return t.id+"-text"}).text(function(t){return t.task}).attr("font-size",o.fontSize).attr("x",function(t){let e=p(t.startTime),i=p(t.renderEndTime||t.endTime);t.milestone&&(e+=.5*(p(t.endTime)-p(t.startTime))-.5*j),t.milestone&&(i=e+j);t=this.getBBox().width;return t>i-e?i+t+1.5*o.leftPadding>W?e+z-5:i+z+5:(i-e)/2+e+z}).attr("y",function(t,e){return t.order*V+o.barHeight/2+(o.fontSize/2-2)+U}).attr("text-height",j).attr("class",function(t){const e=p(t.startTime);let i=p(t.endTime);t.milestone&&(i=e+j);var r=this.getBBox().width;let a="",s=(0<t.classes.length&&(a=t.classes.join(" ")),0);for(const[e,i]of g.entries())t.type===i&&(s=e%o.numberSectionStyles);let n="";return t.active&&(n=t.crit?"activeCritText"+s:"activeText"+s),t.done?n=t.crit?n+" doneCritText"+s:n+" doneText"+s:t.crit&&(n=n+" critText"+s),t.milestone&&(n+=" milestoneText"),r>i-e?i+r+1.5*o.leftPadding>W?a+" taskTextOutsideLeft taskTextOutside"+s+" "+n:a+" taskTextOutsideRight taskTextOutside"+s+" "+n+" width-"+r:a+" taskText taskText"+s+" "+n+" width-"+r}),"sandbox"===Hi().securityLevel){const V=r("#i"+i).nodes()[0].contentDocument;G.filter(function(t){return void 0!==X[t.id]}).each(function(t){var e=V.querySelector("#"+t.id),i=V.querySelector("#"+t.id+"-text"),r=e.parentNode,a=V.createElement("a");a.setAttribute("xlink:href",X[t.id]),a.setAttribute("target","_top"),r.appendChild(a),a.appendChild(e),a.appendChild(i)})}}{var Y=x,q=k;const K=[];let r=0;for(const[Y,q]of g.entries())K[Y]=[q,(y=q,f=J,function(t){let e=t.length;for(var i={};e;)i[t[--e]]=(i[t[e]]||0)+1;return i}(f)[y]||0)];u.append("g").selectAll("text").data(K).enter().append(function(t){const e=t[0].split(Et.lineBreakRegex),i=-(e.length-1)/2,r=l.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("dy",i+"em");for(const[t,i]of e.entries()){const e=l.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttribute("alignment-baseline","central"),e.setAttribute("x","10"),0<t&&e.setAttribute("dy","1em"),e.textContent=i,r.appendChild(e)}return r}).attr("x",10).attr("y",function(e,i){if(!(0<i))return e[1]*Y/2+q;{let t=0;if(t<i)return r+=K[i-1][1],e[1]*Y/2+r*Y+q}}).attr("font-size",o.sectionFontSize).attr("font-size",o.sectionFontSize).attr("class",function(t){for(var[e,i]of g.entries())if(t[0]===i)return"sectionTitle sectionTitle"+e%o.numberSectionStyles;return"sectionTitle"})}C=_,E=m,"off"!==(v=a.db.getTodayMarker())&&(h=u.append("g").attr("class","today"),b=new Date,(h=h.append("line")).attr("x1",p(b)+C).attr("x2",p(b)+C).attr("y1",o.titleTopMargin).attr("y2",E-o.titleTopMargin).attr("class","today"),""!==v)&&h.attr("style",v.replace(/,/g,";")),tr(u,d,kl,o.useMaxWidth),u.append("text").text(a.db.getDiagramTitle()).attr("x",kl/2).attr("y",o.titleTopMargin).attr("class","titleText")}};var Cl=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e,i=[6,9,10],i={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(t,e,i,r,a,s,n){switch(s.length,a){case 1:return r;case 4:break;case 6:r.setInfo(!0)}},table:[{3:1,4:[1,2]},{1:[3]},t(i,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(i,[2,3]),t(i,[2,4]),t(i,[2,5]),t(i,[2,6])],defaultActions:{4:[2,1]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};e={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,r){switch(i){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};function r(){this.yy={}}return i.lexer=e,new((r.prototype=i).Parser=r)}();const Tl=Cl.parser=Cl;var El="",vl=!1;const Sl={setMessage:t=>{pt.debug("Setting message to: "+t),El=t},getMessage:()=>El,setInfo:t=>{vl=t},getInfo:()=>vl,clear:kr},wl={draw:(e,i,a)=>{try{pt.debug("Rendering info diagram\n"+e);var s=Hi().securityLevel;let t;"sandbox"===s&&(t=r("#i"+i));var n=r("sandbox"===s?t.nodes()[0].contentDocument.body:"body").select("#"+i);n.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+a),n.attr("height",100),n.attr("width",400)}catch(e){pt.error("Error while rendering info diagram"),pt.error(e.message)}}},Al=t=>null!==t.match(/^\s*info/);var Bl=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e=[1,4],i=[1,5],r=[1,6],a=[1,7],s=[1,9],n=[1,11,13,15,17,19,20,26,27,28,29],o=[2,5],l=[1,6,11,13,15,17,19,20,26,27,28,29],c=[26,27,28],h=[2,8],d=[1,18],u=[1,19],p=[1,20],g=[1,21],y=[1,22],f=[1,23],m=[1,28],b=[6,26,27,28,29],e={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 4:r.setShowData(!0);break;case 7:this.$=s[o-1];break;case 9:r.addSection(s[o-1],r.cleanupValue(s[o]));break;case 10:this.$=s[o].trim(),r.setDiagramTitle(this.$);break;case 11:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 12:case 13:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 14:r.addSection(s[o].substr(8)),this.$=s[o].substr(8);break;case 21:r.parseDirective("%%{","open_directive");break;case 22:r.parseDirective(s[o],"type_directive");break;case 23:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 24:r.parseDirective("}%%","close_directive","pie")}},table:[{3:1,4:2,5:3,6:e,21:8,26:i,27:r,28:a,29:s},{1:[3]},{3:10,4:2,5:3,6:e,21:8,26:i,27:r,28:a,29:s},{3:11,4:2,5:3,6:e,21:8,26:i,27:r,28:a,29:s},t(n,o,{7:12,8:[1,13]}),t(l,[2,18]),t(l,[2,19]),t(l,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},t(c,h,{21:8,9:16,10:17,5:24,1:[2,3],11:d,13:u,15:p,17:g,19:y,20:f,29:s}),t(n,o,{7:25}),{23:26,24:[1,27],32:m},t([24,32],[2,22]),t(n,[2,6]),{4:29,26:i,27:r,28:a},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},t(c,[2,13]),t(c,[2,14]),t(c,[2,15]),t(c,h,{21:8,9:16,10:17,5:24,1:[2,4],11:d,13:u,15:p,17:g,19:y,20:f,29:s}),t(b,[2,16]),{25:34,31:[1,35]},t(b,[2,24]),t(n,[2,7]),t(c,[2,9]),t(c,[2,10]),t(c,[2,11]),t(c,[2,12]),{23:36,32:m},{32:[2,23]},t(b,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};l={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:case 6:case 8:case 9:break;case 7:return 26;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:case 20:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};function x(){this.yy={}}return e.lexer=l,new((x.prototype=e).Parser=x)}();const Ll=Bl.parser=Bl,Dl=t=>null!==t.match(/^\s*pie/)||null!==t.match(/^\s*bar/);let Il={},Ol=!1;const Fl={parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},getConfig:()=>Hi().pie,addSection:function(t,e){t=Et.sanitizeText(t,Hi()),void 0===Il[t]&&(Il[t]=e,pt.debug("Added new section :",t))},getSections:()=>Il,cleanupValue:function(t){return":"===t.substring(0,1)&&(t=t.substring(1).trim()),Number(t.trim())},clear:function(){Il={},Ol=!1,kr()},setAccTitle:_r,getAccTitle:Cr,setDiagramTitle:vr,getDiagramTitle:Sr,setShowData:function(t){Ol=t},getShowData:function(){return Ol},getAccDescription:Er,setAccDescription:Tr};let Nl,$l=Hi();const Rl=450,Ml={draw:(e,i,a,s)=>{try{$l=Hi(),pt.debug("Rendering info diagram\n"+e);const a=Hi().securityLevel;let t;"sandbox"===a&&(t=r("#i"+i));var n=r("sandbox"===a?t.nodes()[0].contentDocument.body:"body"),o="sandbox"===a?t.nodes()[0].contentDocument:document,l=(s.db.clear(),s.parser.parse(e),pt.debug("Parsed info diagram"),o.getElementById(i)),c=(void 0===(Nl=l.parentElement.offsetWidth)&&(Nl=1200),void 0!==$l.useWidth&&(Nl=$l.useWidth),void 0!==$l.pie.useWidth&&(Nl=$l.pie.useWidth),n.select("#"+i)),h=(tr(c,Rl,Nl,$l.pie.useMaxWidth),l.setAttribute("viewBox","0 0 "+Nl+" "+Rl),Math.min(Nl,Rl)/2-40),d=c.append("g").attr("transform","translate("+Nl/2+",225)"),u=s.db.getSections(),p=0,g=(Object.keys(u).forEach(function(t){p+=u[t]}),$l.themeVariables),y=[g.pie1,g.pie2,g.pie3,g.pie4,g.pie5,g.pie6,g.pie7,g.pie8,g.pie9,g.pie10,g.pie11,g.pie12],f=P().range(y),m=Object.entries(u).map(function(t,e){return{order:e,name:t[0],value:t[1]}}),b=z().value(function(t){return t.value}).sort(function(t,e){return t.order-e.order})(m),x=j().innerRadius(0).outerRadius(h),k=(d.selectAll("mySlices").data(b).enter().append("path").attr("d",x).attr("fill",function(t){return f(t.data.name)}).attr("class","pieCircle"),d.selectAll("mySlices").data(b).enter().append("text").text(function(t){return(t.data.value/p*100).toFixed(0)+"%"}).attr("transform",function(t){return"translate("+x.centroid(t)+")"}).style("text-anchor","middle").attr("class","slice"),d.append("text").text(s.db.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText"),d.selectAll(".legend").data(f.domain()).enter().append("g").attr("class","legend").attr("transform",function(t,e){return"translate(216,"+(22*e-22*f.domain().length/2)+")"}));k.append("rect").attr("width",18).attr("height",18).style("fill",f).style("stroke",f),k.data(b).append("text").attr("x",22).attr("y",14).text(function(t){return s.db.getShowData()||$l.showData||$l.pie.showData?t.data.name+" ["+t.data.value+"]":t.data.name})}catch(e){pt.error("Error while rendering info diagram"),pt.error(e)}}};var Pl=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e=[1,3],i=[1,5],r=[1,6],a=[1,7],s=[1,8],n=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],o=[1,22],l=[2,13],c=[1,26],h=[1,27],d=[1,28],u=[1,29],p=[1,30],g=[1,31],y=[1,24],f=[1,32],m=[1,33],b=[1,36],x=[71,72],k=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],_=[1,56],C=[1,57],v=[1,58],R=[1,59],M=[1,60],$=[1,61],P=[1,62],T=[62,63],E=[1,74],S=[1,70],w=[1,71],A=[1,72],B=[1,73],L=[1,75],D=[1,79],I=[1,80],O=[1,77],F=[1,78],N=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],e={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 6:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 7:case 8:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 9:r.parseDirective("%%{","open_directive");break;case 10:r.parseDirective(s[o],"type_directive");break;case 11:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 12:r.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:r.addRequirement(s[o-3],s[o-4]);break;case 20:r.setNewReqId(s[o-2]);break;case 21:r.setNewReqText(s[o-2]);break;case 22:r.setNewReqRisk(s[o-2]);break;case 23:r.setNewReqVerifyMethod(s[o-2]);break;case 26:this.$=r.RequirementType.REQUIREMENT;break;case 27:this.$=r.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=r.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=r.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=r.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=r.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=r.RiskLevel.LOW_RISK;break;case 33:this.$=r.RiskLevel.MED_RISK;break;case 34:this.$=r.RiskLevel.HIGH_RISK;break;case 35:this.$=r.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=r.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=r.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=r.VerifyType.VERIFY_TEST;break;case 39:r.addElement(s[o-3]);break;case 40:r.setNewElementType(s[o-2]);break;case 41:r.setNewElementDocRef(s[o-2]);break;case 44:r.addRelationship(s[o-2],s[o],s[o-4]);break;case 45:r.addRelationship(s[o-2],s[o-4],s[o]);break;case 46:this.$=r.Relationships.CONTAINS;break;case 47:this.$=r.Relationships.COPIES;break;case 48:this.$=r.Relationships.DERIVES;break;case 49:this.$=r.Relationships.SATISFIES;break;case 50:this.$=r.Relationships.VERIFIES;break;case 51:this.$=r.Relationships.REFINES;break;case 52:this.$=r.Relationships.TRACES}},table:[{3:1,4:2,6:e,9:4,14:i,16:r,18:a,19:s},{1:[3]},{3:10,4:2,5:[1,9],6:e,9:4,14:i,16:r,18:a,19:s},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},t(n,[2,8]),{20:[2,9]},{3:16,4:2,6:e,9:4,14:i,16:r,18:a,19:s},{1:[2,2]},{4:21,5:o,7:17,8:l,9:4,14:i,16:r,18:a,19:s,23:18,24:19,25:20,26:23,32:25,40:c,41:h,42:d,43:u,44:p,45:g,53:y,71:f,72:m},{11:34,12:[1,35],22:b},t([12,22],[2,10]),t(n,[2,6]),t(n,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:o,7:38,8:l,9:4,14:i,16:r,18:a,19:s,23:18,24:19,25:20,26:23,32:25,40:c,41:h,42:d,43:u,44:p,45:g,53:y,71:f,72:m},{4:21,5:o,7:39,8:l,9:4,14:i,16:r,18:a,19:s,23:18,24:19,25:20,26:23,32:25,40:c,41:h,42:d,43:u,44:p,45:g,53:y,71:f,72:m},{4:21,5:o,7:40,8:l,9:4,14:i,16:r,18:a,19:s,23:18,24:19,25:20,26:23,32:25,40:c,41:h,42:d,43:u,44:p,45:g,53:y,71:f,72:m},{4:21,5:o,7:41,8:l,9:4,14:i,16:r,18:a,19:s,23:18,24:19,25:20,26:23,32:25,40:c,41:h,42:d,43:u,44:p,45:g,53:y,71:f,72:m},{4:21,5:o,7:42,8:l,9:4,14:i,16:r,18:a,19:s,23:18,24:19,25:20,26:23,32:25,40:c,41:h,42:d,43:u,44:p,45:g,53:y,71:f,72:m},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},t(x,[2,26]),t(x,[2,27]),t(x,[2,28]),t(x,[2,29]),t(x,[2,30]),t(x,[2,31]),t(k,[2,55]),t(k,[2,56]),t(n,[2,4]),{13:51,21:[1,52]},t(n,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:_,65:C,66:v,67:R,68:M,69:$,70:P},{61:63,64:_,65:C,66:v,67:R,68:M,69:$,70:P},{11:64,22:b},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},t(T,[2,46]),t(T,[2,47]),t(T,[2,48]),t(T,[2,49]),t(T,[2,50]),t(T,[2,51]),t(T,[2,52]),{63:[1,68]},t(n,[2,5]),{5:E,29:69,30:S,33:w,35:A,37:B,39:L},{5:D,39:I,55:76,56:O,58:F},{32:81,71:f,72:m},{32:82,71:f,72:m},t(N,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:E,29:87,30:S,33:w,35:A,37:B,39:L},t(N,[2,25]),t(N,[2,39]),{31:[1,88]},{31:[1,89]},{5:D,39:I,55:90,56:O,58:F},t(N,[2,43]),t(N,[2,44]),t(N,[2,45]),{32:91,71:f,72:m},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},t(N,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},t(N,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:E,29:116,30:S,33:w,35:A,37:B,39:L},{5:E,29:117,30:S,33:w,35:A,37:B,39:L},{5:E,29:118,30:S,33:w,35:A,37:B,39:L},{5:E,29:119,30:S,33:w,35:A,37:B,39:L},{5:D,39:I,55:120,56:O,58:F},{5:D,39:I,55:121,56:O,58:F},t(N,[2,20]),t(N,[2,21]),t(N,[2,22]),t(N,[2,23]),t(N,[2,40]),t(N,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};o={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 53:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:case 15:case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 54:return"qString";case 55:return e.yytext=e.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};function H(){this.yy={}}return e.lexer=o,new((H.prototype=e).Parser=H)}();const zl=Pl.parser=Pl,jl=t=>null!==t.match(/^\s*requirement(Diagram)?/);let Yl=[],Wl={},ql={},Ul={},Vl={};const Hl={RequirementType:{REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel:{LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType:{VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships:{CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},getConfig:()=>Hi().req,addRequirement:(t,e)=>(void 0===ql[t]&&(ql[t]={name:t,type:e,id:Wl.id,text:Wl.text,risk:Wl.risk,verifyMethod:Wl.verifyMethod}),Wl={},ql[t]),getRequirements:()=>ql,setNewReqId:t=>{void 0!==Wl&&(Wl.id=t)},setNewReqText:t=>{void 0!==Wl&&(Wl.text=t)},setNewReqRisk:t=>{void 0!==Wl&&(Wl.risk=t)},setNewReqVerifyMethod:t=>{void 0!==Wl&&(Wl.verifyMethod=t)},setAccTitle:_r,getAccTitle:Cr,setAccDescription:Tr,getAccDescription:Er,addElement:t=>(void 0===Vl[t]&&(Vl[t]={name:t,type:Ul.type,docRef:Ul.docRef},pt.info("Added new requirement: ",t)),Ul={},Vl[t]),getElements:()=>Vl,setNewElementType:t=>{void 0!==Ul&&(Ul.type=t)},setNewElementDocRef:t=>{void 0!==Ul&&(Ul.docRef=t)},addRelationship:(t,e,i)=>{Yl.push({type:t,src:e,dst:i})},getRelationships:()=>Yl,clear:()=>{Yl=[],Wl={},ql={},Ul={},Vl={},kr()}},Gl={CONTAINS:"contains",ARROW:"arrow"},Xl=Gl,Kl=(t,e)=>{var i=t.append("defs").append("marker").attr("id",Gl.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");i.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),i.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),i.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",Gl.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,`+e.line_height).attr("stroke-width",1)};let Ql={},Zl=0;const Jl=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",Ql.rect_min_width+"px").attr("height",Ql.rect_min_height+"px"),tc=(t,e,i)=>{let r=Ql.rect_min_width/2,a=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",Ql.rect_padding).attr("dominant-baseline","hanging"),s=0;i.forEach(t=>{(0==s?a.append("tspan").attr("text-anchor","middle").attr("x",Ql.rect_min_width/2).attr("dy",0):a.append("tspan").attr("text-anchor","middle").attr("x",Ql.rect_min_width/2).attr("dy",.75*Ql.line_height)).text(t),s++});e=1.5*Ql.rect_padding+s*Ql.line_height*.75;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",Ql.rect_min_width).attr("y1",e).attr("y2",e),{titleNode:a,y:e}},ec=(t,e,i,r)=>{let a=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",Ql.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),s=0,n=[];return i.forEach(t=>{let e=t.length;for(;30<e&&s<3;){var i=t.substring(0,30);e=(t=t.substring(30,t.length)).length,n[n.length]=i,s++}var r;3==s?(r=n[n.length-1],n[n.length-1]=r.substring(0,r.length-4)+"..."):n[n.length]=t,s=0}),n.forEach(t=>{a.append("tspan").attr("x",Ql.rect_padding).attr("dy",Ql.line_height).text(t)}),a},ic=function(t,e,i,r,a){var i=i.edge(rc(e.src),rc(e.dst)),s=Y().x(function(t){return t.x}).y(function(t){return t.y}),r=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",s(i.points)).attr("fill","none");e.type==a.db.Relationships.CONTAINS?r.attr("marker-start","url("+Et.getUrl(Ql.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(r.attr("stroke-dasharray","10,7"),r.attr("marker-end","url("+Et.getUrl(Ql.arrowMarkerAbsolute)+"#"+Xl.ARROW+"_line_ending)")),s=t,i=r,a=`<<${e.type}>>`,t=i.node().getTotalLength(),i=i.node().getPointAtLength(.5*t),t="rel"+Zl,Zl++,a=s.append("text").attr("class","req relationshipLabel").attr("id",t).attr("x",i.x).attr("y",i.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(a).node().getBBox(),s.insert("rect","#"+t).attr("class","req reqLabelBox").attr("x",i.x-a.width/2).attr("y",i.y-a.height/2).attr("width",a.width).attr("height",a.height).attr("fill","white").attr("fill-opacity","85%")},rc=t=>t.replace(/\s/g,"").replace(/\./g,"_"),nc={draw:(t,e,i,a)=>{Ql=Hi().requirement,a.db.clear(),a.parser.parse(t);t=Ql.securityLevel;let s;"sandbox"===t&&(s=r("#i"+e));const n=r("sandbox"===t?s.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`),o=(Kl(n,Ql),new tt.Graph({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:Ql.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}}));var l,c,h,d,u,p,t=a.db.getRequirements(),g=a.db.getElements(),y=a.db.getRelationships(),f=t,m=o,b=n,t=(Object.keys(f).forEach(t=>{var e=f[t],i=(t=rc(t),pt.info("Added new requirement: ",t),b.append("g").attr("id",t)),r=Jl(i,"req-"+t),a=tc(i,t+"_title",[`<<${e.type}>>`,""+e.name]),i=(ec(i,t+"_body",["Id: "+e.id,"Text: "+e.text,"Risk: "+e.risk,"Verification: "+e.verifyMethod],a.y),r.node().getBBox());m.setNode(t,{width:i.width,height:i.height,shape:"rect",id:t})}),d=g,u=o,p=n,Object.keys(d).forEach(t=>{var e=d[t],i=rc(t),r=p.append("g").attr("id",i),a="element-"+i,s=Jl(r,a),t=tc(r,a+"_title",["<<Element>>",""+t]),r=(ec(r,a+"_body",["Type: "+(e.type||"Not Specified"),"Doc Ref: "+(e.docRef||"None")],t.y),s.node().getBBox());u.setNode(i,{width:r.width,height:r.height,shape:"rect",id:i})}),h=o,y.forEach(function(t){var e=rc(t.src),i=rc(t.dst);h.setEdge(e,i,{relationship:t})}),J(o),l=n,(c=o).nodes().forEach(function(t){void 0!==t&&void 0!==c.node(t)&&(l.select("#"+t),l.select("#"+t).attr("transform","translate("+(c.node(t).x-c.node(t).width/2)+","+(c.node(t).y-c.node(t).height/2)+" )"))}),y.forEach(function(t){ic(n,t,o,e,a)}),Ql.rect_padding),g=n.node().getBBox(),y=g.width+2*t,x=g.height+2*t;tr(n,x,y,Ql.useMaxWidth),n.attr("viewBox",`${g.x-t} ${g.y-t} ${y} `+x)}};var sc=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e=[1,2],i=[1,3],r=[1,5],a=[1,7],s=[2,5],n=[1,15],o=[1,17],l=[1,19],c=[1,21],h=[1,22],d=[1,23],u=[1,29],p=[1,30],g=[1,31],y=[1,32],f=[1,33],m=[1,34],b=[1,35],x=[1,36],k=[1,37],_=[1,38],C=[1,39],v=[1,40],T=[1,42],E=[1,43],S=[1,45],w=[1,46],A=[1,47],B=[1,48],L=[1,49],D=[1,50],R=[1,53],I=[1,4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],O=[4,5,21,54,56],M=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],$=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,53,54,56,57,62,63,64,65,73,83],P=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,52,54,56,57,62,63,64,65,73,83],H=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,54,56,57,62,63,64,65,73,83],F=[71,72,73],N=[1,125],V=[1,4,5,7,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],e={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,box_section:11,box_line:12,participant_statement:13,openDirective:14,typeDirective:15,closeDirective:16,":":17,argDirective:18,box:19,restOfLine:20,end:21,signal:22,autonumber:23,NUM:24,off:25,activate:26,actor:27,deactivate:28,note_statement:29,links_statement:30,link_statement:31,properties_statement:32,details_statement:33,title:34,legacy_title:35,acc_title:36,acc_title_value:37,acc_descr:38,acc_descr_value:39,acc_descr_multiline_value:40,loop:41,rect:42,opt:43,alt:44,else_sections:45,par:46,par_sections:47,critical:48,option_sections:49,break:50,option:51,and:52,else:53,participant:54,AS:55,participant_actor:56,note:57,placement:58,text2:59,over:60,actor_pair:61,links:62,link:63,properties:64,details:65,spaceList:66,",":67,left_of:68,right_of:69,signaltype:70,"+":71,"-":72,ACTOR:73,SOLID_OPEN_ARROW:74,DOTTED_OPEN_ARROW:75,SOLID_ARROW:76,DOTTED_ARROW:77,SOLID_CROSS:78,DOTTED_CROSS:79,SOLID_POINT:80,DOTTED_POINT:81,TXT:82,open_directive:83,type_directive:84,arg_directive:85,close_directive:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",17:":",19:"box",20:"restOfLine",21:"end",23:"autonumber",24:"NUM",25:"off",26:"activate",28:"deactivate",34:"title",35:"legacy_title",36:"acc_title",37:"acc_title_value",38:"acc_descr",39:"acc_descr_value",40:"acc_descr_multiline_value",41:"loop",42:"rect",43:"opt",44:"alt",46:"par",48:"critical",50:"break",51:"option",52:"and",53:"else",54:"participant",55:"AS",56:"participant_actor",57:"note",60:"over",62:"links",63:"link",64:"properties",65:"details",67:",",68:"left_of",69:"right_of",71:"+",72:"-",73:"ACTOR",74:"SOLID_OPEN_ARROW",75:"DOTTED_OPEN_ARROW",76:"SOLID_ARROW",77:"DOTTED_ARROW",78:"SOLID_CROSS",79:"DOTTED_CROSS",80:"SOLID_POINT",81:"DOTTED_POINT",82:"TXT",83:"open_directive",84:"type_directive",85:"arg_directive",86:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[11,0],[11,2],[12,2],[12,1],[12,1],[6,4],[6,6],[10,1],[10,4],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[49,1],[49,4],[47,1],[47,4],[45,1],[45,4],[13,5],[13,3],[13,5],[13,3],[29,4],[29,4],[30,3],[31,3],[32,3],[33,3],[66,2],[66,1],[61,3],[61,1],[58,1],[58,1],[22,5],[22,5],[22,4],[27,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[59,1],[14,1],[15,1],[18,1],[16,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 4:return r.apply(s[o]),s[o];case 5:case 10:case 9:case 14:this.$=[];break;case 6:case 11:s[o-1].push(s[o]),this.$=s[o-1];break;case 7:case 8:case 12:case 13:case 63:this.$=s[o];break;case 18:s[o-1].unshift({type:"boxStart",boxData:r.parseBoxData(s[o-2])}),s[o-1].push({type:"boxEnd",boxText:s[o-2]}),this.$=s[o-1];break;case 20:this.$={type:"sequenceIndex",sequenceIndex:Number(s[o-2]),sequenceIndexStep:Number(s[o-1]),sequenceVisible:!0,signalType:r.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceIndex:Number(s[o-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:r.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:r.LINETYPE.AUTONUMBER};break;case 23:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:r.LINETYPE.AUTONUMBER};break;case 24:this.$={type:"activeStart",signalType:r.LINETYPE.ACTIVE_START,actor:s[o-1]};break;case 25:this.$={type:"activeEnd",signalType:r.LINETYPE.ACTIVE_END,actor:s[o-1]};break;case 31:r.setDiagramTitle(s[o].substring(6)),this.$=s[o].substring(6);break;case 32:r.setDiagramTitle(s[o].substring(7)),this.$=s[o].substring(7);break;case 33:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 34:case 35:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 36:s[o-1].unshift({type:"loopStart",loopText:r.parseMessage(s[o-2]),signalType:r.LINETYPE.LOOP_START}),s[o-1].push({type:"loopEnd",loopText:s[o-2],signalType:r.LINETYPE.LOOP_END}),this.$=s[o-1];break;case 37:s[o-1].unshift({type:"rectStart",color:r.parseMessage(s[o-2]),signalType:r.LINETYPE.RECT_START}),s[o-1].push({type:"rectEnd",color:r.parseMessage(s[o-2]),signalType:r.LINETYPE.RECT_END}),this.$=s[o-1];break;case 38:s[o-1].unshift({type:"optStart",optText:r.parseMessage(s[o-2]),signalType:r.LINETYPE.OPT_START}),s[o-1].push({type:"optEnd",optText:r.parseMessage(s[o-2]),signalType:r.LINETYPE.OPT_END}),this.$=s[o-1];break;case 39:s[o-1].unshift({type:"altStart",altText:r.parseMessage(s[o-2]),signalType:r.LINETYPE.ALT_START}),s[o-1].push({type:"altEnd",signalType:r.LINETYPE.ALT_END}),this.$=s[o-1];break;case 40:s[o-1].unshift({type:"parStart",parText:r.parseMessage(s[o-2]),signalType:r.LINETYPE.PAR_START}),s[o-1].push({type:"parEnd",signalType:r.LINETYPE.PAR_END}),this.$=s[o-1];break;case 41:s[o-1].unshift({type:"criticalStart",criticalText:r.parseMessage(s[o-2]),signalType:r.LINETYPE.CRITICAL_START}),s[o-1].push({type:"criticalEnd",signalType:r.LINETYPE.CRITICAL_END}),this.$=s[o-1];break;case 42:s[o-1].unshift({type:"breakStart",breakText:r.parseMessage(s[o-2]),signalType:r.LINETYPE.BREAK_START}),s[o-1].push({type:"breakEnd",optText:r.parseMessage(s[o-2]),signalType:r.LINETYPE.BREAK_END}),this.$=s[o-1];break;case 45:this.$=s[o-3].concat([{type:"option",optionText:r.parseMessage(s[o-1]),signalType:r.LINETYPE.CRITICAL_OPTION},s[o]]);break;case 47:this.$=s[o-3].concat([{type:"and",parText:r.parseMessage(s[o-1]),signalType:r.LINETYPE.PAR_AND},s[o]]);break;case 49:this.$=s[o-3].concat([{type:"else",altText:r.parseMessage(s[o-1]),signalType:r.LINETYPE.ALT_ELSE},s[o]]);break;case 50:s[o-3].type="addParticipant",s[o-3].description=r.parseMessage(s[o-1]),this.$=s[o-3];break;case 51:s[o-1].type="addParticipant",this.$=s[o-1];break;case 52:s[o-3].type="addActor",s[o-3].description=r.parseMessage(s[o-1]),this.$=s[o-3];break;case 53:s[o-1].type="addActor",this.$=s[o-1];break;case 54:this.$=[s[o-1],{type:"addNote",placement:s[o-2],actor:s[o-1].actor,text:s[o]}];break;case 55:s[o-2]=[].concat(s[o-1],s[o-1]).slice(0,2),s[o-2][0]=s[o-2][0].actor,s[o-2][1]=s[o-2][1].actor,this.$=[s[o-1],{type:"addNote",placement:r.PLACEMENT.OVER,actor:s[o-2].slice(0,2),text:s[o]}];break;case 56:this.$=[s[o-1],{type:"addLinks",actor:s[o-1].actor,text:s[o]}];break;case 57:this.$=[s[o-1],{type:"addALink",actor:s[o-1].actor,text:s[o]}];break;case 58:this.$=[s[o-1],{type:"addProperties",actor:s[o-1].actor,text:s[o]}];break;case 59:this.$=[s[o-1],{type:"addDetails",actor:s[o-1].actor,text:s[o]}];break;case 62:this.$=[s[o-2],s[o]];break;case 64:this.$=r.PLACEMENT.LEFTOF;break;case 65:this.$=r.PLACEMENT.RIGHTOF;break;case 66:this.$=[s[o-4],s[o-1],{type:"addMessage",from:s[o-4].actor,to:s[o-1].actor,signalType:s[o-3],msg:s[o]},{type:"activeStart",signalType:r.LINETYPE.ACTIVE_START,actor:s[o-1]}];break;case 67:this.$=[s[o-4],s[o-1],{type:"addMessage",from:s[o-4].actor,to:s[o-1].actor,signalType:s[o-3],msg:s[o]},{type:"activeEnd",signalType:r.LINETYPE.ACTIVE_END,actor:s[o-4]}];break;case 68:this.$=[s[o-3],s[o-1],{type:"addMessage",from:s[o-3].actor,to:s[o-1].actor,signalType:s[o-2],msg:s[o]}];break;case 69:this.$={type:"addParticipant",actor:s[o]};break;case 70:this.$=r.LINETYPE.SOLID_OPEN;break;case 71:this.$=r.LINETYPE.DOTTED_OPEN;break;case 72:this.$=r.LINETYPE.SOLID;break;case 73:this.$=r.LINETYPE.DOTTED;break;case 74:this.$=r.LINETYPE.SOLID_CROSS;break;case 75:this.$=r.LINETYPE.DOTTED_CROSS;break;case 76:this.$=r.LINETYPE.SOLID_POINT;break;case 77:this.$=r.LINETYPE.DOTTED_POINT;break;case 78:this.$=r.parseMessage(s[o].trim().substring(1));break;case 79:r.parseDirective("%%{","open_directive");break;case 80:r.parseDirective(s[o],"type_directive");break;case 81:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 82:r.parseDirective("}%%","close_directive","sequence")}},table:[{3:1,4:e,5:i,6:4,7:r,14:6,83:a},{1:[3]},{3:8,4:e,5:i,6:4,7:r,14:6,83:a},{3:9,4:e,5:i,6:4,7:r,14:6,83:a},{3:10,4:e,5:i,6:4,7:r,14:6,83:a},t([1,4,5,19,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],s,{8:11}),{15:12,84:[1,13]},{84:[2,79]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:n,5:o,6:41,9:14,10:16,13:18,14:6,19:l,22:20,23:c,26:h,27:44,28:d,29:24,30:25,31:26,32:27,33:28,34:u,35:p,36:g,38:y,40:f,41:m,42:b,43:x,44:k,46:_,48:C,50:v,54:T,56:E,57:S,62:w,63:A,64:B,65:L,73:D,83:a},{16:51,17:[1,52],86:R},t([17,86],[2,80]),t(I,[2,6]),{6:41,10:54,13:18,14:6,19:l,22:20,23:c,26:h,27:44,28:d,29:24,30:25,31:26,32:27,33:28,34:u,35:p,36:g,38:y,40:f,41:m,42:b,43:x,44:k,46:_,48:C,50:v,54:T,56:E,57:S,62:w,63:A,64:B,65:L,73:D,83:a},t(I,[2,8]),t(I,[2,9]),t(I,[2,17]),{20:[1,55]},{5:[1,56]},{5:[1,59],24:[1,57],25:[1,58]},{27:60,73:D},{27:61,73:D},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},{5:[1,66]},t(I,[2,31]),t(I,[2,32]),{37:[1,67]},{39:[1,68]},t(I,[2,35]),{20:[1,69]},{20:[1,70]},{20:[1,71]},{20:[1,72]},{20:[1,73]},{20:[1,74]},{20:[1,75]},t(I,[2,43]),{27:76,73:D},{27:77,73:D},{70:78,74:[1,79],75:[1,80],76:[1,81],77:[1,82],78:[1,83],79:[1,84],80:[1,85],81:[1,86]},{58:87,60:[1,88],68:[1,89],69:[1,90]},{27:91,73:D},{27:92,73:D},{27:93,73:D},{27:94,73:D},t([5,55,67,74,75,76,77,78,79,80,81,82],[2,69]),{5:[1,95]},{18:96,85:[1,97]},{5:[2,82]},t(I,[2,7]),t(O,[2,10],{11:98}),t(I,[2,19]),{5:[1,100],24:[1,99]},{5:[1,101]},t(I,[2,23]),{5:[1,102]},{5:[1,103]},t(I,[2,26]),t(I,[2,27]),t(I,[2,28]),t(I,[2,29]),t(I,[2,30]),t(I,[2,33]),t(I,[2,34]),t(M,s,{8:104}),t(M,s,{8:105}),t(M,s,{8:106}),t($,s,{45:107,8:108}),t(P,s,{47:109,8:110}),t(H,s,{49:111,8:112}),t(M,s,{8:113}),{5:[1,115],55:[1,114]},{5:[1,117],55:[1,116]},{27:120,71:[1,118],72:[1,119],73:D},t(F,[2,70]),t(F,[2,71]),t(F,[2,72]),t(F,[2,73]),t(F,[2,74]),t(F,[2,75]),t(F,[2,76]),t(F,[2,77]),{27:121,73:D},{27:123,61:122,73:D},{73:[2,64]},{73:[2,65]},{59:124,82:N},{59:126,82:N},{59:127,82:N},{59:128,82:N},t(V,[2,15]),{16:129,86:R},{86:[2,81]},{4:[1,132],5:[1,134],12:131,13:133,21:[1,130],54:T,56:E},{5:[1,135]},t(I,[2,21]),t(I,[2,22]),t(I,[2,24]),t(I,[2,25]),{4:n,5:o,6:41,9:14,10:16,13:18,14:6,19:l,21:[1,136],22:20,23:c,26:h,27:44,28:d,29:24,30:25,31:26,32:27,33:28,34:u,35:p,36:g,38:y,40:f,41:m,42:b,43:x,44:k,46:_,48:C,50:v,54:T,56:E,57:S,62:w,63:A,64:B,65:L,73:D,83:a},{4:n,5:o,6:41,9:14,10:16,13:18,14:6,19:l,21:[1,137],22:20,23:c,26:h,27:44,28:d,29:24,30:25,31:26,32:27,33:28,34:u,35:p,36:g,38:y,40:f,41:m,42:b,43:x,44:k,46:_,48:C,50:v,54:T,56:E,57:S,62:w,63:A,64:B,65:L,73:D,83:a},{4:n,5:o,6:41,9:14,10:16,13:18,14:6,19:l,21:[1,138],22:20,23:c,26:h,27:44,28:d,29:24,30:25,31:26,32:27,33:28,34:u,35:p,36:g,38:y,40:f,41:m,42:b,43:x,44:k,46:_,48:C,50:v,54:T,56:E,57:S,62:w,63:A,64:B,65:L,73:D,83:a},{21:[1,139]},{4:n,5:o,6:41,9:14,10:16,13:18,14:6,19:l,21:[2,48],22:20,23:c,26:h,27:44,28:d,29:24,30:25,31:26,32:27,33:28,34:u,35:p,36:g,38:y,40:f,41:m,42:b,43:x,44:k,46:_,48:C,50:v,53:[1,140],54:T,56:E,57:S,62:w,63:A,64:B,65:L,73:D,83:a},{21:[1,141]},{4:n,5:o,6:41,9:14,10:16,13:18,14:6,19:l,21:[2,46],22:20,23:c,26:h,27:44,28:d,29:24,30:25,31:26,32:27,33:28,34:u,35:p,36:g,38:y,40:f,41:m,42:b,43:x,44:k,46:_,48:C,50:v,52:[1,142],54:T,56:E,57:S,62:w,63:A,64:B,65:L,73:D,83:a},{21:[1,143]},{4:n,5:o,6:41,9:14,10:16,13:18,14:6,19:l,21:[2,44],22:20,23:c,26:h,27:44,28:d,29:24,30:25,31:26,32:27,33:28,34:u,35:p,36:g,38:y,40:f,41:m,42:b,43:x,44:k,46:_,48:C,50:v,51:[1,144],54:T,56:E,57:S,62:w,63:A,64:B,65:L,73:D,83:a},{4:n,5:o,6:41,9:14,10:16,13:18,14:6,19:l,21:[1,145],22:20,23:c,26:h,27:44,28:d,29:24,30:25,31:26,32:27,33:28,34:u,35:p,36:g,38:y,40:f,41:m,42:b,43:x,44:k,46:_,48:C,50:v,54:T,56:E,57:S,62:w,63:A,64:B,65:L,73:D,83:a},{20:[1,146]},t(I,[2,51]),{20:[1,147]},t(I,[2,53]),{27:148,73:D},{27:149,73:D},{59:150,82:N},{59:151,82:N},{59:152,82:N},{67:[1,153],82:[2,63]},{5:[2,56]},{5:[2,78]},{5:[2,57]},{5:[2,58]},{5:[2,59]},{5:[1,154]},t(I,[2,18]),t(O,[2,11]),{13:155,54:T,56:E},t(O,[2,13]),t(O,[2,14]),t(I,[2,20]),t(I,[2,36]),t(I,[2,37]),t(I,[2,38]),t(I,[2,39]),{20:[1,156]},t(I,[2,40]),{20:[1,157]},t(I,[2,41]),{20:[1,158]},t(I,[2,42]),{5:[1,159]},{5:[1,160]},{59:161,82:N},{59:162,82:N},{5:[2,68]},{5:[2,54]},{5:[2,55]},{27:163,73:D},t(V,[2,16]),t(O,[2,12]),t($,s,{8:108,45:164}),t(P,s,{8:110,47:165}),t(H,s,{8:112,49:166}),t(I,[2,50]),t(I,[2,52]),{5:[2,66]},{5:[2,67]},{82:[2,62]},{21:[2,49]},{21:[2,47]},{21:[2,45]}],defaultActions:{7:[2,79],8:[2,1],9:[2,2],10:[2,3],53:[2,82],89:[2,64],90:[2,65],97:[2,81],124:[2,56],125:[2,78],126:[2,57],127:[2,58],128:[2,59],150:[2,68],151:[2,54],152:[2,55],161:[2,66],162:[2,67],163:[2,62],164:[2,49],165:[2,47],166:[2,45]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};i={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("open_directive"),83;case 1:return this.begin("type_directive"),84;case 2:return this.popState(),this.begin("arg_directive"),17;case 3:return this.popState(),this.popState(),86;case 4:return 85;case 5:case 53:case 66:return 5;case 6:case 7:case 8:case 9:case 10:break;case 11:return 24;case 12:return this.begin("LINE"),19;case 13:return this.begin("ID"),54;case 14:return this.begin("ID"),56;case 15:return e.yytext=e.yytext.trim(),this.begin("ALIAS"),73;case 16:return this.popState(),this.popState(),this.begin("LINE"),55;case 17:return this.popState(),this.popState(),5;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),44;case 22:return this.begin("LINE"),53;case 23:return this.begin("LINE"),46;case 24:return this.begin("LINE"),52;case 25:return this.begin("LINE"),48;case 26:return this.begin("LINE"),51;case 27:return this.begin("LINE"),50;case 28:return this.popState(),20;case 29:return 21;case 30:return 68;case 31:return 69;case 32:return 62;case 33:return 63;case 34:return 64;case 35:return 65;case 36:return 60;case 37:return 57;case 38:return this.begin("ID"),26;case 39:return this.begin("ID"),28;case 40:return 34;case 41:return 35;case 42:return this.begin("acc_title"),36;case 43:return this.popState(),"acc_title_value";case 44:return this.begin("acc_descr"),38;case 45:return this.popState(),"acc_descr_value";case 46:this.begin("acc_descr_multiline");break;case 47:this.popState();break;case 48:return"acc_descr_multiline_value";case 49:return 7;case 50:return 23;case 51:return 25;case 52:return 67;case 54:return e.yytext=e.yytext.trim(),73;case 55:return 76;case 56:return 77;case 57:return 74;case 58:return 75;case 59:return 78;case 60:return 79;case 61:return 80;case 62:return 81;case 63:return 82;case 64:return 71;case 65:return 72;case 67:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[47,48],inclusive:!1},acc_descr:{rules:[45],inclusive:!1},acc_title:{rules:[43],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,15],inclusive:!1},ALIAS:{rules:[7,8,16,17],inclusive:!1},LINE:{rules:[7,8,28],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24,25,26,27,29,30,31,32,33,34,35,36,37,38,39,40,41,42,44,46,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}};function U(){this.yy={}}return e.lexer=i,new((U.prototype=e).Parser=U)}();const ac=sc.parser=sc,oc=t=>null!==t.match(/^\s*sequenceDiagram/);let lc,cc,hc,dc={},uc=[],pc=[],gc=!1;const yc=function(t,e,i,r){let a=hc;var s=dc[t];if(s){if(hc&&s.box&&hc!==s.box)throw new Error("A same participant should only be defined in one Box: "+s.name+" can't be in '"+s.box.name+"' and in '"+hc.name+"' at the same time.");if(a=s.box||hc,s.box=a,s&&e===s.name&&null==i)return}null!=i&&null!=i.text||(i={text:e,wrap:null,type:r}),null!=r&&null!=i.text||(i={text:e,wrap:null,type:r}),dc[t]={box:a,name:e,description:i.text,wrap:void 0===i.wrap&&bc()||!!i.wrap,prevActor:lc,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},lc&&dc[lc]&&(dc[lc].nextActor=t),hc&&hc.actorKeys.push(t),lc=t},fc=function(t,e,i={text:void 0,wrap:void 0},r){if(r===xc.ACTIVE_END){const e=(t=>{let e,i=0;for(e=0;e<pc.length;e++)pc[e].type===xc.ACTIVE_START&&pc[e].from.actor===t&&i++,pc[e].type===xc.ACTIVE_END&&pc[e].from.actor===t&&i--;return i})(t.actor);var a;if(e<1)throw(a=new Error("Trying to inactivate an inactive participant ("+t.actor+")")).hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},a}return pc.push({from:t,to:e,message:i.text,wrap:void 0===i.wrap&&bc()||!!i.wrap,type:r}),!0},mc=function(t){return dc[t]},bc=()=>void 0!==cc?cc:Hi().sequence.wrap,xc={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},kc=function(t,e,i){i.text,void 0===i.wrap&&bc()||i.wrap;t=[].concat(t,t);pc.push({from:t[0],to:t[1],message:i.text,wrap:void 0===i.wrap&&bc()||!!i.wrap,type:xc.NOTE,placement:e})},_c=function(t,e){var i=mc(t);try{let t=bt(e.text,Hi());t=(t=t.replace(/&amp;/g,"&")).replace(/&equals;/g,"="),Cc(i,JSON.parse(t))}catch(t){pt.error("error while parsing actor link text",t)}};function Cc(t,e){if(null==t.links)t.links=e;else for(var i in e)t.links[i]=e[i]}const Tc=function(t,e){var i=mc(t);try{var r=bt(e.text,Hi());Ec(i,JSON.parse(r))}catch(t){pt.error("error while parsing actor properties text",t)}};function Ec(t,e){if(null==t.properties)t.properties=e;else for(var i in e)t.properties[i]=e[i]}const vc=function(t,e){var i=mc(t),r=document.getElementById(e.text);try{const t=r.innerHTML,e=JSON.parse(t);e.properties&&Ec(i,e.properties),e.links&&Cc(i,e.links)}catch(t){pt.error("error while parsing actor details text",t)}},Sc=function(t){if(Array.isArray(t))t.forEach(function(t){Sc(t)});else switch(t.type){case"sequenceIndex":pc.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":yc(t.actor,t.actor,t.description,"participant");break;case"addActor":yc(t.actor,t.actor,t.description,"actor");break;case"activeStart":case"activeEnd":fc(t.actor,void 0,void 0,t.signalType);break;case"addNote":kc(t.actor,t.placement,t.text);break;case"addLinks":_c(t.actor,t.text);break;case"addALink":var e=t.actor,i=t.text,r=mc(e);try{const e={};let t=bt(i.text,Hi());var a=t.indexOf("@"),s=(t=(t=t.replace(/&amp;/g,"&")).replace(/&equals;/g,"=")).slice(0,a-1).trim(),n=t.slice(a+1).trim();e[s]=n,Cc(r,e)}catch(e){pt.error("error while parsing actor link text",e)}break;case"addProperties":Tc(t.actor,t.text);break;case"addDetails":vc(t.actor,t.text);break;case"addMessage":fc(t.from,t.to,t.msg,t.signalType);break;case"boxStart":i=t.boxData,uc.push({name:i.text,wrap:void 0===i.wrap&&bc()||!!i.wrap,fill:i.color,actorKeys:[]}),hc=uc.slice(-1)[0];break;case"boxEnd":hc=void 0;break;case"loopStart":fc(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":fc(void 0,void 0,void 0,t.signalType);break;case"rectStart":fc(void 0,void 0,t.color,t.signalType);break;case"optStart":fc(void 0,void 0,t.optText,t.signalType);break;case"altStart":case"else":fc(void 0,void 0,t.altText,t.signalType);break;case"setAccTitle":_r(t.text);break;case"parStart":case"and":fc(void 0,void 0,t.parText,t.signalType);break;case"criticalStart":fc(void 0,void 0,t.criticalText,t.signalType);break;case"option":fc(void 0,void 0,t.optionText,t.signalType);break;case"breakStart":fc(void 0,void 0,t.breakText,t.signalType)}},wc={addActor:yc,addMessage:function(t,e,i,r){pc.push({from:t,to:e,message:i.text,wrap:void 0===i.wrap&&bc()||!!i.wrap,answer:r})},addSignal:fc,addLinks:_c,addDetails:vc,addProperties:Tc,autoWrap:bc,setWrap:function(t){cc=t},enableSequenceNumbers:function(){gc=!0},disableSequenceNumbers:function(){gc=!1},showSequenceNumbers:()=>gc,getMessages:function(){return pc},getActors:function(){return dc},getActor:mc,getActorKeys:function(){return Object.keys(dc)},getActorProperty:function(t,e){if(void 0!==t&&void 0!==t.properties)return t.properties[e]},getAccTitle:Cr,getBoxes:function(){return uc},getDiagramTitle:Sr,setDiagramTitle:vr,parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},getConfig:()=>Hi().sequence,clear:function(){dc={},uc=[],pc=[],gc=!1,kr()},parseMessage:function(t){t=t.trim(),t={text:t.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:null!==t.match(/^:?wrap:/)||null===t.match(/^:?nowrap:/)&&void 0};return pt.debug("parseMessage:",t),t},parseBoxData:function(t){const e=t.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let i=null!=e&&e[1]?e[1].trim():"transparent",r=null!=e&&e[2]?e[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",i)||(i="transparent",r=t.trim());else{const e=(new Option).style;e.color=i,e.color!==i&&(i="transparent",r=t.trim())}return{color:i,text:void 0!==r?bt(r.replace(/^:?(?:no)?wrap:/,""),Hi()):void 0,wrap:void 0!==r?null!==r.match(/^:?wrap:/)||null===r.match(/^:?nowrap:/)&&void 0:void 0}},LINETYPE:xc,ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},addNote:kc,setAccTitle:_r,apply:Sc,setAccDescription:Tr,getAccDescription:Er,hasAtLeastOneBox:function(){return 0<uc.length},hasAtLeastOneBoxWithTitle:function(){return uc.some(t=>t.name)}};let Ac=[];const Bc=()=>{Ac.forEach(t=>{t()}),Ac=[]},Lc=function(t,e){t=t.append("rect");return t.attr("x",e.x),t.attr("y",e.y),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",e.width),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),void 0!==e.class&&t.attr("class",e.class),t},Dc=(e,i)=>{var t=()=>{var t=document.querySelectorAll(e);0!==t.length&&(t[0].addEventListener("mouseover",function(){Fc("actor"+i+"_popup")}),t[0].addEventListener("mouseout",function(){Nc("actor"+i+"_popup")}))};Ac.push(t)},Ic=function(t,e,r,a){t=t.append("image"),t.attr("x",e),t.attr("y",r),e=i(a);t.attr("xlink:href",e)},Oc=function(t,e,r,a){t=t.append("use"),t.attr("x",e),t.attr("y",r),e=i(a);t.attr("xlink:href","#"+e)},Fc=function(t){t=document.getElementById(t);null!=t&&(t.style.display="block")},Nc=function(t){t=document.getElementById(t);null!=t&&(t.style.display="none")},$c=function(t,e){let i=0,r=0;const a=e.text.split(Et.lineBreakRegex),[s,n]=$i(e.fontSize);let o=[],l=0,c=()=>e.y;if(void 0!==e.valign&&void 0!==e.textMargin&&0<e.textMargin)switch(e.valign){case"top":case"start":c=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":c=()=>Math.round(e.y+(i+r+e.textMargin)/2);break;case"bottom":case"end":c=()=>Math.round(e.y+(i+r+2*e.textMargin)-e.textMargin)}if(void 0!==e.anchor&&void 0!==e.textMargin&&void 0!==e.width)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle"}for(var[h,d]of a.entries()){void 0!==e.textMargin&&0===e.textMargin&&void 0!==s&&(l=h*s);const a=t.append("text");if(a.attr("x",e.x),a.attr("y",c()),void 0!==e.anchor&&a.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),void 0!==e.fontFamily&&a.style("font-family",e.fontFamily),void 0!==n&&a.style("font-size",n),void 0!==e.fontWeight&&a.style("font-weight",e.fontWeight),void 0!==e.fill&&a.attr("fill",e.fill),void 0!==e.class&&a.attr("class",e.class),void 0!==e.dy?a.attr("dy",e.dy):0!==l&&a.attr("dy",l),e.tspan){const t=a.append("tspan");t.attr("x",e.x),void 0!==e.fill&&t.attr("fill",e.fill),t.text(d)}else a.text(d);void 0!==e.valign&&void 0!==e.textMargin&&0<e.textMargin&&(r+=(a._groups||a)[0][0].getBBox().height,i=r),o.push(a)}return o},Rc=function(t,e){var i,r,a,s,n=t.append("polygon");return n.attr("points",(i=e.x)+","+(r=e.y)+" "+(i+(a=e.width))+","+r+" "+(i+a)+","+(r+(s=e.height)-7)+" "+(i+a-8.4)+","+(r+s)+" "+i+","+(r+s)),n.attr("class","labelBox"),e.y=e.y+e.height/2,$c(t,e),n};let Mc=-1;const Pc=(t,e)=>{t.selectAll&&t.selectAll(".actor-line").attr("class","200").attr("y2",e-55)},zc=function(t,e){Lc(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"}).lower()},jc=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},Yc=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},Wc=function(){function e(t,e,i,r,a,s,n){g(e.append("text").attr("x",i+a/2).attr("y",r+s/2+5).style("text-anchor","middle").text(t),n)}function c(t,e,i,r,a,s,n,o){const{actorFontSize:l,actorFontFamily:c,actorFontWeight:h}=o,[d,u]=$i(l),p=t.split(Et.lineBreakRegex);for(let t=0;t<p.length;t++){const o=t*d-d*(p.length-1)/2,l=e.append("text").attr("x",i+a/2).attr("y",r).style("text-anchor","middle").style("font-size",u).style("font-weight",h).style("font-family",c);l.append("tspan").attr("x",i+a/2).attr("dy",o).text(p[t]),l.attr("y",r+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),g(l,n)}}function i(t,e,i,r,a,s,n,o){var e=e.append("switch"),l=e.append("foreignObject").attr("x",i).attr("y",r).attr("width",a).attr("height",s).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");l.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),c(t,e,i,r,a,s,n,o),g(l,n)}function g(t,e){for(const i in e)e.hasOwnProperty(i)&&t.attr(i,e[i])}return function(t){return"fo"===t.textPlacement?i:"old"===t.textPlacement?e:c}}(),qc=function(){function e(t,e,i,r,a,s,n){u(e.append("text").attr("x",i).attr("y",r).style("text-anchor","start").text(t),n)}function l(t,e,i,r,a,s,n,o){var{actorFontSize:l,actorFontFamily:c,actorFontWeight:h}=o,d=t.split(Et.lineBreakRegex);for(let t=0;t<d.length;t++){const a=t*l-l*(d.length-1)/2,o=e.append("text").attr("x",i).attr("y",r).style("text-anchor","start").style("font-size",l).style("font-weight",h).style("font-family",c);o.append("tspan").attr("x",i).attr("dy",a).text(d[t]),o.attr("y",r+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),u(o,n)}}function i(t,e,i,r,a,s,n,o){e=e.append("switch"),a=e.append("foreignObject").attr("x",i).attr("y",r).attr("width",a).attr("height",s).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");a.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),l(t,e,i,r,0,s,n,o),u(a,n)}function u(t,e){for(const i in e)e.hasOwnProperty(i)&&t.attr(i,e[i])}return function(t){return"fo"===t.textPlacement?i:"old"===t.textPlacement?e:l}}(),Uc={drawRect:Lc,drawText:$c,drawLabel:Rc,drawActor:function(e,i,r,a){switch(i.type){case"actor":return c=e,n=r,h=(o=i).x+o.width/2,d=o.y+80,a||(Mc++,c.append("line").attr("id","actor"+Mc).attr("x1",h).attr("y1",d).attr("x2",h).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999")),(d=c.append("g")).attr("class","actor-man"),(c=Yc()).x=o.x,c.y=o.y,c.fill="#eaeaea",c.width=o.width,c.height=o.height,c.class="actor",c.rx=3,c.ry=3,d.append("line").attr("id","actor-man-torso"+Mc).attr("x1",h).attr("y1",o.y+25).attr("x2",h).attr("y2",o.y+45),d.append("line").attr("id","actor-man-arms"+Mc).attr("x1",h-18).attr("y1",o.y+33).attr("x2",h+18).attr("y2",o.y+33),d.append("line").attr("x1",h-18).attr("y1",o.y+60).attr("x2",h).attr("y2",o.y+45),d.append("line").attr("x1",h).attr("y1",o.y+45).attr("x2",h+16).attr("y2",o.y+60),(h=d.append("circle")).attr("cx",o.x+o.width/2),h.attr("cy",o.y+10),h.attr("r",15),h.attr("width",o.width),h.attr("height",o.height),h=d.node().getBBox(),o.height=h.height,Wc(n)(o.description,d,c.x,c.y+35,c.width,c.height,{class:"actor"},n),o.height;case"participant":{var s=e;h=i;d=r;c=a;var n=h.x+h.width/2,o=h.y+5,s=s.append("g"),l=s,c=(c||(Mc++,l.append("line").attr("id","actor"+Mc).attr("x1",n).attr("y1",o).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),l=s.append("g"),h.actorCnt=Mc,null!=h.links&&(l.attr("id","root-"+Mc),Dc("#root-"+Mc,Mc))),Yc()),o="actor",n=(null!=h.properties&&h.properties.class?o=h.properties.class:c.fill="#eaeaea",c.x=h.x,c.y=h.y,c.width=h.width,c.height=h.height,c.class=o,c.rx=3,c.ry=3,Lc(l,c));if(h.rectData=c,null!=h.properties&&h.properties.icon){const s=h.properties.icon.trim();"@"===s.charAt(0)?Oc(l,c.x+c.width-20,c.y+10,s.substr(1)):Ic(l,c.x+c.width-20,c.y+10,s)}Wc(d)(h.description,l,c.x,c.y,c.width,c.height,{class:"actor"},d);let t=h.height;if(n.node){const s=n.node().getBBox();h.height=s.height,t=s.height}return t;return}}var c,o,n,h,d},drawBox:function(t,e,i){t=t.append("g");zc(t,e),e.name&&Wc(i)(e.name,t,e.x,e.y+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},i),t.lower()},drawPopup:function(t,e,r,a,s){if(void 0===e.links||null===e.links||0===Object.keys(e.links).length)return{height:0,width:0};var n=e.links,o=e.actorCnt,l=e.rectData,e="none",c=(s&&(e="block !important"),t.append("g")),s=(c.attr("id","actor"+o+"_popup"),c.attr("class","actorPopupMenu"),c.attr("display",e),Dc("#actor"+o+"_popup",o),""),h=(void 0!==l.class&&(s=" "+l.class),l.width>r?l.width:r),t=c.append("rect");if(t.attr("class","actorPopupMenuPanel"+s),t.attr("x",l.x),t.attr("y",l.height),t.attr("fill",l.fill),t.attr("stroke",l.stroke),t.attr("width",h),t.attr("height",l.height),t.attr("rx",l.rx),t.attr("ry",l.ry),null!=n){var d,u=20;for(d in n){var p=c.append("a"),g=i(n[d]);p.attr("xlink:href",g),p.attr("target","_blank"),qc(a)(d,p,l.x+10,l.height+u,h,20,{class:"actor"},a),u+=30}}return t.attr("height",u),{height:l.height+u,width:h}},drawImage:Ic,drawEmbeddedImage:Oc,anchorElement:function(t){return t.append("g")},drawActivation:function(t,e,i,r,a){var s=Yc(),n=e.anchored;s.x=e.startx,s.y=e.starty,s.class="activation"+a%3,s.width=e.stopx-e.startx,s.height=i-e.starty,Lc(n,s)},drawLoop:function(t,i,e,r){function a(t,e,i,r){return u.append("line").attr("x1",t).attr("y1",e).attr("x2",i).attr("y2",r).attr("class","loopLine")}const{boxMargin:s,boxTextMargin:n,labelBoxHeight:o,labelBoxWidth:l,messageFontFamily:c,messageFontSize:h,messageFontWeight:d}=r,u=t.append("g");a(i.startx,i.starty,i.stopx,i.starty),a(i.stopx,i.starty,i.stopx,i.stopy),a(i.startx,i.stopy,i.stopx,i.stopy),a(i.startx,i.starty,i.startx,i.stopy),void 0!==i.sections&&i.sections.forEach(function(t){a(i.startx,t.y,i.stopx,t.y).style("stroke-dasharray","3, 3")});let p=jc(),g=(p.text=e,p.x=i.startx,p.y=i.starty,p.fontFamily=c,p.fontSize=h,p.fontWeight=d,p.anchor="middle",p.valign="middle",p.tspan=!1,p.width=l||50,p.height=o||20,p.textMargin=n,p.class="labelText",Rc(u,p),(p=jc()).text=i.title,p.x=i.startx+l/2+(i.stopx-i.startx)/2,p.y=i.starty+s+n,p.anchor="middle",p.valign="middle",p.textMargin=n,p.class="loopText",p.fontFamily=c,p.fontSize=h,p.fontWeight=d,p.wrap=!0,$c(u,p));return void 0!==i.sectionTitles&&i.sectionTitles.forEach(function(t,e){t.message&&(p.text=t.message,p.x=i.startx+(i.stopx-i.startx)/2,p.y=i.sections[e].y+s+n,p.class="loopText",p.anchor="middle",p.valign="middle",p.tspan=!1,p.fontFamily=c,p.fontSize=h,p.fontWeight=d,p.wrap=i.wrap,g=$c(u,p),t=Math.round(g.map(t=>(t._groups||t)[0][0].getBBox().height).reduce((t,e)=>t+e)),i.sections[e].height+=t-(s+n))}),i.height=Math.round(i.stopy-i.starty),u},drawBackgroundRect:zc,insertArrowHead:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowFilledHead:function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertSequenceNumber:function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead:function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},insertDatabaseIcon:function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon:function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon:function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},getTextObj:jc,getNoteRect:Yc,popupMenu:function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},popdownMenu:function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},fixLifeLineHeights:Pc,sanitizeUrl:i};let Vc={};const Hc={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map(t=>t.height||0))+(0===this.loops.length?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(0===this.messages.length?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(0===this.notes.length?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(t){this.boxes.push(t)},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,Jc(Hi())},updateVal:function(t,e,i,r){void 0===t[e]?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(r,a,s,n){const o=this;let l=0;function t(i){return function(t){l++;var e=o.sequenceItems.length-l+1;o.updateVal(t,"starty",a-e*Vc.boxMargin,Math.min),o.updateVal(t,"stopy",n+e*Vc.boxMargin,Math.max),o.updateVal(Hc.data,"startx",r-e*Vc.boxMargin,Math.min),o.updateVal(Hc.data,"stopx",s+e*Vc.boxMargin,Math.max),"activation"!==i&&(o.updateVal(t,"startx",r-e*Vc.boxMargin,Math.min),o.updateVal(t,"stopx",s+e*Vc.boxMargin,Math.max),o.updateVal(Hc.data,"starty",a-e*Vc.boxMargin,Math.min),o.updateVal(Hc.data,"stopy",n+e*Vc.boxMargin,Math.max))}}this.sequenceItems.forEach(t()),this.activations.forEach(t("activation"))},insert:function(t,e,i,r){var a=Math.min(t,i),t=Math.max(t,i),i=Math.min(e,r),e=Math.max(e,r);this.updateVal(Hc.data,"startx",a,Math.min),this.updateVal(Hc.data,"starty",i,Math.min),this.updateVal(Hc.data,"stopx",t,Math.max),this.updateVal(Hc.data,"stopy",e,Math.max),this.updateBounds(a,i,t,e)},newActivation:function(t,e,i){var i=i[t.from.actor],r=th(t.from.actor).length||0,i=i.x+i.width/2+(r-1)*Vc.activationWidth/2;this.activations.push({startx:i,starty:this.verticalPos+2,stopx:i+Vc.activationWidth,stopy:void 0,actor:t.from.actor,anchored:Uc.anchorElement(e)})},endActivation:function(t){t=this.activations.map(function(t){return t.actor}).lastIndexOf(t.from.actor);return this.activations.splice(t,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(t){var e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:Hc.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},Gc=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),Xc=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),Kc=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight}),Qc=function(e,t,i,r,a,s,n){if(!0===a.hideUnusedParticipants){const e=new Set;s.forEach(t=>{e.add(t.from),e.add(t.to)}),i=i.filter(t=>e.has(t))}let o,l=0,c=0,h=0;for(const a of i){const i=t[a],s=i.box;o&&o!=s&&(n||Hc.models.addBox(o),c+=Vc.boxMargin+o.margin),s&&s!=o&&(n||(s.x=l+c,s.y=r),c+=s.margin),i.width=i.width||Vc.width,i.height=Math.max(i.height||Vc.height,Vc.height),i.margin=i.margin||Vc.actorMargin,i.x=l+c,i.y=Hc.getVerticalPos();var d=Uc.drawActor(e,i,Vc,n);h=Math.max(h,d),Hc.insert(i.x,r,i.x+i.width,i.height),l+=i.width+c,i.box&&(i.box.width=l+s.margin-i.box.x),c=i.margin,o=i.box,Hc.models.addActor(i)}o&&!n&&Hc.models.addBox(o),Hc.bumpVerticalPos(h)},Zc=function(t,e,i,r){let a=0,s=0;for(const n of i){const i=e[n],o=rh(i),l=Uc.drawPopup(t,i,o,Vc,Vc.forceMenus,r);l.height>a&&(a=l.height),l.width+i.x>s&&(s=l.width+i.x)}return{maxHeight:a,maxWidth:s}},Jc=function(t){yi(Vc,t),t.fontFamily&&(Vc.actorFontFamily=Vc.noteFontFamily=Vc.messageFontFamily=t.fontFamily),t.fontSize&&(Vc.actorFontSize=Vc.noteFontSize=Vc.messageFontSize=t.fontSize),t.fontWeight&&(Vc.actorFontWeight=Vc.noteFontWeight=Vc.messageFontWeight=t.fontWeight)},th=function(e){return Hc.activations.filter(function(t){return t.actor===e})},eh=function(t,e){e=e[t],t=th(t);return[t.reduce(function(t,e){return Math.min(t,e.startx)},e.x+e.width/2),t.reduce(function(t,e){return Math.max(t,e.stopx)},e.x+e.width/2)]};function ih(t,e,i,r,a){Hc.bumpVerticalPos(i);let s=r;if(e.id&&e.message&&t[e.id]){const i=t[e.id].width,a=Gc(Vc);e.message=Ri.wrapLabel(`[${e.message}]`,i-2*Vc.wrapPadding,a),e.width=i,e.wrap=!0;t=Ri.calculateTextDimensions(e.message,a),t=Math.max(t.height,Vc.labelBoxHeight);s=r+t,pt.debug(t+" - "+e.message)}a(e),Hc.bumpVerticalPos(s)}const rh=function(t){let e=0;var i=Kc(Vc);for(const r in t.links){const t=Ri.calculateTextDimensions(r,i).width+2*Vc.wrapPadding+2*Vc.boxMargin;e<t&&(e=t)}return e},nh=function(t,h,e,d){const u={},p=[];let g,y,f;return t.forEach(function(i){switch(i.id=Ri.random({length:10}),i.type){case d.db.LINETYPE.LOOP_START:case d.db.LINETYPE.ALT_START:case d.db.LINETYPE.OPT_START:case d.db.LINETYPE.PAR_START:case d.db.LINETYPE.CRITICAL_START:case d.db.LINETYPE.BREAK_START:p.push({id:i.id,msg:i.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case d.db.LINETYPE.ALT_ELSE:case d.db.LINETYPE.PAR_AND:case d.db.LINETYPE.CRITICAL_OPTION:i.message&&(g=p.pop(),u[g.id]=g,u[i.id]=g,p.push(g));break;case d.db.LINETYPE.LOOP_END:case d.db.LINETYPE.ALT_END:case d.db.LINETYPE.OPT_END:case d.db.LINETYPE.PAR_END:case d.db.LINETYPE.CRITICAL_END:case d.db.LINETYPE.BREAK_END:g=p.pop(),u[g.id]=g;break;case d.db.LINETYPE.ACTIVE_START:{const c=h[(i.from||i.to).actor],d=th((i.from||i.to).actor).length,u=c.x+c.width/2+(d-1)*Vc.activationWidth/2,p={startx:u,stopx:u+Vc.activationWidth,actor:i.from.actor,enabled:!0};Hc.activations.push(p)}break;case d.db.LINETYPE.ACTIVE_END:{const h=Hc.activations.map(t=>t.actor).lastIndexOf(i.from.actor);delete Hc.activations.splice(h,1)[0]}}var t,e,r,a,s,n,o,l;void 0!==i.placement?(y=(r=d,a=(e=h)[(t=i).from].x,s=e[t.to].x,n=t.wrap&&t.message,o=Ri.calculateTextDimensions(n?Ri.wrapLabel(t.message,Vc.width,Xc(Vc)):t.message,Xc(Vc)),l={width:n?Vc.width:Math.max(Vc.width,o.width+2*Vc.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message},t.placement===r.db.PLACEMENT.RIGHTOF?(l.width=n?Math.max(Vc.width,o.width):Math.max(e[t.from].width/2+e[t.to].width/2,o.width+2*Vc.noteMargin),l.startx=a+(e[t.from].width+Vc.actorMargin)/2):t.placement===r.db.PLACEMENT.LEFTOF?(l.width=n?Math.max(Vc.width,o.width+2*Vc.noteMargin):Math.max(e[t.from].width/2+e[t.to].width/2,o.width+2*Vc.noteMargin),l.startx=a-l.width+(e[t.from].width-Vc.actorMargin)/2):t.to===t.from?(o=Ri.calculateTextDimensions(n?Ri.wrapLabel(t.message,Math.max(Vc.width,e[t.from].width),Xc(Vc)):t.message,Xc(Vc)),l.width=n?Math.max(Vc.width,e[t.from].width):Math.max(e[t.from].width,Vc.width,o.width+2*Vc.noteMargin),l.startx=a+(e[t.from].width-l.width)/2):(l.width=Math.abs(a+e[t.from].width/2-(s+e[t.to].width/2))+Vc.actorMargin,l.startx=a<s?a+e[t.from].width/2-Vc.actorMargin/2:s+e[t.to].width/2-Vc.actorMargin/2),n&&(l.message=Ri.wrapLabel(t.message,l.width-2*Vc.wrapPadding,Xc(Vc))),pt.debug(`NM:[${l.startx},${l.stopx},${l.starty},${l.stopy}:${l.width},${l.height}=${t.message}]`),l),i.noteModel=y,p.forEach(t=>{(g=t).from=Math.min(g.from,y.startx),g.to=Math.max(g.to,y.startx+y.width),g.width=Math.max(g.width,Math.abs(g.from-g.to))-Vc.labelBoxWidth})):(f=function(t,e,i){let r=!1;var a,s,n,o,l;return(r=!![i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN,i.db.LINETYPE.SOLID,i.db.LINETYPE.DOTTED,i.db.LINETYPE.SOLID_CROSS,i.db.LINETYPE.DOTTED_CROSS,i.db.LINETYPE.SOLID_POINT,i.db.LINETYPE.DOTTED_POINT].includes(t.type)||r)?(i=eh(t.from,e),e=eh(t.to,e),a=i[0]<=e[0]?1:0,s=i[0]<e[0]?0:1,n=[...i,...e],o=Math.abs(e[s]-i[a]),t.wrap&&t.message&&(t.message=Ri.wrapLabel(t.message,Math.max(o+2*Vc.wrapPadding,Vc.width),Gc(Vc))),l=Ri.calculateTextDimensions(t.message,Gc(Vc)),{width:Math.max(t.wrap?0:l.width+2*Vc.wrapPadding,o+2*Vc.wrapPadding,Vc.width),height:0,startx:i[a],stopx:e[s],starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,n),toBounds:Math.max.apply(null,n)}):{}}(i,h,d),(i.msgModel=f).startx&&f.stopx&&0<p.length&&p.forEach(t=>{if(g=t,f.startx===f.stopx){const t=h[i.from],e=h[i.to];g.from=Math.min(t.x-f.width/2,t.x-t.width/2,g.from),g.to=Math.max(e.x+f.width/2,e.x+t.width/2,g.to),g.width=Math.max(g.width,Math.abs(g.to-g.from))-Vc.labelBoxWidth}else g.from=Math.min(f.startx,g.from),g.to=Math.max(f.stopx,g.to),g.width=Math.max(g.width,f.width)-Vc.labelBoxWidth}))}),Hc.activations=[],pt.debug("Loop type widths:",u),u},sh={bounds:Hc,drawActors:Qc,drawActorsPopup:Zc,setConf:Jc,draw:function(t,e,i,g){var{securityLevel:a,sequence:s}=Hi();let n;Vc=s,g.db.clear(),g.parser.parse(t),"sandbox"===a&&(n=r("#i"+e));s=r("sandbox"===a?n.nodes()[0].contentDocument.body:"body"),t="sandbox"===a?n.nodes()[0].contentDocument:document;Hc.init(),pt.debug(g.db);const y="sandbox"===a?s.select(`[id="${e}"]`):r(`[id="${e}"]`),c=g.db.getActors(),o=g.db.getBoxes(),l=g.db.getActorKeys(),h=g.db.getMessages(),d=g.db.getDiagramTitle(),u=g.db.hasAtLeastOneBox(),p=g.db.hasAtLeastOneBoxWithTitle(),f=function(s,n){const o={};return h.forEach(function(t){var e,i,r,a;s[t.to]&&s[t.from]&&(e=s[t.to],t.placement===n.db.PLACEMENT.LEFTOF&&!e.prevActor||t.placement===n.db.PLACEMENT.RIGHTOF&&!e.nextActor||(i=!(r=void 0!==t.placement),r=(r?Xc:Gc)(Vc),a=t.wrap?Ri.wrapLabel(t.message,Vc.width-2*Vc.wrapPadding,r):t.message,a=Ri.calculateTextDimensions(a,r).width+2*Vc.wrapPadding,i&&t.from===e.nextActor?o[t.to]=Math.max(o[t.to]||0,a):i&&t.from===e.prevActor?o[t.from]=Math.max(o[t.from]||0,a):i&&t.from===t.to?(o[t.from]=Math.max(o[t.from]||0,a/2),o[t.to]=Math.max(o[t.to]||0,a/2)):t.placement===n.db.PLACEMENT.RIGHTOF?o[t.from]=Math.max(o[t.from]||0,a):t.placement===n.db.PLACEMENT.LEFTOF?o[e.prevActor]=Math.max(o[e.prevActor]||0,a):t.placement===n.db.PLACEMENT.OVER&&(e.prevActor&&(o[e.prevActor]=Math.max(o[e.prevActor]||0,a/2)),e.nextActor)&&(o[t.from]=Math.max(o[t.from]||0,a/2))))}),pt.debug("maxMessageWidthPerActor:",o),o}(c,g),m=(Vc.height=function(r,t,e){let i=0;Object.keys(r).forEach(t=>{var t=r[t],e=(t.wrap&&(t.description=Ri.wrapLabel(t.description,Vc.width-2*Vc.wrapPadding,Kc(Vc))),Ri.calculateTextDimensions(t.description,Kc(Vc)));t.width=t.wrap?Vc.width:Math.max(Vc.width,e.width+2*Vc.wrapPadding),t.height=t.wrap?Math.max(e.height,Vc.height):Vc.height,i=Math.max(i,t.height)});for(const e in t){const i=r[e];if(i){const s=r[i.nextActor];if(s){var a=t[e]+Vc.actorMargin-i.width/2-s.width/2;i.margin=Math.max(a,Vc.actorMargin)}else{const r=t[e]+Vc.actorMargin-i.width/2;i.margin=Math.max(r,Vc.actorMargin)}}}let s=0;return e.forEach(t=>{var e=Gc(Vc),i=t.actorKeys.reduce((t,e)=>t+(r[e].width+(r[e].margin||0)),0),e=(i-=2*Vc.boxTextMargin,t.wrap&&(t.name=Ri.wrapLabel(t.name,i-2*Vc.wrapPadding,e)),Ri.calculateTextDimensions(t.name,e)),e=(s=Math.max(e.height,s),Math.max(i,e.width+2*Vc.wrapPadding));if(t.margin=Vc.boxTextMargin,i<e){const r=(e-i)/2;t.margin+=r}}),e.forEach(t=>t.textMaxHeight=s),Math.max(i,Vc.height)}(c,f,o),Uc.insertComputerIcon(y),Uc.insertDatabaseIcon(y),Uc.insertClockIcon(y),u&&(Hc.bumpVerticalPos(Vc.boxMargin),p)&&Hc.bumpVerticalPos(o[0].textMaxHeight),Qc(y,c,l,0,Vc,h,!1),nh(h,c,f,g));Uc.insertArrowHead(y),Uc.insertArrowCrossHead(y),Uc.insertArrowFilledHead(y),Uc.insertSequenceNumber(y);let b=1,x=1;const k=[];h.forEach(function(t){let e,i,r;switch(t.type){case g.db.LINETYPE.NOTE:i=t.noteModel,a=y,s=i,Hc.bumpVerticalPos(Vc.boxMargin),s.height=Vc.boxMargin,s.starty=Hc.getVerticalPos(),(n=Uc.getNoteRect()).x=s.startx,n.y=s.starty,n.width=s.width||Vc.width,n.class="note",a=a.append("g"),o=Uc.drawRect(a,n),(l=Uc.getTextObj()).x=s.startx,l.y=s.starty,l.width=n.width,l.dy="1em",l.text=s.message,l.class="noteText",l.fontFamily=Vc.noteFontFamily,l.fontSize=Vc.noteFontSize,l.fontWeight=Vc.noteFontWeight,l.anchor=Vc.noteAlign,l.textMargin=Vc.noteMargin,l.valign="center",a=$c(a,l),l=Math.round(a.map(t=>(t._groups||t)[0][0].getBBox().height).reduce((t,e)=>t+e)),o.attr("height",l+2*Vc.noteMargin),s.height+=l+2*Vc.noteMargin,Hc.bumpVerticalPos(l+2*Vc.noteMargin),s.stopy=s.starty+l+2*Vc.noteMargin,s.stopx=s.startx+n.width,Hc.insert(s.startx,s.starty,s.stopx,s.stopy),Hc.models.addNote(s);break;case g.db.LINETYPE.ACTIVE_START:Hc.newActivation(t,y,c);break;case g.db.LINETYPE.ACTIVE_END:a=t,o=Hc.getVerticalPos(),(l=Hc.endActivation(a)).starty+18>o&&(l.starty=o-6,o+=12),Uc.drawActivation(y,l,o,Vc,th(a.from.actor).length),Hc.insert(l.startx,o-10,l.stopx,o);break;case g.db.LINETYPE.LOOP_START:ih(m,t,Vc.boxMargin,Vc.boxMargin+Vc.boxTextMargin,t=>Hc.newLoop(t));break;case g.db.LINETYPE.LOOP_END:e=Hc.endLoop(),Uc.drawLoop(y,e,"loop",Vc),Hc.bumpVerticalPos(e.stopy-Hc.getVerticalPos()),Hc.models.addLoop(e);break;case g.db.LINETYPE.RECT_START:ih(m,t,Vc.boxMargin,Vc.boxMargin,t=>Hc.newLoop(void 0,t.message));break;case g.db.LINETYPE.RECT_END:e=Hc.endLoop(),Uc.drawBackgroundRect(y,e),Hc.models.addLoop(e),Hc.bumpVerticalPos(e.stopy-Hc.getVerticalPos());break;case g.db.LINETYPE.OPT_START:ih(m,t,Vc.boxMargin,Vc.boxMargin+Vc.boxTextMargin,t=>Hc.newLoop(t));break;case g.db.LINETYPE.OPT_END:e=Hc.endLoop(),Uc.drawLoop(y,e,"opt",Vc),Hc.bumpVerticalPos(e.stopy-Hc.getVerticalPos()),Hc.models.addLoop(e);break;case g.db.LINETYPE.ALT_START:ih(m,t,Vc.boxMargin,Vc.boxMargin+Vc.boxTextMargin,t=>Hc.newLoop(t));break;case g.db.LINETYPE.ALT_ELSE:ih(m,t,Vc.boxMargin+Vc.boxTextMargin,Vc.boxMargin,t=>Hc.addSectionToLoop(t));break;case g.db.LINETYPE.ALT_END:e=Hc.endLoop(),Uc.drawLoop(y,e,"alt",Vc),Hc.bumpVerticalPos(e.stopy-Hc.getVerticalPos()),Hc.models.addLoop(e);break;case g.db.LINETYPE.PAR_START:ih(m,t,Vc.boxMargin,Vc.boxMargin+Vc.boxTextMargin,t=>Hc.newLoop(t));break;case g.db.LINETYPE.PAR_AND:ih(m,t,Vc.boxMargin+Vc.boxTextMargin,Vc.boxMargin,t=>Hc.addSectionToLoop(t));break;case g.db.LINETYPE.PAR_END:e=Hc.endLoop(),Uc.drawLoop(y,e,"par",Vc),Hc.bumpVerticalPos(e.stopy-Hc.getVerticalPos()),Hc.models.addLoop(e);break;case g.db.LINETYPE.AUTONUMBER:b=t.message.start||b,x=t.message.step||x,t.message.visible?g.db.enableSequenceNumbers():g.db.disableSequenceNumbers();break;case g.db.LINETYPE.CRITICAL_START:ih(m,t,Vc.boxMargin,Vc.boxMargin+Vc.boxTextMargin,t=>Hc.newLoop(t));break;case g.db.LINETYPE.CRITICAL_OPTION:ih(m,t,Vc.boxMargin+Vc.boxTextMargin,Vc.boxMargin,t=>Hc.addSectionToLoop(t));break;case g.db.LINETYPE.CRITICAL_END:e=Hc.endLoop(),Uc.drawLoop(y,e,"critical",Vc),Hc.bumpVerticalPos(e.stopy-Hc.getVerticalPos()),Hc.models.addLoop(e);break;case g.db.LINETYPE.BREAK_START:ih(m,t,Vc.boxMargin,Vc.boxMargin+Vc.boxTextMargin,t=>Hc.newLoop(t));break;case g.db.LINETYPE.BREAK_END:e=Hc.endLoop(),Uc.drawLoop(y,e,"break",Vc),Hc.bumpVerticalPos(e.stopy-Hc.getVerticalPos()),Hc.models.addLoop(e);break;default:try{(r=t.msgModel).starty=Hc.getVerticalPos(),r.sequenceIndex=b,r.sequenceVisible=g.db.showSequenceNumbers();const e=function(t){Hc.bumpVerticalPos(10);var{startx:e,stopx:i,message:r}=t,a=Et.splitBreaks(r).length,r=Ri.calculateTextDimensions(r,Gc(Vc)),a=r.height/a;let s,n=(t.height+=a,Hc.bumpVerticalPos(a),r.height-10);a=r.width;if(e===i){s=Hc.getVerticalPos()+n,Vc.rightAngles||(n+=Vc.boxMargin,s=Hc.getVerticalPos()+n),n+=30;const o=Math.max(a/2,Vc.width/2);Hc.insert(e-o,Hc.getVerticalPos()-10+n,i+o,Hc.getVerticalPos()+30+n)}else n+=Vc.boxMargin,s=Hc.getVerticalPos()+n,Hc.insert(e,s-10,i,s);return Hc.bumpVerticalPos(n),t.height+=n,t.stopy=t.starty+t.height,Hc.insert(t.fromBounds,t.starty,t.toBounds,t.stopy),s}(r);k.push({messageModel:r,lineStartY:e}),Hc.models.addMessage(r)}catch(t){pt.error("error while drawing message",t)}}var a,s,n,o,l;[g.db.LINETYPE.SOLID_OPEN,g.db.LINETYPE.DOTTED_OPEN,g.db.LINETYPE.SOLID,g.db.LINETYPE.DOTTED,g.db.LINETYPE.SOLID_CROSS,g.db.LINETYPE.DOTTED_CROSS,g.db.LINETYPE.SOLID_POINT,g.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(b+=x)}),k.forEach(i=>{{var r=y,a=i.messageModel,s=(i=i.lineStartY,g),{startx:a,stopx:n,starty:o,message:l,type:c,sequenceIndex:h,sequenceVisible:d}=a,u=Ri.calculateTextDimensions(l,Gc(Vc)),p=Uc.getTextObj(),o=(p.x=a,p.y=o+10,p.width=n-a,p.class="messageText",p.dy="1em",p.text=l,p.fontFamily=Vc.messageFontFamily,p.fontSize=Vc.messageFontSize,p.fontWeight=Vc.messageFontWeight,p.anchor=Vc.messageAlign,p.valign="center",p.textMargin=Vc.wrapPadding,p.tspan=!1,$c(r,p),u.width);let t,e=(a===n?t=Vc.rightAngles?r.append("path").attr("d",`M  ${a},${i} H ${a+Math.max(Vc.width/2,o/2)} V ${i+25} H `+a):r.append("path").attr("d","M "+a+","+i+" C "+(a+60)+","+(i-10)+" "+(a+60)+","+(i+30)+" "+a+","+(i+20)):((t=r.append("line")).attr("x1",a),t.attr("y1",i),t.attr("x2",n),t.attr("y2",i)),c===s.db.LINETYPE.DOTTED||c===s.db.LINETYPE.DOTTED_CROSS||c===s.db.LINETYPE.DOTTED_POINT||c===s.db.LINETYPE.DOTTED_OPEN?(t.style("stroke-dasharray","3, 3"),t.attr("class","messageLine1")):t.attr("class","messageLine0"),"");Vc.arrowMarkerAbsolute&&(e=(e=(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),t.attr("stroke-width",2),t.attr("stroke","none"),t.style("fill","none"),c!==s.db.LINETYPE.SOLID&&c!==s.db.LINETYPE.DOTTED||t.attr("marker-end","url("+e+"#arrowhead)"),c!==s.db.LINETYPE.SOLID_POINT&&c!==s.db.LINETYPE.DOTTED_POINT||t.attr("marker-end","url("+e+"#filled-head)"),c!==s.db.LINETYPE.SOLID_CROSS&&c!==s.db.LINETYPE.DOTTED_CROSS||t.attr("marker-end","url("+e+"#crosshead)"),(d||Vc.showSequenceNumbers)&&(t.attr("marker-start","url("+e+"#sequencenumber)"),r.append("text").attr("x",a).attr("y",i+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(h))}}),Vc.mirrorActors&&(Hc.bumpVerticalPos(2*Vc.boxMargin),Qc(y,c,l,Hc.getVerticalPos(),Vc,h,!0),Hc.bumpVerticalPos(Vc.boxMargin),Pc(y,Hc.getVerticalPos())),Hc.models.boxes.forEach(function(t){t.height=Hc.getVerticalPos()-t.y,Hc.insert(t.x,t.y,t.x+t.width,t.height),t.startx=t.x,t.starty=t.y,t.stopx=t.startx+t.width,t.stopy=t.starty+t.height,t.stroke="rgb(0,0,0, 0.5)",Uc.drawBox(y,t,Vc)}),u&&Hc.bumpVerticalPos(Vc.boxMargin);a=Zc(y,c,l,t),s=Hc.getBounds().bounds;pt.debug("For line height fix Querying: #"+e+" .actor-line"),v("#"+e+" .actor-line").attr("y2",s.stopy);let _=s.stopy-s.starty,C=(_=_<a.maxHeight?a.maxHeight:_)+2*Vc.diagramMarginY,T=(Vc.mirrorActors&&(C=C-Vc.boxMargin+Vc.bottomMarginAdj),s.stopx-s.startx);t=(T=T<a.maxWidth?a.maxWidth:T)+2*Vc.diagramMarginX,d&&y.append("text").text(d).attr("x",(s.stopx-s.startx)/2-2*Vc.diagramMarginX).attr("y",-25),tr(y,C,t,Vc.useMaxWidth),e=d?40:0;y.attr("viewBox",s.startx-Vc.diagramMarginX+" -"+(Vc.diagramMarginY+e)+" "+t+" "+(C+e)),pt.debug("models:",Hc.models)}};var ah=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e=[1,2],i=[1,3],r=[1,5],a=[1,7],s=[2,5],n=[1,15],o=[1,17],l=[1,21],c=[1,22],h=[1,23],d=[1,24],u=[1,37],p=[1,25],g=[1,26],y=[1,27],f=[1,28],m=[1,29],b=[1,32],x=[1,33],k=[1,34],_=[1,35],C=[1,36],v=[1,39],T=[1,40],E=[1,41],S=[1,42],w=[1,38],A=[1,45],B=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],L=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],D=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],I=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],e={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"--\x3e":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"--\x3e",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 4:return r.setRootDoc(s[o]),s[o];case 5:this.$=[];break;case 6:"nl"!=s[o]&&(s[o-1].push(s[o]),this.$=s[o-1]);break;case 7:case 8:case 12:this.$=s[o];break;case 9:this.$="nl";break;case 13:const t=s[o-1];t.description=r.trimColon(s[o]),this.$=t;break;case 14:this.$={stmt:"relation",state1:s[o-2],state2:s[o]};break;case 15:const e=r.trimColon(s[o]);this.$={stmt:"relation",state1:s[o-3],state2:s[o-1],description:e};break;case 19:this.$={stmt:"state",id:s[o-3],type:"default",description:"",doc:s[o-1]};break;case 20:var l,c=s[o],h=s[o-2].trim();s[o].match(":")&&(c=(l=s[o].split(":"))[0],h=[h,l[1]]),this.$={stmt:"state",id:c,type:"default",description:h};break;case 21:this.$={stmt:"state",id:s[o-3],type:"default",description:s[o-5],doc:s[o-1]};break;case 22:this.$={stmt:"state",id:s[o],type:"fork"};break;case 23:this.$={stmt:"state",id:s[o],type:"join"};break;case 24:this.$={stmt:"state",id:s[o],type:"choice"};break;case 25:this.$={stmt:"state",id:r.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:s[o-1].trim(),note:{position:s[o-2].trim(),text:s[o].trim()}};break;case 30:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 31:case 32:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:s[o-1].trim(),classes:s[o].trim()};break;case 35:this.$={stmt:"applyClass",id:s[o-1].trim(),styleClass:s[o].trim()};break;case 38:r.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:r.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:r.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:r.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:s[o].trim(),type:"default",description:""};break;case 46:case 47:this.$={stmt:"state",id:s[o-2].trim(),classes:[s[o].trim()],type:"default",description:""};break;case 50:r.parseDirective("%%{","open_directive");break;case 51:r.parseDirective(s[o],"type_directive");break;case 52:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 53:r.parseDirective("}%%","close_directive","state")}},table:[{3:1,4:e,5:i,6:4,7:r,45:6,60:a},{1:[3]},{3:8,4:e,5:i,6:4,7:r,45:6,60:a},{3:9,4:e,5:i,6:4,7:r,45:6,60:a},{3:10,4:e,5:i,6:4,7:r,45:6,60:a},t([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],s,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:n,5:o,6:30,9:14,10:16,11:18,12:19,13:20,16:l,17:c,19:h,22:d,24:u,25:p,26:g,27:y,28:f,29:m,32:31,33:b,35:x,37:k,38:_,42:C,45:6,50:v,51:T,52:E,53:S,56:w,60:a},{47:43,48:[1,44],63:A},t([48,63],[2,51]),t(B,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:l,17:c,19:h,22:d,24:u,25:p,26:g,27:y,28:f,29:m,32:31,33:b,35:x,37:k,38:_,42:C,45:6,50:v,51:T,52:E,53:S,56:w,60:a},t(B,[2,8]),t(B,[2,9]),t(B,[2,10]),t(B,[2,11]),t(B,[2,12],{14:[1,47],15:[1,48]}),t(B,[2,16]),{18:[1,49]},t(B,[2,18],{20:[1,50]}),{23:[1,51]},t(B,[2,22]),t(B,[2,23]),t(B,[2,24]),t(B,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},t(B,[2,28]),t(B,[2,29]),{34:[1,56]},{36:[1,57]},t(B,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},t(L,[2,44],{57:[1,61]}),t(L,[2,45],{57:[1,62]}),t(B,[2,38]),t(B,[2,39]),t(B,[2,40]),t(B,[2,41]),t(D,[2,36]),{49:63,62:[1,64]},t(D,[2,53]),t(B,[2,7]),t(B,[2,13]),{13:65,24:u,56:w},t(B,[2,17]),t(I,s,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},t(B,[2,30]),t(B,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:A},{63:[2,52]},t(B,[2,14],{14:[1,76]}),{4:n,5:o,6:30,9:14,10:16,11:18,12:19,13:20,16:l,17:c,19:h,21:[1,77],22:d,24:u,25:p,26:g,27:y,28:f,29:m,32:31,33:b,35:x,37:k,38:_,42:C,45:6,50:v,51:T,52:E,53:S,56:w,60:a},t(B,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},t(B,[2,33]),t(B,[2,34]),t(B,[2,35]),t(L,[2,46]),t(L,[2,47]),t(D,[2,37]),t(B,[2,15]),t(B,[2,19]),t(I,s,{8:81}),t(B,[2,26]),t(B,[2,27]),{4:n,5:o,6:30,9:14,10:16,11:18,12:19,13:20,16:l,17:c,19:h,21:[1,82],22:d,24:u,25:p,26:g,27:y,28:f,29:m,32:31,33:b,35:x,37:k,38:_,42:C,45:6,50:v,51:T,52:E,53:S,56:w,60:a},t(B,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};i={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,r){switch(i){case 0:return 41;case 1:case 44:return 50;case 2:case 45:return 51;case 3:case 46:return 52;case 4:case 47:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:case 11:case 13:case 14:case 15:case 16:case 56:case 58:case 64:break;case 12:case 79:return 5;case 17:case 34:return this.pushState("SCALE"),17;case 18:case 35:return 18;case 19:case 25:case 36:case 51:case 54:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 37:this.pushState("STATE");break;case 38:case 41:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),25;case 39:case 42:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),26;case 40:case 43:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),27;case 48:this.pushState("STATE_STRING");break;case 49:return this.pushState("STATE_ID"),"AS";case 50:case 66:return this.popState(),"ID";case 52:return"STATE_DESCR";case 53:return 19;case 55:return this.popState(),this.pushState("struct"),20;case 57:return this.popState(),21;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 65:return"NOTE_TEXT";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),e.yytext=e.yytext.substr(2).trim(),31;case 69:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),31;case 70:case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return e.yytext=e.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};function O(){this.yy={}}return e.lexer=i,new((O.prototype=e).Parser=O)}();const oh=ah.parser=ah,lh=(t,e)=>{return"dagre-wrapper"!==(null==(e=null==e?void 0:e.state)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*stateDiagram/)},ch=(t,e)=>{return null!==t.match(/^\s*stateDiagram-v2/)||!(!t.match(/^\s*stateDiagram/)||"dagre-wrapper"!==(null==(t=null==e?void 0:e.state)?void 0:t.defaultRenderer))},hh="state",dh="relation",uh="default",ph="divider",gh="[*]",yh="start",fh=gh,mh="color",bh="fill";let xh="LR",kh=[],_h={},Ch={root:{relations:[],states:{},documents:{}}},Th=Ch.root,Eh=0,vh=0;const Sh=t=>JSON.parse(JSON.stringify(t)),wh=(i,r,a)=>{if(r.stmt===dh)wh(i,r.state1,!0),wh(i,r.state2,!1);else if(r.stmt===hh&&("[*]"===r.id?(r.id=a?i.id+"_start":i.id+"_end",r.start=a):r.id=r.id.trim()),r.doc){const i=[];let t,e=[];for(t=0;t<r.doc.length;t++){var s;r.doc[t].type===ph?((s=Sh(r.doc[t])).doc=Sh(e),i.push(s),e=[]):e.push(r.doc[t])}if(0<i.length&&0<e.length){const a={stmt:hh,id:Ei(),type:"divider",doc:Sh(e)};i.push(Sh(a)),r.doc=i}r.doc.forEach(t=>wh(r,t,!0))}},Ah=function(t,e=uh,i=null,r=null,a=null,s=null,n=null,o=null){const l=null==t?void 0:t.trim();void 0===Th.states[l]?(pt.info("Adding state ",l,r),Th.states[l]={id:l,descriptions:[],type:e,doc:i,note:a,classes:[],styles:[],textStyles:[]}):(Th.states[l].doc||(Th.states[l].doc=i),Th.states[l].type||(Th.states[l].type=e)),r&&(pt.info("Setting state description",l,r),"string"==typeof r&&Fh(l,r.trim()),"object"==typeof r)&&r.forEach(t=>Fh(l,t.trim())),a&&(Th.states[l].note=a,Th.states[l].note.text=Et.sanitizeText(Th.states[l].note.text,Hi())),s&&(pt.info("Setting state classes",l,s),("string"==typeof s?[s]:s).forEach(t=>$h(l,t.trim()))),n&&(pt.info("Setting state styles",l,n),("string"==typeof n?[n]:n).forEach(t=>Rh(l,t.trim()))),o&&(pt.info("Setting state styles",l,n),("string"==typeof o?[o]:o).forEach(t=>Mh(l,t.trim())))},Bh=function(t){Ch={root:{relations:[],states:{},documents:{}}},Th=Ch.root,Eh=0,_h={},t||kr()},Lh=function(t){return Th.states[t]};function Dh(t=""){let e=t;return t===gh&&(Eh++,e=""+yh+Eh),e}function Ih(t="",e=uh){return t===gh?yh:e}const Oh=function(t,e,i){var r,a,s,n,o,l,c;"object"==typeof t?(a=e,s=i,n=Dh((r=t).id.trim()),o=Ih(r.id.trim(),r.type),l=Dh(a.id.trim()),c=Ih(a.id.trim(),a.type),Ah(n,o,r.doc,r.description,r.note,r.classes,r.styles,r.textStyles),Ah(l,c,a.doc,a.description,a.note,a.classes,a.styles,a.textStyles),Th.relations.push({id1:n,id2:l,relationTitle:Et.sanitizeText(s,Hi())})):(o=Dh(t.trim()),r=Ih(t),c=function(t=""){let e=t;return t===fh&&(Eh++,e="end"+Eh),e}(e.trim()),[a="",n=uh]=[e],l=a===fh?"end":n,Ah(o,r),Ah(c,l),Th.relations.push({id1:o,id2:c,title:Et.sanitizeText(i,Hi())}))},Fh=function(t,e){t=Th.states[t],e=e.startsWith(":")?e.replace(":","").trim():e;t.descriptions.push(Et.sanitizeText(e,Hi()))},Nh=function(t,e=""){void 0===_h[t]&&(_h[t]={id:t,styles:[],textStyles:[]});const i=_h[t];null!=e&&e.split(",").forEach(t=>{var e=t.replace(/([^;]*);/,"$1").trim();if(t.match(mh)){const t=e.replace(bh,"bgFill").replace(mh,bh);i.textStyles.push(t)}i.styles.push(e)})},$h=function(t,i){t.split(",").forEach(function(t){let e=Lh(t);if(void 0===e){const i=t.trim();Ah(i),e=Lh(i)}e.classes.push(i)})},Rh=function(t,e){t=Lh(t);void 0!==t&&t.textStyles.push(e)},Mh=function(t,e){t=Lh(t);void 0!==t&&t.textStyles.push(e)},Ph={parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},getConfig:()=>Hi().state,addState:Ah,clear:Bh,getState:Lh,getStates:function(){return Th.states},getRelations:function(){return Th.relations},getClasses:function(){return _h},getDirection:()=>xh,addRelation:Oh,getDividerId:()=>"divider-id-"+ ++vh,setDirection:t=>{xh=t},cleanupLabel:function(t){return(":"===t.substring(0,1)?t.substr(2):t).trim()},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},logDocuments:function(){pt.info("Documents = ",Ch)},getRootDoc:()=>kh,setRootDoc:t=>{pt.info("Setting root doc",t),kh=t},getRootDocV2:()=>(wh({id:"root"},{id:"root",doc:kh},!0),{id:"root",doc:kh}),extract:t=>{t=t.doc||t;pt.info(t),Bh(!0),pt.info("Extract",t),t.forEach(t=>{switch(t.stmt){case hh:Ah(t.id.trim(),t.type,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles);break;case dh:Oh(t.state1,t.state2,t.description);break;case"classDef":Nh(t.id.trim(),t.classes);break;case"applyClass":$h(t.id.trim(),t.styleClass)}})},trimColon:t=>(t&&":"===t[0]?t.substr(1):t).trim(),getAccTitle:Cr,setAccTitle:_r,getAccDescription:Er,setAccDescription:Tr,addStyleClass:Nh,setCssClass:$h,addDescription:Fh,setDiagramTitle:vr,getDiagramTitle:Sr},zh=(t,e)=>{const i=t.append("text").attr("x",2*Hi().state.padding).attr("y",Hi().state.textHeight+1.3*Hi().state.padding).attr("font-size",Hi().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),r=i.height,a=t.append("text").attr("x",Hi().state.padding).attr("y",r+.4*Hi().state.padding+Hi().state.dividerMargin+Hi().state.textHeight).attr("class","state-description");let s=!0,n=!0;e.descriptions.forEach(function(t){{var e,i;s||(e=a,i=n,e=e.append("tspan").attr("x",2*Hi().state.padding).text(t),i||e.attr("dy",Hi().state.textHeight),n=!1)}s=!1});var e=t.append("line").attr("x1",Hi().state.padding).attr("y1",Hi().state.padding+r+Hi().state.dividerMargin/2).attr("y2",Hi().state.padding+r+Hi().state.dividerMargin/2).attr("class","descr-divider"),o=a.node().getBBox(),l=Math.max(o.width,i.width);return e.attr("x2",l+3*Hi().state.padding),t.insert("rect",":first-child").attr("x",Hi().state.padding).attr("y",Hi().state.padding).attr("width",l+2*Hi().state.padding).attr("height",o.height+r+2*Hi().state.padding).attr("rx",Hi().state.radius),t},jh=(t,e,i)=>{var r=Hi().state.padding,a=2*Hi().state.padding,s=t.node().getBBox(),n=s.width,s=s.x,o=t.append("text").attr("x",0).attr("y",Hi().state.titleShift).attr("font-size",Hi().state.fontSize).attr("class","state-title").text(e.id),l=o.node().getBBox().width+a;let c,h=Math.max(l,n);h===n&&(h+=a);var d=t.node().getBBox(),e=(e.doc,c=s-r,n<l&&(c=(n-h)/2+r),Math.abs(s-d.x)<r&&n<l&&(c=s-(l-n)/2),1-Hi().state.textHeight);return t.insert("rect",":first-child").attr("x",c).attr("y",e).attr("class",i?"alt-composit":"composit").attr("width",h).attr("height",d.height+Hi().state.textHeight+Hi().state.titleShift+1).attr("rx","0"),o.attr("x",c+r),l<=n&&o.attr("x",s+(h-a)/2-l/2+r),t.insert("rect",":first-child").attr("x",c).attr("y",Hi().state.titleShift-Hi().state.textHeight-Hi().state.padding).attr("width",h).attr("height",3*Hi().state.textHeight).attr("rx",Hi().state.radius),t.insert("rect",":first-child").attr("x",c).attr("y",Hi().state.titleShift-Hi().state.textHeight-Hi().state.padding).attr("width",h).attr("height",d.height+3+2*Hi().state.textHeight).attr("rx",Hi().state.radius),t},Yh=(t,e)=>{e.attr("class","state-note");var i=e.append("rect").attr("x",0).attr("y",Hi().state.padding),{textWidth:t,textHeight:e}=((t,e)=>{let i=0;var r=e.append("text");r.style("text-anchor","start"),r.attr("class","noteText");let a=t.replace(/\r\n/g,"<br/>");e=(a=a.replace(/\n/g,"<br/>")).split(Et.lineBreakRegex);let s=1.25*Hi().state.noteMargin;for(const t of e){const e=t.trim();if(0<e.length){const t=r.append("tspan");t.text(e),0===s&&(s+=t.node().getBBox().height),i+=s,t.attr("x",0+Hi().state.noteMargin),t.attr("y",0+i+1.25*Hi().state.noteMargin)}}return{textWidth:r.node().getBBox().width,textHeight:i}})(t,e.append("g"));return i.attr("height",e+2*Hi().state.noteMargin),i.attr("width",t+2*Hi().state.noteMargin),i},Wh=function(i,r){var a=r.id,t={id:a,label:r.id,width:0,height:0},i=i.append("g").attr("id",a).attr("class","stateGroup");if("start"===r.type&&i.append("circle").attr("class","start-state").attr("r",Hi().state.sizeUnit).attr("cx",Hi().state.padding+Hi().state.sizeUnit).attr("cy",Hi().state.padding+Hi().state.sizeUnit),"end"===r.type&&((a=i).append("circle").attr("class","end-state-outer").attr("r",Hi().state.sizeUnit+Hi().state.miniPadding).attr("cx",Hi().state.padding+Hi().state.sizeUnit+Hi().state.miniPadding).attr("cy",Hi().state.padding+Hi().state.sizeUnit+Hi().state.miniPadding),a.append("circle").attr("class","end-state-inner").attr("r",Hi().state.sizeUnit).attr("cx",Hi().state.padding+Hi().state.sizeUnit+2).attr("cy",Hi().state.padding+Hi().state.sizeUnit+2)),"fork"===r.type||"join"===r.type){a=i;var s=r;let t=Hi().state.forkWidth,e=Hi().state.forkHeight;s.parentId&&(s=t,t=e,e=s),a.append("rect").style("stroke","black").style("fill","black").attr("width",t).attr("height",e).attr("x",Hi().state.padding).attr("y",Hi().state.padding)}"note"===r.type&&Yh(r.note.text,i),"divider"===r.type&&i.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",Hi().state.textHeight).attr("class","divider").attr("x2",2*Hi().state.textHeight).attr("y1",0).attr("y2",0),"default"===r.type&&0===r.descriptions.length&&(a=r,a=(s=i).append("text").attr("x",2*Hi().state.padding).attr("y",Hi().state.textHeight+2*Hi().state.padding).attr("font-size",Hi().state.fontSize).attr("class","state-title").text(a.id).node().getBBox(),s.insert("rect",":first-child").attr("x",Hi().state.padding).attr("y",Hi().state.padding).attr("width",a.width+2*Hi().state.padding).attr("height",a.height+2*Hi().state.padding).attr("rx",Hi().state.radius));"default"===r.type&&0<r.descriptions.length&&zh(i,r);a=i.node().getBBox();return t.width=a.width+2*Hi().state.padding,t.height=a.height+2*Hi().state.padding,t};let qh=0,Uh;const Vh={},Hh=(e,i,r,a,s,o,l)=>{const u=new tt.Graph({compound:!0,multigraph:!0});let t,c=!0;for(t=0;t<e.length;t++)if("relation"===e[t].stmt){c=!1;break}r?u.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:c?1:Uh.edgeLengthFactor,nodeSep:c?1:50,isMultiGraph:!0}):u.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:c?1:Uh.edgeLengthFactor,nodeSep:c?1:50,ranker:"tight-tree",isMultiGraph:!0}),u.setDefaultEdgeLabel(function(){return{}}),l.db.extract(e);var h,d=l.db.getStates(),p=l.db.getRelations();for(const e of Object.keys(d)){const n=d[e];let t;if(r&&(n.parentId=r),n.doc?(h=i.append("g").attr("id",n.id).attr("class","stateGroup"),t=Hh(n.doc,h,n.id,!a,s,o,l),h=(h=jh(h,n,a)).node().getBBox(),t.width=h.width,t.height=h.height+Uh.padding/2,Vh[n.id]={y:Uh.compositTitleSize}):t=Wh(i,n),n.note){const e={descriptions:[],id:n.id+"-note",note:n.note,type:"note"},r=Wh(i,e);"left of"===n.note.position?(u.setNode(t.id+"-note",r),u.setNode(t.id,t)):(u.setNode(t.id,t),u.setNode(t.id+"-note",r)),u.setParent(t.id,t.id+"-group"),u.setParent(t.id+"-note",t.id+"-group")}else u.setNode(t.id,t)}pt.debug("Count=",u.nodeCount(),u);let g=0;p.forEach(function(t){var e;g++,pt.debug("Setting edge",t),u.setEdge(t.id1,t.id2,{relation:t,width:(e=t.title)?e.length*Uh.fontSizeFactor:1,height:Uh.labelHeight*Et.getRows(t.title).length,labelpos:"c"},"id"+g)}),J(u),pt.debug("Graph after layout",u.nodes());const y=i.node();u.nodes().forEach(function(t){void 0!==t&&void 0!==u.node(t)?(pt.warn("Node "+t+": "+JSON.stringify(u.node(t))),s.select("#"+y.id+" #"+t).attr("transform","translate("+(u.node(t).x-u.node(t).width/2)+","+(u.node(t).y+(Vh[t]?Vh[t].y:0)-u.node(t).height/2)+" )"),s.select("#"+y.id+" #"+t).attr("data-x-shift",u.node(t).x-u.node(t).width/2),o.querySelectorAll("#"+y.id+" #"+t+" .divider").forEach(t=>{var e=t.parentElement;let i=0,r=0;e&&(e.parentElement&&(i=e.parentElement.getBBox().width),r=parseInt(e.getAttribute("data-x-shift"),10),Number.isNaN(r))&&(r=0),t.setAttribute("x1",0-r+8),t.setAttribute("x2",i-r-8)})):pt.debug("No Node "+t+": "+JSON.stringify(u.node(t)))});y.getBBox();u.edges().forEach(function(e){if(void 0!==e&&void 0!==u.edge(e)){pt.debug("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(u.edge(e)));{var a=i,s=u.edge(e),o=u.edge(e).relation;s.points=s.points.filter(t=>!Number.isNaN(t.y));const c=s.points,h=Y().x(function(t){return t.x}).y(function(t){return t.y}).curve(n),d=a.append("path").attr("d",h(c)).attr("id","edge"+qh).attr("class","transition");let t="";if(Hi().state.arrowMarkerAbsolute&&(t=(t=(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),d.attr("marker-end","url("+t+"#"+function(){switch(Ph.relationType.DEPENDENCY){case Ph.relationType.AGGREGATION:return"aggregation";case Ph.relationType.EXTENSION:return"extension";case Ph.relationType.COMPOSITION:return"composition";case Ph.relationType.DEPENDENCY:return"dependency"}}()+"End)"),void 0!==o.title){const c=a.append("g").attr("class","stateLabel"),{x:n,y:h}=Ri.calcLabelPosition(s.points),d=Et.getRows(o.title);let i=0;var l=[];let e=0,r=0;for(let t=0;t<=d.length;t++){const s=c.append("text").attr("text-anchor","middle").text(d[t]).attr("x",n).attr("y",h+i),o=s.node().getBBox();if(e=Math.max(e,o.width),r=Math.min(r,o.x),pt.info(o.x,n,h+i),0===i){const a=s.node().getBBox();i=a.height,pt.info("Title height",i,h)}l.push(s)}let t=i*d.length;if(1<d.length){const a=(d.length-1)*i*.5;l.forEach((t,e)=>t.attr("y",h+e*i-a)),t=i*d.length}a=c.node().getBBox();c.insert("rect",":first-child").attr("class","box").attr("x",n-e/2-Hi().state.padding/2).attr("y",h-t/2-Hi().state.padding/2-3.5).attr("width",e+Hi().state.padding).attr("height",t+Hi().state.padding),pt.info(a)}qh++}}}),p=y.getBBox();var f={id:r||"root",label:r||"root",width:0,height:0};return f.width=p.width+2*Uh.padding,f.height=p.height+2*Uh.padding,pt.debug("Doc rendered",f,u),f},Gh={setConf:function(){},draw:function(t,e,i,a){Uh=Hi().state;var s=Hi().securityLevel;let n;"sandbox"===s&&(n=r("#i"+e));var o=r("sandbox"===s?n.nodes()[0].contentDocument.body:"body"),s="sandbox"===s?n.nodes()[0].contentDocument:document,t=(pt.debug("Rendering diagram "+t),o.select(`[id='${e}']`)),e=(t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z"),new tt.Graph({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}}),a.db.getRootDoc()),e=(Hh(e,t,void 0,!1,o,s,a),Uh.padding),o=t.node().getBBox(),s=o.width+2*e,a=o.height+2*e;tr(t,a,1.75*s,Uh.useMaxWidth),t.attr("viewBox",`${o.x-Uh.padding}  ${o.y-Uh.padding} `+s+" "+a)}},Xh="rect",Kh="rectWithTitle",Qh="statediagram",Zh=Qh+"-state",Jh="transition",td=Jh+" note-edge",ed=Qh+"-note",id=Qh+"-cluster",rd=Qh+"-cluster-alt",nd="parent",sd="note",ad="----",od=""+ad+sd,ld=""+ad+nd,cd="fill:none",hd="fill: #333",dd="text",ud="normal";let pd={},gd=0;function yd(t="",e=0,i="",r=ad){return`state-${t}${null!==i&&0<i.length?""+r+i:""}-`+e}const fd=(i,r,a,s,n,o)=>{const l=a.id,c=null!=(t=s[l])&&t.classes?t.classes.join(" "):"";var t;if("root"!==l){let t=Xh;!0===a.start&&(t="start"),!1===a.start&&(t="end"),a.type!==uh&&(t=a.type),pd[l]||(pd[l]={id:l,shape:t,description:Et.sanitizeText(l,Hi()),classes:c+" "+Zh});const s=pd[l],n=(a.description&&(Array.isArray(s.description)?(s.shape=Kh,s.description.push(a.description)):0<s.description.length?(s.shape=Kh,s.description===l?s.description=[a.description]:s.description=[s.description,a.description]):(s.shape=Xh,s.description=a.description),s.description=Et.sanitizeTextOrArray(s.description,Hi())),1===s.description.length&&s.shape===Kh&&(s.shape=Xh),!s.type&&a.doc&&(pt.info("Setting cluster for ",l,bd(a)),s.type="group",s.dir=bd(a),s.shape=a.type===ph?"divider":"roundedWithTitle",s.classes=s.classes+" "+id+" "+(o?rd:"")),{labelStyle:"",shape:s.shape,labelText:s.description,classes:s.classes,style:"",id:l,dir:s.dir,domId:yd(l,gd),type:s.type,padding:15});if(a.note){const r={labelStyle:"",shape:"note",labelText:a.note.text,classes:ed,style:"",id:l+od+"-"+gd,domId:yd(l,gd,sd),type:s.type,padding:15},o={labelStyle:"",shape:"noteGroup",labelText:a.note.text,classes:s.classes,style:"",id:l+ld,domId:yd(l,gd,nd),type:"group",padding:0},c=(gd++,l+ld);i.setNode(c,o),i.setNode(r.id,r),i.setNode(l,n),i.setParent(l,c),i.setParent(r.id,c);let t=l,e=r.id;"left of"===a.note.position&&(t=r.id,e=l),i.setEdge(t,e,{arrowhead:"none",arrowType:"",style:cd,labelStyle:"",classes:td,arrowheadStyle:hd,labelpos:"c",labelType:dd,thickness:ud})}else i.setNode(l,n)}r&&"root"!==r.id&&(pt.trace("Setting node ",l," to be child of its parent ",r.id),i.setParent(l,r.id)),a.doc&&(pt.trace("Adding nodes children "),md(i,a,a.doc,s,n,!o))},md=(i,r,t,a,s,n)=>{pt.trace("items",t),t.forEach(t=>{switch(t.stmt){case hh:case uh:fd(i,r,t,a,s,n);break;case dh:fd(i,r,t.state1,a,s,n),fd(i,r,t.state2,a,s,n);var e={id:"edge"+gd,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:cd,labelStyle:"",label:Et.sanitizeText(t.description,Hi()),arrowheadStyle:hd,labelpos:"c",labelType:dd,thickness:ud,classes:Jh};i.setEdge(t.state1.id,t.state2.id,e,gd),gd++}})},bd=(e,t="TB")=>{let i=t;if(e.doc)for(let t=0;t<e.doc.length;t++){var r=e.doc[t];"dir"===r.stmt&&(i=r.value)}return i},xd={setConf:function(t){for(const e of Object.keys(t))t[e]},getClasses:function(t,e){pt.trace("Extracting classes"),e.db.clear();try{return e.parser.parse(t),e.db.extract(e.db.getRootDocV2()),e.db.getClasses()}catch(t){return t}},draw:function(t,e,i,a){pt.info("Drawing state diagram (v2)",e),pd={},a.db.getDirection();var{securityLevel:s,state:n}=Hi(),o=n.nodeSpacing||50,l=n.rankSpacing||50,c=(pt.info(a.db.getRootDocV2()),a.db.extract(a.db.getRootDocV2()),pt.info(a.db.getRootDocV2()),a.db.getStates()),o=new tt.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:bd(a.db.getRootDocV2()),nodesep:o,ranksep:l,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let h;fd(o,void 0,a.db.getRootDocV2(),c,a.db,!0),"sandbox"===s&&(h=r("#i"+e));l=r("sandbox"===s?h.nodes()[0].contentDocument.body:"body"),c=l.select(`[id="${e}"]`),s=l.select("#"+e+" g"),Ia(s,o,["barb"],Qh,e),Ri.insertTitle(c,"statediagramTitleText",n.titleTopMargin,a.db.getDiagramTitle()),l=c.node().getBBox(),s=l.width+16,o=l.height+16,c.attr("class",Qh),a=c.node().getBBox(),tr(c,o,s,n.useMaxWidth),l=`${a.x-8} ${a.y-8} ${s} `+o,pt.debug("viewBox "+l),c.attr("viewBox",l),n=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const t of n){const e=t.getBBox(),i=document.createElementNS("http://www.w3.org/2000/svg",Xh);i.setAttribute("rx",0),i.setAttribute("ry",0),i.setAttribute("width",e.width),i.setAttribute("height",e.height),t.insertBefore(i,t.firstChild)}}};var kd=function(){function t(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i}var e=[1,2],i=[1,5],r=[6,9,11,17,18,20,22,23,24,26],a=[1,15],s=[1,16],n=[1,17],o=[1,18],l=[1,19],c=[1,20],h=[1,24],d=[4,6,9,11,17,18,20,22,23,24,26],e={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,i,r,a,s,n){var o=s.length-1;switch(a){case 1:return s[o-1];case 3:case 7:case 8:this.$=[];break;case 4:s[o-1].push(s[o]),this.$=s[o-1];break;case 5:case 6:this.$=s[o];break;case 11:r.setDiagramTitle(s[o].substr(6)),this.$=s[o].substr(6);break;case 12:this.$=s[o].trim(),r.setAccTitle(this.$);break;case 13:case 14:this.$=s[o].trim(),r.setAccDescription(this.$);break;case 15:r.addSection(s[o].substr(8)),this.$=s[o].substr(8);break;case 16:r.addTask(s[o-1],s[o]),this.$="task";break;case 18:r.parseDirective("%%{","open_directive");break;case 19:r.parseDirective(s[o],"type_directive");break;case 20:s[o]=s[o].trim().replace(/'/g,'"'),r.parseDirective(s[o],"arg_directive");break;case 21:r.parseDirective("}%%","close_directive","journey")}},table:[{3:1,4:e,7:3,12:4,26:i},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,26:i},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:a,18:s,20:n,22:o,23:l,24:c,26:i},{1:[2,2]},{14:22,15:[1,23],29:h},t([15,29],[2,19]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:21,10:25,12:4,17:a,18:s,20:n,22:o,23:l,24:c,26:i},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),{19:[1,26]},{21:[1,27]},t(r,[2,14]),t(r,[2,15]),{25:[1,28]},t(r,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},t(r,[2,5]),t(r,[2,12]),t(r,[2,13]),t(r,[2,16]),t(d,[2,9]),{14:32,29:h},{29:[2,20]},{11:[1,33]},t(d,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(t,e){var i;if(!e.recoverable)throw(i=new Error(t)).hash=e,i;this.trace(t)},parse:function(t){var e,i=[0],r=[],a=[null],s=[],n=this.table,o="",l=0,c=0,h=s.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(u.yy[e]=this.yy[e]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc,g=(s.push(p),d.options&&d.options.ranges);"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,f,m,b,x,k,_={};;){if(f=i[i.length-1],void 0===(m=this.defaultActions[f]||(null==y&&(C=void 0,"number"!=typeof(C=r.pop()||d.lex()||1)&&(C instanceof Array&&(C=(r=C).pop()),C=this.symbols_[C]||C),y=C),n[f]&&n[f][y]))||!m.length||!m[0]){var C,v=[];for(b in n[f])this.terminals_[b]&&2<b&&v.push("'"+this.terminals_[b]+"'");C=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[y]||y,line:d.yylineno,loc:p,expected:v})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+y);switch(m[0]){case 1:i.push(y),a.push(d.yytext),s.push(d.yylloc),i.push(m[1]),y=null,c=d.yyleng,o=d.yytext,l=d.yylineno,p=d.yylloc;break;case 2:if(x=this.productions_[m[1]][1],_.$=a[a.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},g&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(_,[o,c,l,u.yy,m[1],a,s].concat(h))))return k;x&&(i=i.slice(0,-1*x*2),a=a.slice(0,-1*x),s=s.slice(0,-1*x)),i.push(this.productions_[m[1]][0]),a.push(_.$),s.push(_._$),k=n[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}};a={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),r=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===t.length?this.yylloc.first_column:0)+t[t.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(r.yylloc.range=this.yylloc.range.slice(0)),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack)for(var a in r)this[a]=r[a];return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((i=this._input.match(this.rules[a[s]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,r){switch(i){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:case 6:case 8:case 9:break;case 7:return 11;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};function u(){this.yy={}}return e.lexer=a,new((u.prototype=e).Parser=u)}();const _d=kd.parser=kd,Cd=t=>null!==t.match(/^\s*journey/);let Td="";const Ed=[],vd=[],Sd=[],wd=function(){let t=!0;for(var[e,i]of Sd.entries())Sd[e].processed,t=t&&i.processed;return t},Ad={parseDirective:function(t,e,i){Su.parseDirective(this,t,e,i)},getConfig:()=>Hi().journey,clear:function(){Ed.length=0,vd.length=0,Td="",Sd.length=0,kr()},setDiagramTitle:vr,getDiagramTitle:Sr,setAccTitle:_r,getAccTitle:Cr,setAccDescription:Tr,getAccDescription:Er,addSection:function(t){Td=t,Ed.push(t)},getSections:function(){return Ed},getTasks:function(){let t=wd(),e=0;for(;!t&&e<100;)t=wd(),e++;return vd.push(...Sd),vd},addTask:function(t,e){e=e.substr(1).split(":");let i=0,r=[];e=(r=1===e.length?(i=Number(e[0]),[]):(i=Number(e[0]),e[1].split(","))).map(t=>t.trim()),e={section:Td,type:Td,people:e,task:t,score:i};Sd.push(e)},addTaskOrg:function(t){t={section:Td,type:Td,description:t,task:t,classes:[]};vd.push(t)},getActors:function(){{const e=[];return vd.forEach(t=>{t.people&&e.push(...t.people)}),[...new Set(e)].sort()}}},Bd=function(t,e){t=t.append("rect");return t.attr("x",e.x),t.attr("y",e.y),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",e.width),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),void 0!==e.class&&t.attr("class",e.class),t},Ld=function(t,e){t=t.append("circle");return t.attr("cx",e.cx),t.attr("cy",e.cy),t.attr("class","actor-"+e.pos),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("r",e.r),void 0!==t.class&&t.attr("class",t.class),void 0!==e.title&&t.append("title").text(e.title),t},Dd=function(t,e){var i=e.text.replace(/<br\s*\/?>/gi," "),t=t.append("text"),r=(t.attr("x",e.x),t.attr("y",e.y),t.attr("class","legend"),t.style("text-anchor",e.anchor),void 0!==e.class&&t.attr("class",e.class),t.append("tspan"));return r.attr("x",e.x+2*e.textMargin),r.text(i),t};let Id=-1;const Od=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},Fd=function(){function e(t,e,i,r,a,s,n,o){p(e.append("text").attr("x",i+a/2).attr("y",r+s/2+5).style("font-color",o).style("text-anchor","middle").text(t),n)}function c(t,e,i,r,a,s,n,o,l){var{taskFontSize:c,taskFontFamily:h}=o,d=t.split(/<br\s*\/?>/gi);for(let t=0;t<d.length;t++){const o=t*c-c*(d.length-1)/2,u=e.append("text").attr("x",i+a/2).attr("y",r).attr("fill",l).style("text-anchor","middle").style("font-size",c).style("font-family",h);u.append("tspan").attr("x",i+a/2).attr("dy",o).text(d[t]),u.attr("y",r+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),p(u,n)}}function i(t,e,i,r,a,s,n,o){var e=e.append("switch"),l=e.append("foreignObject").attr("x",i).attr("y",r).attr("width",a).attr("height",s).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");l.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),c(t,e,i,r,a,s,n,o),p(l,n)}function p(t,e){for(const i in e)i in e&&t.attr(i,e[i])}return function(t){return"fo"===t.textPlacement?i:"old"===t.textPlacement?e:c}}(),Nd=Ld,$d=function(t,e,i){var t=t.append("g"),r=Od();r.x=e.x,r.y=e.y,r.fill=e.fill,r.width=i.width,r.height=i.height,r.class="journey-section section-type-"+e.num,r.rx=3,r.ry=3,Bd(t,r),Fd(i)(e.text,t,r.x,r.y,r.width,r.height,{class:"journey-section section-type-"+e.num},i,e.colour)},Rd=Dd,Md=function(t,i,e){const r=i.x+e.width/2,a=t.append("g");Id++,a.append("line").attr("id","task"+Id).attr("x1",r).attr("y1",i.y).attr("x2",r).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666");{t=a;var s={cx:r,cy:300+30*(5-i.score),score:i.score},n;t.append("circle").attr("cx",s.cx).attr("cy",s.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible");const l=t.append("g");l.append("circle").attr("cx",s.cx-5).attr("cy",s.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),l.append("circle").attr("cx",s.cx+5).attr("cy",s.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),3<s.score?(t=l,n=j().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(15/2.2),t.append("path").attr("class","mouth").attr("d",n).attr("transform","translate("+s.cx+","+(s.cy+2)+")")):s.score<3?(t=l,n=j().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(15/2.2),t.append("path").attr("class","mouth").attr("d",n).attr("transform","translate("+s.cx+","+(s.cy+7)+")")):l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",s.cx-5).attr("y1",s.cy+7).attr("x2",s.cx+5).attr("y2",s.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}t=Od();t.x=i.x,t.y=i.y,t.fill=i.fill,t.width=e.width,t.height=e.height,t.class="task task-type-"+i.num,t.rx=3,t.ry=3,Bd(a,t);let o=i.x+14;i.people.forEach(t=>{var e=i.actors[t].color,e={cx:o,cy:i.y,r:7,fill:e,stroke:"#000",title:t,pos:i.actors[t].position};Ld(a,e),o+=10}),Fd(e)(i.task,a,t.x,t.y,t.width,t.height,{class:"task"},e,i.colour)},Pd=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},zd={},jd=Hi().journey,Yd=jd.leftMargin,Wd={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,i,r){void 0===t[e]?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(i,r,a,s){const n=Hi().journey,o=this;let l=0;this.sequenceItems.forEach(function(t){l++;var e=o.sequenceItems.length-l+1;o.updateVal(t,"starty",r-e*n.boxMargin,Math.min),o.updateVal(t,"stopy",s+e*n.boxMargin,Math.max),o.updateVal(Wd.data,"startx",i-e*n.boxMargin,Math.min),o.updateVal(Wd.data,"stopx",a+e*n.boxMargin,Math.max),o.updateVal(t,"startx",i-e*n.boxMargin,Math.min),o.updateVal(t,"stopx",a+e*n.boxMargin,Math.max),o.updateVal(Wd.data,"starty",r-e*n.boxMargin,Math.min),o.updateVal(Wd.data,"stopy",s+e*n.boxMargin,Math.max)})},insert:function(t,e,i,r){var a=Math.min(t,i),t=Math.max(t,i),i=Math.min(e,r),e=Math.max(e,r);this.updateVal(Wd.data,"startx",a,Math.min),this.updateVal(Wd.data,"starty",i,Math.min),this.updateVal(Wd.data,"stopx",t,Math.max),this.updateVal(Wd.data,"stopy",e,Math.max),this.updateBounds(a,i,t,e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},qd=jd.sectionFills,Ud=jd.sectionColours,Vd=function(t,e,i){var r=Hi().journey;let a="";var s=i+(2*r.height+r.diagramMarginY);let n=0,o="#CCC",l="black",c=0;for(const[i,h]of e.entries()){if(a!==h.section){o=qd[n%qd.length],c=n%qd.length,l=Ud[n%Ud.length];const e={x:i*r.taskMargin+i*r.width+Yd,y:50,text:h.section,fill:o,num:c,colour:l};$d(t,e,r),a=h.section,n++}const e=h.people.reduce((t,e)=>(zd[e]&&(t[e]=zd[e]),t),{});h.x=i*r.taskMargin+i*r.width+Yd,h.y=s,h.width=r.diagramMarginX,h.height=r.diagramMarginY,h.colour=l,h.fill=o,h.num=c,h.actors=e,Md(t,h,r),Wd.insert(h.x,h.y,h.x+h.width+r.taskMargin,450)}},Hd={setConf:function(e){Object.keys(e).forEach(function(t){jd[t]=e[t]})},draw:function(t,e,i,a){const s=Hi().journey;a.db.clear(),a.parser.parse(t+"\n");t=Hi().securityLevel;let n;"sandbox"===t&&(n=r("#i"+e));var t=r("sandbox"===t?n.nodes()[0].contentDocument.body:"body"),t=(Wd.init(),t.select("#"+e)),e=(Pd(t),a.db.getTasks()),o=a.db.getDiagramTitle(),a=a.db.getActors();for(const t in zd)delete zd[t];let l=0;a.forEach(t=>{zd[t]={color:s.actorColours[l%s.actorColours.length],position:l},l++});{var c=t;const d=Hi().journey;let i=60;Object.keys(zd).forEach(t=>{var e=zd[t].color,e={cx:20,cy:i,r:7,fill:e,stroke:"#000",pos:zd[t].position},e=(Nd(c,e),{x:40,y:i+7,fill:"#666",text:t,textMargin:5|d.boxTextMargin});Rd(c,e),i+=20})}Wd.insert(0,0,Yd,50*Object.keys(zd).length),Vd(t,e,0);var a=Wd.getBounds(),e=(o&&t.append("text").text(o).attr("x",Yd).attr("font-size","4ex").attr("font-weight","bold").attr("y",25),a.stopy-a.starty+2*s.diagramMarginY),h=Yd+a.stopx+2*s.diagramMarginX,o=(tr(t,e,h,s.useMaxWidth),t.append("line").attr("x1",Yd).attr("y1",4*s.height).attr("x2",h-Yd-4).attr("y2",4*s.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),o?70:0);t.attr("viewBox",a.startx+` -25 ${h} `+(e+o)),t.attr("preserveAspectRatio","xMinYMin meet"),t.attr("height",e+o+25)}};let Gd={};const Xd={setConf:function(t){Gd={...Gd,...t}},draw:(t,e,i)=>{try{pt.debug("Renering svg for syntax error\n");const t=r("#"+e),a=t.append("g");a.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),a.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),a.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),a.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),a.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),a.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),a.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),a.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+i),t.attr("height",100),t.attr("width",500),t.attr("viewBox","768 0 912 512")}catch(t){pt.error("Error while rendering info diagram"),pt.error(t instanceof Error?t.message:String(t))}var a}},Kd="flowchart-elk",Qd={id:Kd,detector:(t,e)=>{return!!(t.match(/^\s*flowchart-elk/)||t.match(/^\s*flowchart|graph/)&&"elk"===(null==(t=null==e?void 0:e.flowchart)?void 0:t.defaultRenderer))},loader:async()=>{var t=(await import("/npm/mermaid@9.4.3/dist/flowchart-elk-definition-170a3958.js/+esm"))["diagram"];return{id:Kd,diagram:t}}},Zd="timeline",Jd={id:Zd,detector:t=>null!==t.match(/^\s*timeline/),loader:async()=>{var t=(await import("/npm/mermaid@9.4.3/dist/timeline-definition-8e5a9bc6.js/+esm"))["diagram"];return{id:Zd,diagram:t}}},tu="mindmap",eu={id:tu,detector:t=>null!==t.match(/^\s*mindmap/),loader:async()=>{var t=(await import("/npm/mermaid@9.4.3/dist/mindmap-definition-44684416.js/+esm"))["diagram"];return{id:tu,diagram:t}}};let iu=!1;const ru=()=>{iu||(iu=!0,ui(Qd,Jd,eu),Pr("error",{db:{clear:()=>{}},styles:nr,renderer:Xd,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},t=>"error"===t.toLowerCase().trim()),Pr("---",{db:{clear:()=>{}},styles:nr,renderer:Xd,parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with unindented `---` blocks")}},init:()=>null},t=>t.toLowerCase().trimStart().startsWith("---")),Pr("c4",{parser:vn,db:zn,renderer:bs,styles:pr,init:t=>{bs.setConf(t.c4)}},Sn),Pr("class",{parser:ks,db:Ms,renderer:Qs,styles:ir,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ms.clear()}},_s),Pr("classDiagram",{parser:ks,db:Ms,renderer:$a,styles:ir,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ms.clear()}},Cs),Pr("er",{parser:Ma,db:Wa,renderer:eo,styles:rr},Pa),Pr("gantt",{parser:Po,db:bl,renderer:_l,styles:ar},zo),Pr("info",{parser:Tl,db:Sl,renderer:wl,styles:or},Al),Pr("pie",{parser:Ll,db:Fl,renderer:Ml,styles:lr},Dl),Pr("requirement",{parser:zl,db:Hl,renderer:nc,styles:cr},jl),Pr("sequence",{parser:ac,db:wc,renderer:sh,styles:hr,init:t=>{if(t.sequence||(t.sequence={}),t.sequence.arrowMarkerAbsolute=t.arrowMarkerAbsolute,"sequenceDiagram"in t)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");wc.setWrap(t.wrap),sh.setConf(t.sequence)}},oc),Pr("state",{parser:oh,db:Ph,renderer:Gh,styles:dr,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ph.clear()}},lh),Pr("stateDiagram",{parser:oh,db:Ph,renderer:xd,styles:dr,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ph.clear()}},ch),Pr("journey",{parser:_d,db:Ad,renderer:Hd,styles:ur,init:t=>{Hd.setConf(t.journey),Ad.clear()}},Cd),Pr("flowchart",{parser:ro,db:Do,renderer:Ro,styles:sr,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Oo(t.flowchart),Do.clear(),Do.setGen("gen-1")}},no),Pr("flowchart-v2",{parser:ro,db:Do,renderer:Ro,styles:sr,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Vi({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),Ro.setConf(t.flowchart),Do.clear(),Do.setGen("gen-2")}},so),Pr("gitGraph",{parser:Yr,db:on,renderer:Cn,styles:Tn},Wr))};class nu{constructor(t,e){this.txt=t,this.type="graph",this.detectTypeFailed=!1;var i,r,a=Hi();this.txt=t;try{this.type=di(t,a)}catch(t){this.handleError(t,e),this.type="error",this.detectTypeFailed=!0}var s=zr(this.type);pt.debug("Type "+this.type),this.db=s.db,null!=(r=(i=this.db).clear)&&r.call(i),this.renderer=s.renderer,this.parser=s.parser;const n=this.parser.parse.bind(this.parser);this.parser.parse=t=>{return n((t=t,e=this.db,(a=t.match(oi))?(null!=(r=ai(a[1],{schema:si}))&&r.title&&null!=(i=e.setDiagramTitle)&&i.call(e,r.title),t.slice(a[0].length)):t));var e,i,r,a},this.parser.parser.yy=this.db,s.init&&(s.init(a),pt.info("Initialized diagram "+this.type,a)),this.txt+="\n",this.parse(this.txt,e)}parse(t,e){var i,r;if(!this.detectTypeFailed)try{return t+="\n",null!=(r=(i=this.db).clear)&&r.call(i),this.parser.parse(t),!0}catch(t){this.handleError(t,e)}return!1}handleError(t,e){if(void 0===e)throw t;Ni(t)?e(t.str,t.hash):e(t)}getParser(){return this.parser}getType(){return this.type}}const su=(e,i)=>{const r=di(e,Hi());try{zr(r)}catch(t){var a=hi[r].loader;if(a)return a().then(({diagram:t})=>(Pr(r,t,void 0),new nu(e,i)));throw new Error(`Diagram ${r} not found.`)}return new nu(e,i)},au=nu,ou="graphics-document document",lu=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],cu="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",hu="sandbox",du="loose",uu="http://www.w3.org/1999/xlink",pu="http://www.w3.org/1999/xhtml",gu=["foreignobject"],yu=["dominant-baseline"],fu=function(t){let e=t;return e=(e=(e=e.replace(/style.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)})).replace(/classDef.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)})).replace(/#\w+;/g,function(t){t=t.substring(1,t.length-1);return/^\+?\d+$/.test(t)?"ﬂ°°"+t+"¶ß":"ﬂ°"+t+"¶ß"})},mu=function(t){let e=t;return e=(e=(e=e.replace(/ﬂ°°/g,"&#")).replace(/ﬂ°/g,"&")).replace(/¶ß/g,";")},bu=(t,e,i=[])=>`
.${t} ${e} { ${i.join(" !important; ")} !important; }`,xu=(t,e,i,r)=>{i=((t,e,i={})=>{var r;let a="";if(void 0!==t.themeCSS&&(a+=`
`+t.themeCSS),void 0!==t.fontFamily&&(a+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),void 0!==t.altFontFamily&&(a+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!dt(i)&&lu.includes(e)){const e=t.htmlLabels||null!=(r=t.flowchart)&&r.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const t in i){const r=i[t];dt(r.styles)||e.forEach(t=>{a+=bu(r.id,t,r.styles)}),dt(r.textStyles)||(a+=bu(r.id,"tspan",r.textStyles))}}return a})(t,e,i),e=yr(e,i,t.themeVariables);return K(Q(r+`{${e}}`),Z)},ku=(t="",e,i)=>{let r=t;return i||e||(r=r.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),r=(r=mu(r)).replace(/<br>/g,"<br/>")},_u=(t="",e)=>`<iframe style="width:100%;height:${e?e.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+t+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The "iframe" tag is not supported by your browser.
</iframe>`,Cu=(t,e,i,r,a)=>{var s=t.append("div"),i=(s.attr("id",i),r&&s.attr("style",r),s.append("svg").attr("id",e).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg"));return a&&i.attr("xmlns:xlink",a),i.append("g"),t};function Tu(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const Eu=(t,e,i,r)=>{null!=(e=t.getElementById(e))&&e.remove(),null!=(e=t.getElementById(i))&&e.remove(),null!=(i=t.getElementById(r))&&i.remove()};function vu(t,e,i,r){(a=e).attr("role",ou),dt(t)||a.attr("aria-roledescription",t);var a=e,s=i,n=r,t=e.attr("id");if(void 0!==a.insert&&(s||n)){if(n){const s="chart-desc-"+t;a.attr("aria-describedby",s),a.insert("desc",":first-child").attr("id",s).text(n)}if(s){const n="chart-title-"+t;a.attr("aria-labelledby",n),a.insert("title",":first-child").attr("id",n).text(s)}}}const Su=Object.freeze({render:function(t,e,i,a){ru(),Ki();var s=Ri.detectInit(e),s=(s&&(Oi(s),Xi(s)),Hi()),n=(pt.debug(s),e=(e=e.length>((null==s?void 0:s.maxTextSize)??5e4)?cu:e).replace(/\r\n?/g,"\n"),"#"+t),o="i"+t,l="#"+o,c="d"+t,h="#"+c;let d=r("body");var u=s.securityLevel===hu,p=s.securityLevel===du,g=s.fontFamily;if(void 0!==a){if(a&&(a.innerHTML=""),u){const t=Tu(r(a),o);(d=r(t.nodes()[0].contentDocument.body)).node().style.margin=0}else d=r(a);Cu(d,t,c,"font-family: "+g,uu)}else{if(Eu(document,t,c,o),u){const t=Tu(r("body"),o);(d=r(t.nodes()[0].contentDocument.body)).node().style.margin=0}else d=r("body");Cu(d,t,c)}let y,f;e=fu(e);try{if("then"in(y=su(e)))throw new Error("Diagram is a promise. Use renderAsync.")}catch(t){y=new au("error"),f=t}var a=d.select(h).node(),g=y.type,o=a.firstChild,c=o.firstChild,a=lu.includes(g)?y.renderer.getClasses(e,y):{},a=xu(s,g,a,n),n=document.createElement("style");n.innerHTML=a,o.insertBefore(n,c);try{y.renderer.draw(e,t,Mi,y)}catch(i){throw Xd.draw(e,t,Mi),i}vu(g,d.select(h+" svg"),null==(o=(a=y.db).getAccTitle)?void 0:o.call(a),null==(c=(n=y.db).getAccDescription)?void 0:c.call(n)),d.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",pu);let m=d.select(h).node().innerHTML;if(pt.debug("config.arrowMarkerAbsolute",s.arrowMarkerAbsolute),m=ku(m,u,Ct(s.arrowMarkerAbsolute)),u){const t=d.select(h+" svg").node();m=_u(m,t)}else p||(m=W.sanitize(m,{ADD_TAGS:gu,ADD_ATTR:yu}));if(void 0!==i)switch(g){case"flowchart":case"flowchart-v2":i(m,Do.bindFunctions);break;case"gantt":i(m,bl.bindFunctions);break;case"class":case"classDiagram":i(m,Ms.bindFunctions);break;default:i(m)}else pt.debug("CB = undefined!");Bc();e=r(u?l:h).node();if(e&&"remove"in e&&e.remove(),f)throw f;return m},renderAsync:async function(t,e,i,a){ru(),Ki();var s=Ri.detectInit(e),s=(s&&(Oi(s),Xi(s)),Hi()),n=(pt.debug(s),e=(e=e.length>((null==s?void 0:s.maxTextSize)??5e4)?cu:e).replace(/\r\n?/g,"\n"),"#"+t),o="i"+t,l="#"+o,c="d"+t,h="#"+c;let d=r("body");var u=s.securityLevel===hu,p=s.securityLevel===du,g=s.fontFamily;if(void 0!==a){if(a&&(a.innerHTML=""),u){const t=Tu(r(a),o);(d=r(t.nodes()[0].contentDocument.body)).node().style.margin=0}else d=r(a);Cu(d,t,c,"font-family: "+g,uu)}else{if(Eu(document,t,c,o),u){const t=Tu(r("body"),o);(d=r(t.nodes()[0].contentDocument.body)).node().style.margin=0}else d=r("body");Cu(d,t,c)}let y,f;e=fu(e);try{y=await su(e)}catch(t){y=new au("error"),f=t}var a=d.select(h).node(),g=y.type,o=a.firstChild,c=o.firstChild,a=lu.includes(g)?y.renderer.getClasses(e,y):{},a=xu(s,g,a,n),n=document.createElement("style");n.innerHTML=a,o.insertBefore(n,c);try{await y.renderer.draw(e,t,Mi,y)}catch(i){throw Xd.draw(e,t,Mi),i}vu(g,d.select(h+" svg"),null==(o=(a=y.db).getAccTitle)?void 0:o.call(a),null==(c=(n=y.db).getAccDescription)?void 0:c.call(n)),d.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",pu);let m=d.select(h).node().innerHTML;if(pt.debug("config.arrowMarkerAbsolute",s.arrowMarkerAbsolute),m=ku(m,u,Ct(s.arrowMarkerAbsolute)),u){const t=d.select(h+" svg").node();m=_u(m,t)}else p||(m=W.sanitize(m,{ADD_TAGS:gu,ADD_ATTR:yu}));if(void 0!==i)switch(g){case"flowchart":case"flowchart-v2":i(m,Do.bindFunctions);break;case"gantt":i(m,bl.bindFunctions);break;case"class":case"classDiagram":i(m,Ms.bindFunctions);break;default:i(m)}else pt.debug("CB = undefined!");Bc();e=r(u?l:h).node();if(e&&"remove"in e&&e.remove(),f)throw f;return m},parse:function(t,e){return ru(),new au(t,e).parse(t,e)},parseAsync:async function(t,e){return ru(),(await su(t,e)).parse(t,e)},parseDirective:Lr,initialize:function(t={}){null==t||!t.fontFamily||null!=(e=t.themeVariables)&&e.fontFamily||(t.themeVariables={fontFamily:t.fontFamily}),zi=yi({},t),null!=t&&t.theme&&t.theme in Bt?t.themeVariables=Bt[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Bt.default.getThemeVariables(t.themeVariables));var e,t="object"==typeof t?(e=t,ji=yi({},Pi),ji=yi(ji,e),e.theme&&Bt[e.theme]&&(ji.themeVariables=Bt[e.theme].getThemeVariables(e.themeVariables)),qi(ji,Yi),ji):Ui();gt(t.logLevel),ru()},getConfig:Hi,setConfig:Vi,getSiteConfig:Ui,updateSiteConfig:t=>(ji=yi(ji,t),qi(ji,Yi),ji),reset:()=>{Ki()},globalReset:()=>{Ki(Pi)},defaultConfig:Pi}),wu=(gt(Hi().logLevel),Ki(Hi()),(t,e,i)=>{pt.warn(t),Ni(t)?(i&&i(t.str,t.hash),e.push({...t,message:t.str,error:t})):(i&&i(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))}),Au=async function(i,r,a){const e=Su.getConfig();let s;if(i&&(Ou.sequenceConfig=i),pt.debug((a?"":"No ")+"Callback function found"),void 0===r)s=document.querySelectorAll(".mermaid");else if("string"==typeof r)s=document.querySelectorAll(r);else if(r instanceof HTMLElement)s=[r];else{if(!(r instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");s=r}pt.debug(`Found ${s.length} diagrams`),void 0!==(null==i?void 0:i.startOnLoad)&&(pt.debug("Start On Load: "+(null==i?void 0:i.startOnLoad)),Su.updateSiteConfig({startOnLoad:null==i?void 0:i.startOnLoad}));var n,o=new Ri.initIdGenerator(e.deterministicIds,e.deterministicIDSeed),l=[];for(const i of Array.from(s))if(pt.info("Rendering diagram: "+i.id),!i.getAttribute("data-processed")){i.setAttribute("data-processed","true");const r="mermaid-"+o.next(),e=(n=i.innerHTML,n=t(Ri.entityDecode(n)).trim().replace(/<br\s*\/?>/gi,"<br/>"),Ri.detectInit(n));e&&pt.debug("Detected early reinit: ",e);try{await Su.renderAsync(r,n,(t,e)=>{i.innerHTML=t,void 0!==a&&a(r),e&&e(i)},i)}catch(t){wu(t,l,Ou.parseError)}}if(0<l.length)throw l[0]},Bu=function(){var t;Ou.startOnLoad&&(t=Su.getConfig()["startOnLoad"],t)&&Ou.init().catch(t=>pt.error("Mermaid failed to initialize",t))},Lu=("undefined"!=typeof document&&window.addEventListener("load",Bu,!1),[]);let Du=!1;const Iu=async()=>{if(!Du){for(Du=!0;0<Lu.length;){var t=Lu.shift();if(t)try{await t()}catch(t){pt.error("Error executing queue",t)}}Du=!1}},Ou={startOnLoad:!0,diagrams:{},mermaidAPI:Su,parse:t=>Su.parse(t,Ou.parseError),parseAsync:t=>new Promise((r,a)=>{Lu.push(()=>new Promise((e,i)=>{Su.parseAsync(t,Ou.parseError).then(t=>{e(t),r(t)},t=>{pt.error("Error parsing",t),i(t),a(t)})})),Iu().catch(a)}),render:Su.render,renderAsync:(t,s,n,o)=>new Promise((r,a)=>{Lu.push(()=>new Promise((e,i)=>{Su.renderAsync(t,s,n,o).then(t=>{e(t),r(t)},t=>{pt.error("Error parsing",t),i(t),a(t)})})),Iu().catch(a)}),init:async function(t,e,i){try{await Au(t,e,i)}catch(t){pt.warn("Syntax Error rendering"),Ni(t)&&pt.warn(t.str),Ou.parseError&&Ou.parseError(t)}},initThrowsErrors:function(i,r,a){const e=Su.getConfig();let s;if(i&&(Ou.sequenceConfig=i),pt.debug((a?"":"No ")+"Callback function found"),void 0===r)s=document.querySelectorAll(".mermaid");else if("string"==typeof r)s=document.querySelectorAll(r);else if(r instanceof HTMLElement)s=[r];else{if(!(r instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");s=r}pt.debug(`Found ${s.length} diagrams`),void 0!==(null==i?void 0:i.startOnLoad)&&(pt.debug("Start On Load: "+(null==i?void 0:i.startOnLoad)),Su.updateSiteConfig({startOnLoad:null==i?void 0:i.startOnLoad}));var n,o=new Ri.initIdGenerator(e.deterministicIds,e.deterministicIDSeed),l=[];for(const i of Array.from(s))if(pt.info("Rendering diagram: "+i.id),!i.getAttribute("data-processed")){i.setAttribute("data-processed","true");const r="mermaid-"+o.next(),e=(n=i.innerHTML,n=t(Ri.entityDecode(n)).trim().replace(/<br\s*\/?>/gi,"<br/>"),Ri.detectInit(n));e&&pt.debug("Detected early reinit: ",e);try{Su.render(r,n,(t,e)=>{i.innerHTML=t,void 0!==a&&a(r),e&&e(i)},i)}catch(t){wu(t,l,Ou.parseError)}}if(0<l.length)throw l[0]},initThrowsErrorsAsync:Au,registerExternalDiagrams:async(t,{lazyLoad:e=!0}={})=>{if(e)ui(...t);else{var[...i]=[...t],e=(pt.debug(`Loading ${i.length} external diagrams`),(await Promise.allSettled(i.map(async({id:t,detector:e,loader:i})=>{i=(await i()).diagram;Pr(t,i,e)}))).filter(t=>"rejected"===t.status));if(0<e.length){pt.error(`Failed to load ${e.length} external diagrams`);for(const i of e)pt.error(i);throw new Error(`Failed to load ${e.length} external diagrams`)}}},initialize:function(t){Su.initialize(t)},parseError:void 0,contentLoaded:Bu,setParseErrorHandler:function(t){Ou.parseError=t}};export{Ou as default};