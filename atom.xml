<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>rm -rf /*</title>
  
  <subtitle>rm -rf /*</subtitle>
  <link href="https://rm-rf.ink/atom.xml" rel="self"/>
  
  <link href="https://rm-rf.ink/"/>
  <updated>2024-01-23T06:33:00.294Z</updated>
  <id>https://rm-rf.ink/</id>
  
  <author>
    <name>Yq Woe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Reveal.js使用</title>
    <link href="https://rm-rf.ink/*/6befbd07.html"/>
    <id>https://rm-rf.ink/*/6befbd07.html</id>
    <published>2024-01-22T09:55:12.000Z</published>
    <updated>2024-01-23T06:33:00.294Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><div class="hexo-reveal-embed" style="[object Object]"><iframe src="/slide/Reveal.js%E5%B9%BB%E7%81%AF%E7%89%87/" allowfullscreen loading="lazy"></iframe></div><details open><summary><span class="pre-summary">&nbsp;</span><strong>代码:</strong></summary><figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># Index 1</span><br><span class="line">### 我是第一个页面</span><br><span class="line">`js [1-2|3|4]</span><br><span class="line">    let a = 1;</span><br><span class="line">    let b = 2;</span><br><span class="line">    let c = x =&gt; 1 + 2 + x;</span><br><span class="line">    c(3);</span><br><span class="line">`</span><br><span class="line"></span><br><span class="line">----</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Index 2</span><br><span class="line">### 我是第二个页面</span><br><span class="line"></span><br><span class="line">* 一 &lt;!-- .element: class=&quot;fragment&quot; data-fragment-index=&quot;1&quot; --&gt;</span><br><span class="line">* 二 &lt;!-- .element: class=&quot;fragment&quot; data-fragment-index=&quot;2&quot; --&gt;</span><br><span class="line">* 三 &lt;!-- .element: class=&quot;fragment&quot; data-fragment-index=&quot;3&quot; --&gt;</span><br><span class="line"></span><br><span class="line">----</span><br><span class="line"></span><br><span class="line"># Index 3</span><br><span class="line">### 我是第三个页面</span><br><span class="line">* 一 &lt;!-- .element: class=&quot;fragment fade-in&quot; --&gt;</span><br><span class="line">* 二 &lt;!-- .element: class=&quot;fragment highlight-red&quot; --&gt;</span><br><span class="line">* 三 &lt;!-- .element: class=&quot;fragment fade-out&quot; --&gt;</span><br><span class="line"></span><br><span class="line">--</span><br><span class="line"></span><br><span class="line"># Index 3.1</span><br><span class="line">### 我是第三个页面</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Index 3.2</span><br><span class="line">### 我是第三个页面</span><br><span class="line"></span><br><span class="line">----</span><br><span class="line"></span><br><span class="line"># Index 4</span><br><span class="line">### 我是第四个页面</span><br></pre></td></tr></table></figure></details>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="学习" scheme="https://rm-rf.ink/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="reveal.js" scheme="https://rm-rf.ink/tags/reveal-js/"/>
    
  </entry>
  
  <entry>
    <title>工作计划[2024-01-22] ⏳</title>
    <link href="https://rm-rf.ink/*/5b16fb9e.html"/>
    <id>https://rm-rf.ink/*/5b16fb9e.html</id>
    <published>2024-01-19T10:16:03.000Z</published>
    <updated>2024-01-22T09:04:29.309Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="糟糕！密码错误了." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="4a22d75b274dc62b54f4cb451fb13da5cafd7d49b84ef041972a41730225233e">89730641517f40fad9fb11d8e72e80bf06c939f51e30e9318348e356012ae93802623e7e7460999b3f7e8ba755c0d29599ae788f4544e2d8c77419f7d87eed449b7d6813e006fe13f540d0d66182fef8c50ebd9d211e40be206647f7e00fd685b86946fa705ad4651c18ab2a320b4a69699ab0980126725a179cb3c64faa8f2509c4dddd4adebe64d5cd4207643b74cb951ade33149cd6cd51d669bce78e7df026fe1abb945332d7c0a9e2f0c8bc51b46617f418a10ed53af1ad8a5de091ee7b9161a36c5a28454693301b254151eaad572fe3718480827cbcb2b29cbbe2dd52029dfad21eac08db5c648820175597abb4a0c5ff69693595d1d3fe51de4c4f9c4194b77a63e7b407560fa73f56328d3cbee56843f26b4272acb3eeeaa0e46d01c1c94262bdc858905a4d80759515d1db386e90b995b088a668ce7196174ca5a1f7e183730e3e3725b40cbaffa2f9dacf0bc53fe460f92d73530023711fcf4b77d9f43baa810ae4218fc7f841ac33e89f5112a9031ff91d6bbe735a95d600e72d0b8196fa6c81e92867975a730259d0b4828d8f39e620ac1502d518a4678e988594881f2464b2715770c2fd8b9a0c6111c93306b1c22a628dd063599d683923cf894c7dd80eeddc6de1992e9433e17b0086951811625e5ea3697777df3297d20c1211cf7d920501f9844cbfe488aec1c349484396fd41ed3f2f94a5cb96d9fdaa7c675cccb0f7e3609f0a29dacd0af36da95a3343eaa806ac90fa834bc753aaffbeed9d263f1567d07903e8040b1cae36d7397881afc2f81de2a615a412168d5bea707009735f97b7620cfd38e01d88433c34953566a7cdc9b0eceb645204a6480edb71ced635f8ad9024e8307ae4e0a30189c497c399d97cd281da7a44ede2655e5772bc5a45be8a0876ce743faed607fcd04272df292f3125d783134317fd66492aaf414a2efe6eaca5d554f1a1caf0442e9c59005c664be1a3e507bfce123a6e4695d4fa32f6d3e08a716b04dc368e178837a304d4aba406be492507581316d451c270a0628ae2b2c44757ef550ef1dfdafac58ff9001a184bbb5a2ccb391562381cf0e915a20fa6e3e09498b301d2d37ef3165f11dd1de0bfb9fe1937e3ab37bd4eb6451851df31ee1e56a46b186db4f8550c8fdb364cbbc6d225ac8a326c72ec705a17663798546d25598bbeb8272d11ffe028307d0a9f671df7e5fa5944aaa5de89ae63e2425e22ed6bfe642d31e66f69003199a6608a76ca7ba9e858ba11e1133910cf70bdbbb3c215c18c7f9a7afec8f949c281fd5a36105c4eb042bf611a7d8599170de56936e8d401678beadc91a0a1f06948d866b3900eafd8b9da6875cf203e1756a782d83aee0491338b9d1aae0f68355cf42e77c13390d9da5d8b72b0c39898bcd77319b67a6e49aa8231afb30a96fee1bed6a63946885664755d4670adfbfa786dc61ad0616b3c72ff8a764aeb1964b36892b382380e5cf11007860fcc6b9c579a21354ebdf7d2b1136d07c47858e359c14694084e8dbce15de34bd984ec46b685cd660703cce18402011c8d120f110bde5c3d0310a4b8b4e6d29a0d02d82b9624a1a44c57e63966843cb17a501c0e60ec3f4350021f949c8e4eb7f3729cc5b4c6fb4bfb2cf543b92c5e7d6941920d9290be2bc00e63bf1c844d20342b2c6d08da891164c86d8ff5fb3102c7d4dd886b20e5d6d71e288274f8187e986525e41726379790bf7b910c853371a1135f190cf4d129d0592188228fdf4a287c69a5a614ecdedeb74fbab4743e70c312ebeea6ad102b62542994215d4e9197ed6091aa7b97b46eea379b2a6b96dcdd2f83b59995a546c0fa4343a218879caef5c31c0bf55a45c623fb5dc04f3cf9f9231c1bbde6ac9b518e89a09e41eed0497d62fe68ed69a4e02efb25c83419a3cab263cf01809e59c329d51020a259e8ad6b3f7ef90376510d73d756839fdc45674305b5612fe5b3025d0f36287ed33b6709c1e6762050af32616c23a271bf90596f903b993933965d478ea39594a2ba07b53c53ed69bd3db889067110208d2802c4878ea7a0f6eb9a58231e500c645157c984270b80f042d9845f95181d22f7d074dfa238485411f532b429965c3f5f822b5d6e663e42f835c4d0d6340ebe93330b40c8f797214cb1a184a45b1e1d74a86b69ab8f63c77829247190f9c6073d7f9dbae2664c6536a30330b8f6a5991e5a41a6553d20fc742cab2979e97aadec9057ffe205f7a302d028433c4e7c24032f5db26b8393ea5cd0f2504e485b6565198ed13db34eba1c75f34feb1ea9aae860a2598d227159d94779f4417c82c1b549e1dfbd878d2ea3c0013b137eca23d38878507cb9b0e613d4d8d79a59db298b6006d6e0692a7b7f4079d1abbda5cebe05f555ced507a5a6da15d5fe8ae6531eeec8ee9fdd56dd35c03357f59f716e2fa72007f558912c59b68af11a203e0658fe0fa0065122a9d31ebf7cf9c7104b435720bb23247c9bb7c19a5fe2e0de3d7c5b00925f52c53732b8d1111aa4d0</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">输入密码查看内容</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">文章加密了，需要输入密码查看</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="工作计划" scheme="https://rm-rf.ink/tags/%E5%B7%A5%E4%BD%9C%E8%AE%A1%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>大盘鸡🐔</title>
    <link href="https://rm-rf.ink/*/c43e7c0d.html"/>
    <id>https://rm-rf.ink/*/c43e7c0d.html</id>
    <published>2024-01-16T02:06:47.000Z</published>
    <updated>2024-01-22T07:30:32.655Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>吃鸡最痛快的吃法之一，一定有大盘鸡。</p><span id="more"></span><h1><a id="_7"></a>食材</h1><ul class="lvl-0"><li class="lvl-2"><p>鸡肉</p></li><li class="lvl-2"><p>梅花肉</p></li><li class="lvl-2"><p>土豆</p></li><li class="lvl-2"><p>洋葱</p></li><li class="lvl-2"><p>青椒</p></li><li class="lvl-2"><p>大葱</p></li><li class="lvl-2"><p>姜</p></li><li class="lvl-2"><p>蒜</p></li><li class="lvl-2"><p>八角</p></li><li class="lvl-2"><p>花椒</p></li><li class="lvl-2"><p>干辣椒</p></li><li class="lvl-2"><p>啤酒</p></li></ul><h1><a id="_24"></a>调味料</h1><ul class="lvl-0"><li class="lvl-2"><p>花生油 20ml</p></li><li class="lvl-2"><p>郫县豆瓣酱 10ml</p></li><li class="lvl-2"><p>盐 5g</p></li><li class="lvl-2"><p>鸡精 5g</p></li><li class="lvl-2"><p>味精 5g</p></li><li class="lvl-2"><p>生抽 5g</p></li><li class="lvl-2"><p>蚝油5ml</p></li></ul><h1><a id="_36"></a>操作</h1><ul class="lvl-0"><li class="lvl-2"><p>起锅烧油，放入梅花肉打底炒出油；</p></li><li class="lvl-2"><p>放入豆瓣炒出红油，放入八角、花椒、干辣椒；</p></li><li class="lvl-2"><p>放入洗干净的鸡肉，炒至肉质紧实；</p></li><li class="lvl-2"><p>放入大葱，盐、鸡精、生抽、蚝油；</p></li><li class="lvl-2"><p>翻炒2分钟，加入两罐啤酒，炖15分钟；</p></li><li class="lvl-2"><p>最后放入土豆、青椒、洋葱，再炖5分钟；</p></li><li class="lvl-2"><p>放入味精，搅拌均匀后出锅；</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;吃鸡最痛快的吃法之一，一定有大盘鸡。&lt;/p&gt;</summary>
    
    
    
    <category term="菜谱" scheme="https://rm-rf.ink/categories/%E8%8F%9C%E8%B0%B1/"/>
    
    
    <category term="大盘鸡" scheme="https://rm-rf.ink/tags/%E5%A4%A7%E7%9B%98%E9%B8%A1/"/>
    
    <category term="美食" scheme="https://rm-rf.ink/tags/%E7%BE%8E%E9%A3%9F/"/>
    
  </entry>
  
  <entry>
    <title>麻辣炒虾尾 🦞</title>
    <link href="https://rm-rf.ink/*/9ddcf808.html"/>
    <id>https://rm-rf.ink/*/9ddcf808.html</id>
    <published>2024-01-15T06:27:41.000Z</published>
    <updated>2024-01-22T07:31:02.337Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>我媳妇、儿子最喜欢的菜之一</p><span id="more"></span><h1><a id="_7"></a>食材</h1><ul class="lvl-0"><li class="lvl-2"><p>小龙虾（冻虾尾）</p></li><li class="lvl-2"><p>大葱</p></li><li class="lvl-2"><p>姜</p></li><li class="lvl-2"><p>蒜</p></li><li class="lvl-2"><p>八角</p></li><li class="lvl-2"><p>花椒</p></li><li class="lvl-2"><p>干辣椒</p></li><li class="lvl-2"><p>啤酒</p></li></ul><h1><a id="_25"></a>调味料</h1><ul class="lvl-0"><li class="lvl-2"><p>花生油 30ml</p></li><li class="lvl-2"><p>郫县豆瓣酱 10ml</p></li><li class="lvl-2"><p>盐 5g</p></li><li class="lvl-2"><p>味精 5g</p></li><li class="lvl-2"><p>鸡精 5g</p></li><li class="lvl-2"><p>生抽 5g</p></li><li class="lvl-2"><p>蚝油 5ml</p></li></ul><h1><a id="_35"></a>操作</h1><ul class="lvl-0"><li class="lvl-2"><p>清水清洗小龙虾（冻虾尾），起锅烧油炸4分钟；</p></li><li class="lvl-2"><p>放入蒜末翻炒，再放入大葱、姜片、豆瓣酱；</p></li><li class="lvl-2"><p>放入八角、花椒、干辣椒，继续翻炒；</p></li><li class="lvl-2"><p>放入盐、味精、鸡精、生抽、蚝油调味；</p></li><li class="lvl-2"><p>炒香后加入2罐啤酒，煮20分钟；</p></li><li class="lvl-2"><p>最后收汁后即可盛出食用；</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;我媳妇、儿子最喜欢的菜之一&lt;/p&gt;</summary>
    
    
    
    <category term="菜谱" scheme="https://rm-rf.ink/categories/%E8%8F%9C%E8%B0%B1/"/>
    
    
    <category term="美食" scheme="https://rm-rf.ink/tags/%E7%BE%8E%E9%A3%9F/"/>
    
    <category term="虾尾" scheme="https://rm-rf.ink/tags/%E8%99%BE%E5%B0%BE/"/>
    
    <category term="麻辣" scheme="https://rm-rf.ink/tags/%E9%BA%BB%E8%BE%A3/"/>
    
  </entry>
  
  <entry>
    <title>前端定时器</title>
    <link href="https://rm-rf.ink/*/3423146f.html"/>
    <id>https://rm-rf.ink/*/3423146f.html</id>
    <published>2024-01-11T07:09:31.000Z</published>
    <updated>2024-01-15T03:34:01.469Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>  前端开发中，会经常接到<code>定时器</code>的需求，<code>倒计时</code>、<code>计时器</code>、<code>动画效果</code>。</p><span id="more"></span><p>  在<code>博客</code>- <a href="/tags">标签</a>页面中使用到了<code>定时器</code>来做<code>::hover</code>动画效果。接下来我会对比一下<code>setTimeout</code>、<code>setInterval</code>、<code>requestAnimationFrame</code>来实现定时器。</p><div style="display:flex;justify-content: center;">    <div>      <video width="100%" height="auto" src="/images/video/tags-view.mp4" autoplay muted loop></video>      <div style="text-align: center;user-select: none;">视频：博客-标签</div>    </div>  </div><h1><a id="1_11"></a>1.定时器</h1><h2><a id="11_setTimeout_15"></a>1.1. setTimeout</h2><p>  <strong>setTimeout是JavaScript中的一个函数，用于在指定的延迟时间后执行一段代码或函数。它的工作原理是在指定的延迟时间后，将代码或函数放入JavaScript的事件队列中，等待当前代码执行完毕后再执行。</strong></p><p><strong>setTimeout的语法如下：</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>||<span class="string">&#x27;func()&#x27;</span>,delay,[args...])</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul class="lvl-0"><li class="lvl-2"><p><code>func|code</code>：要执行的函数或代码。</p></li><li class="lvl-2"><p><code>delay</code>：延迟时间，以毫秒为单位。</p></li><li class="lvl-2"><p><code>arg1, arg2, ...</code>：可选参数，表示传递给函数的参数。</p></li></ul><p>  当使用setTimeout时，它将在指定的延迟时间后执行一次函数或代码，然后返回一个定时器ID，可以使用<code>clearTimeout()</code>方法来取消定时器的执行。</p><p>  需要注意的是，setTimeout并不会立即执行函数或代码，而是在指定的延迟时间后放入事件队列中等待执行。如果当前的代码执行时间较长，或者存在其他的延迟操作，那么setTimeout中的函数或代码可能会在预期的时间之后才被执行。</p><p><strong>示例:</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">args</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(test,<span class="number">1000</span>,[<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;test1&#x27;</span>]);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="string">&#x27;test()&#x27;</span>,<span class="number">1000</span>,[<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;test1&#x27;</span>]);</span><br><span class="line"><span class="title function_">cleatTimeout</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2><a id="12_setInterval_41"></a>1.2. setInterval</h2><p>  <strong>setInterval是JavaScript中的一个函数，用于在指定的时间间隔后重复执行一段代码或函数。它的工作原理是在指定的时间间隔后，将代码或函数放入JavaScript的事件队列中，等待当前代码执行完毕后再执行。</strong></p><p><strong>setInterval的语法如下：</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>||<span class="string">&#x27;func()&#x27;</span>,delay,[args...])</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul class="lvl-0"><li class="lvl-2"><p><code>func|code</code>：要执行的函数或代码。</p></li><li class="lvl-2"><p><code>delay</code>：时间间隔，以毫秒为单位。</p></li><li class="lvl-2"><p><code>arg1, arg2, ...</code>：可选参数，表示传递给函数的参数。</p></li></ul><p>  当使用setInterval时，它将在指定的时间间隔后重复执行函数或代码，直到调用<code>clearInterval()</code>方法来停止执行。与setTimeout不同的是，setInterval会持续不断地重复执行函数或代码，直到被明确停止。</p><p>  需要注意的是，setInterval并不会立即执行函数或代码，而是在指定的时间间隔后放入事件队列中等待执行。如果当前的代码执行时间较长，或者存在其他的延迟操作，那么setInterval中的函数或代码可能会在预期的时间之后才被执行。</p><p><strong>示例:</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">args</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setInterval</span>(test,<span class="number">1000</span>,[<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;test1&#x27;</span>]);</span><br><span class="line"><span class="built_in">setInterval</span>(<span class="string">&#x27;test()&#x27;</span>,<span class="number">1000</span>,[<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;test1&#x27;</span>]);</span><br><span class="line"><span class="built_in">clearInterval</span>();</span><br></pre></td></tr></table></figure><h2><a id="13_requestAnimationFrame_69"></a>1.3. requestAnimationFrame</h2><p>  <strong>requestAnimationFrame是Web动画API的一部分，用于在浏览器下一次重绘之前调用指定的回调函数，从而实现平滑的动画效果。与setTimeout和setInterval相比，requestAnimationFrame具有更高的性能和更好的用户体验。</strong></p><p><strong>requestAnimationFrame的语法如下：</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">requestAnimationFrame</span>(callback);</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul class="lvl-0"><li class="lvl-2"><p><code>callback</code>：要执行的回调函数。</p></li></ul><p>  当使用requestAnimationFrame时，它会返回一个唯一的ID，可以使用这个ID来取消动画帧的调用。与setTimeout和setInterval不同的是，requestAnimationFrame的回调函数将在浏览器下一次重绘之前执行，而不是简单地等待指定的时间后执行。这样可以充分利用浏览器的重绘机制，实现更平滑的动画效果。</p><p>  requestAnimationFrame的优势在于它能够根据浏览器的刷新率来同步动画，避免了由于不同的屏幕刷新率和硬件配置导致的动画卡顿和闪烁。同时，它也避免了在动画过程中不必要的重绘和计算，提高了动画的性能和响应性。</p><p>  使用requestAnimationFrame时需要注意，它只会在浏览器处于激活状态时执行回调函数。如果浏览器处于最小化或隐藏状态，那么回调函数将不会被执行。因此，在使用requestAnimationFrame时，需要确保浏览器处于激活状态，或者在回调函数中添加适当的逻辑来处理浏览器不处于激活状态的情况。</p><p><strong>示例:</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">frame</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;frame&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(frame);</span><br></pre></td></tr></table></figure><h1><a id="2__97"></a>2. 标签动画</h1><p>  使用 <code>requestAnimationFrame</code> 可以替代 <code>setInterval</code> 来实现定时任务，因为 <code>requestAnimationFrame</code> 更加高效，能够根据屏幕刷新率来同步动画，避免了不必要的重绘和计算。</p><p>下面是使用 <code>requestAnimationFrame</code> 实现 <code>setInterval</code> 更新<code>博客</code>- <a href="/tags">标签</a>的示例代码：</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * 兼容不支持requestAnimationFrame的浏览器</span></span><br><span class="line"><span class="comment"> ***/</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||<span class="comment">/* Safari 和 Chrome */</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> ||<span class="comment">/* Firefox */</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">oRequestAnimationFrame</span>      ||<span class="comment">/* Opera */</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span>     ||<span class="comment">/* IE 9 */</span></span><br><span class="line">    <span class="keyword">function</span> (<span class="params">callback</span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(callback, <span class="number">6000</span> / <span class="number">60</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">cancelAnimationFrame</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">cancelAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">webkitCancelAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">mozCancelAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">oCancelAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">msCancelAnimationFrame</span> || <span class="built_in">clearTimeout</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 设置精度定时器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">function</span>&#125; 回调函数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125;   延迟时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;  定时器ID</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">setIntervalPrecision</span>(<span class="params">callback, delay</span>) &#123;</span><br><span class="line">  <span class="comment">// 生成并记录定时器ID</span></span><br><span class="line">  <span class="keyword">let</span> obj = <span class="variable language_">window</span>.<span class="property">interValPrecisionObj</span> || (<span class="variable language_">window</span>.<span class="property">interValPrecisionObj</span> = &#123; <span class="attr">num</span>: <span class="number">0</span> &#125;)</span><br><span class="line">  obj.<span class="property">num</span>++</span><br><span class="line">  obj[<span class="string">&#x27;n&#x27;</span> + obj.<span class="property">num</span>] = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">var</span> intervalId = obj.<span class="property">num</span></span><br><span class="line">  <span class="comment">// 开始时间</span></span><br><span class="line">  <span class="keyword">var</span> startTime = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">  <span class="comment">// 已执行次数</span></span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line">  <span class="comment">// 延迟时间</span></span><br><span class="line">  delay = delay || <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  ;(<span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 定时器被清除，则终止</span></span><br><span class="line">    <span class="keyword">if</span> (!obj[<span class="string">&#x27;n&#x27;</span> + intervalId]) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 满足条件执行回调</span></span><br><span class="line">    <span class="keyword">if</span> (+<span class="keyword">new</span> <span class="title class_">Date</span>() &gt; startTime + delay * (count + <span class="number">1</span>)) &#123;</span><br><span class="line">      count++</span><br><span class="line">      <span class="title function_">callback</span>(count)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(loop)</span><br><span class="line">  &#125;)()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> intervalId</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 清除精度定时器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; 定时器ID</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clearIntervalPrecision</span>(<span class="params">intervalId</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">interValPrecisionObj</span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">cancelAnimationFrame</span>(<span class="string">&#x27;n&#x27;</span> + intervalId)</span><br><span class="line">    <span class="keyword">delete</span> <span class="variable language_">window</span>.<span class="property">interValPrecisionObj</span>[<span class="string">&#x27;n&#x27;</span> + intervalId]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//loopHover 自己的业务实现</span></span><br><span class="line">setIntervalPrecision(loopHover, <span class="number">100</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;  前端开发中，会经常接到&lt;code&gt;定时器&lt;/code&gt;的需求，&lt;code&gt;倒计时&lt;/code&gt;、&lt;code&gt;计时器&lt;/code&gt;、&lt;code&gt;动画效果&lt;/code&gt;。&lt;/p&gt;</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="vue" scheme="https://rm-rf.ink/tags/vue/"/>
    
    <category term="react" scheme="https://rm-rf.ink/tags/react/"/>
    
    <category term="javascript" scheme="https://rm-rf.ink/tags/javascript/"/>
    
    <category term="typescript" scheme="https://rm-rf.ink/tags/typescript/"/>
    
    <category term="setTimeout" scheme="https://rm-rf.ink/tags/setTimeout/"/>
    
    <category term="setInterval" scheme="https://rm-rf.ink/tags/setInterval/"/>
    
    <category term="requestAnimationFrame" scheme="https://rm-rf.ink/tags/requestAnimationFrame/"/>
    
  </entry>
  
  <entry>
    <title>炝锅面</title>
    <link href="https://rm-rf.ink/*/b2113df8.html"/>
    <id>https://rm-rf.ink/*/b2113df8.html</id>
    <published>2024-01-11T06:44:21.000Z</published>
    <updated>2024-01-22T07:31:30.204Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>河南大多地方以面食为主，炝锅面又是最经典的面食之一。</p><span id="more"></span><h1><a id="_9"></a>食材</h1><ul class="lvl-0"><li class="lvl-2"><p>干面条</p></li><li class="lvl-2"><p>番茄</p></li><li class="lvl-2"><p>梅花肉</p></li><li class="lvl-2"><p>大葱</p></li><li class="lvl-2"><p>白菜</p></li><li class="lvl-2"><p>姜</p></li><li class="lvl-2"><p>干辣椒</p></li><li class="lvl-2"><p>花椒</p></li></ul><h1><a id="_20"></a>调味料</h1><ul class="lvl-0"><li class="lvl-2"><p>花生油 15ml</p></li><li class="lvl-2"><p>盐 5g</p></li><li class="lvl-2"><p>味精 5g</p></li><li class="lvl-2"><p>鸡精 5g</p></li><li class="lvl-2"><p>生抽 5g</p></li><li class="lvl-2"><p>十三香 2g</p></li><li class="lvl-2"><p>香油 5ml</p></li></ul><h1><a id="_30"></a>操作</h1><ul class="lvl-0"><li class="lvl-2"><p>大葱切碎；番茄开水烫后去皮切块；白菜手撕小块备用；（个人喜欢可以放一些黄豆芽）</p></li><li class="lvl-2"><p>起锅烧油，油热调小火，放入花椒炸焦，撇出丢掉；</p></li><li class="lvl-2"><p>梅花肉切小片，起锅热油，放入肥肉超出油后放入瘦肉和姜片炒香；</p></li><li class="lvl-2"><p>放入番茄翻炒出汁后放入白菜翻炒；</p></li><li class="lvl-2"><p>放入盐、十三香、生抽后继续翻炒，白菜炒夹生后加入开水；</p></li><li class="lvl-2"><p>水开放入干面条；（自己估算食用的量）</p></li><li class="lvl-2"><p>煮至2分钟后，加入鸡精、味精；</p></li><li class="lvl-2"><p>出锅前放入少许香油，味道更佳；</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;河南大多地方以面食为主，炝锅面又是最经典的面食之一。&lt;/p&gt;</summary>
    
    
    
    <category term="菜谱" scheme="https://rm-rf.ink/categories/%E8%8F%9C%E8%B0%B1/"/>
    
    
    <category term="美食" scheme="https://rm-rf.ink/tags/%E7%BE%8E%E9%A3%9F/"/>
    
    <category term="河南" scheme="https://rm-rf.ink/tags/%E6%B2%B3%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>工作日报汇总</title>
    <link href="https://rm-rf.ink/*/1ea1f1d4.html"/>
    <id>https://rm-rf.ink/*/1ea1f1d4.html</id>
    <published>2024-01-10T12:02:49.000Z</published>
    <updated>2024-01-11T06:14:33.125Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="糟糕！密码错误了." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="3327cf17738e12f81ca2319b0d1322d3b6c78f6db2f46bb2fed26dddd4aa2ba9">2e23f8e68cbe88aa819625b68ac55a8266ce328ff70dc49fb4138ebec264df230a8b739aea8c8842992e93ee6c59da38acac090b642863ea5b7ed1d68ce6f99f7a2ba95593622669878fba390ecca884ef96a5070ae1c507078de5d795330809cbf1dd913b6c215adc180f5b5a76130f5caa31c53486fa5e7d2e0c93148710d29531bb695df19a806fea4a9913498581eede7c29ff587377dadcb4495faa1764a79b6db8b6336ac1865be6f4820af4be2f2bece877018c909e76ec9b685ba953d65fcb21305698547e30d7971c0808de24f24d351e57988d0a5e89e873209de7b7ea5a9ce5535810c6619ac8900986b2a38163b17bc121483a1659e93426529e8e142b5dcffbe6313416a65e26aed5e4dd5c1fe13e22fbed1f628c07e3de49435f3c20c5c9ad4a3abc0519151de57c95fffff2498a7dc839561d9bfdbb13ac1f23c160b824c88aad51da54bf5cbb1a37ab7cf4d4499cbe50625f4ec8daa7cf79</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">输入密码查看内容</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">文章加密了，需要输入密码查看</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="工作汇报" scheme="https://rm-rf.ink/tags/%E5%B7%A5%E4%BD%9C%E6%B1%87%E6%8A%A5/"/>
    
  </entry>
  
  <entry>
    <title>芝麻叶糊涂面</title>
    <link href="https://rm-rf.ink/*/1d180e51.html"/>
    <id>https://rm-rf.ink/*/1d180e51.html</id>
    <published>2024-01-10T04:46:03.000Z</published>
    <updated>2024-01-17T09:58:34.642Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>芝麻叶面条是河南的家常面食，喜不喜欢面食，吃上一次就会想第二次。</p><span id="more"></span><h1><a id="_7"></a>食料</h1><ul class="lvl-0"><li class="lvl-2"><p>芝麻叶</p></li><li class="lvl-2"><p>豆腐丁</p></li><li class="lvl-2"><p>韭菜</p></li><li class="lvl-2"><p>小香芹</p></li><li class="lvl-2"><p>面粉</p></li><li class="lvl-2"><p>葱</p></li><li class="lvl-2"><p>蒜</p></li><li class="lvl-2"><p>干辣椒</p></li></ul><h1><a id="_18"></a>调味料</h1><ul class="lvl-0"><li class="lvl-2"><p>花生油 25ml</p></li><li class="lvl-2"><p>盐 5g</p></li><li class="lvl-2"><p>味精 5g</p></li><li class="lvl-2"><p>鸡精 5g</p></li><li class="lvl-2"><p>十三香 2g</p></li><li class="lvl-2"><p>香油 5ml</p></li></ul><h1><a id="_27"></a>操作</h1><ul class="lvl-0"><li class="lvl-2"><p>开水后放入芝麻叶，煮至软化即可，沥干水分备用；</p></li><li class="lvl-2"><p>韭菜切段，芹菜杆切碎，加入香油、盐腌制备用；</p></li><li class="lvl-2"><p>豆腐切丁放入花生油煎至焦香；</p></li><li class="lvl-2"><p>碗中放入20g面粉，花生油烧热，浇入后搅拌至面糊状；</p></li><li class="lvl-2"><p>热油放入葱、蒜、干辣椒炒香；</p></li><li class="lvl-2"><p>放入芝麻叶、豆腐丁、芹菜叶，翻炒2分钟后加入开水；</p></li><li class="lvl-2"><p>锅内下入干面条，煮熟后，加入少许盐、味精、鸡精、十三香、面油；</p></li><li class="lvl-2"><p>最后倒入腌好的韭菜、芹菜，搅拌几次后出锅；</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;芝麻叶面条是河南的家常面食，喜不喜欢面食，吃上一次就会想第二次。&lt;/p&gt;</summary>
    
    
    
    <category term="菜谱" scheme="https://rm-rf.ink/categories/%E8%8F%9C%E8%B0%B1/"/>
    
    
    <category term="美食" scheme="https://rm-rf.ink/tags/%E7%BE%8E%E9%A3%9F/"/>
    
    <category term="河南" scheme="https://rm-rf.ink/tags/%E6%B2%B3%E5%8D%97/"/>
    
    <category term="芝麻叶" scheme="https://rm-rf.ink/tags/%E8%8A%9D%E9%BA%BB%E5%8F%B6/"/>
    
    <category term="面条" scheme="https://rm-rf.ink/tags/%E9%9D%A2%E6%9D%A1/"/>
    
    <category term="糊涂" scheme="https://rm-rf.ink/tags/%E7%B3%8A%E6%B6%82/"/>
    
  </entry>
  
  <entry>
    <title>mysql count函数正确使用姿势</title>
    <link href="https://rm-rf.ink/*/9f600c63.html"/>
    <id>https://rm-rf.ink/*/9f600c63.html</id>
    <published>2024-01-09T07:38:00.000Z</published>
    <updated>2024-01-15T03:38:10.863Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>  <code>count()</code> 是<code>mysql</code>聚合函数，返回指定匹配条件的行数。开发中常用来统计表中数据，全部数据，不为null数据，或者去重数据。</p><span id="more"></span><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 统计表中数据包括null</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">from</span> zs_access_log;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 统计表中数据包括null</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> zs_access_log;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 统计表中指定列不为null的数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(id) <span class="keyword">from</span> zs_access_log;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 统计表中指定列去重不为null的数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> id) <span class="keyword">from</span> zs_access_log;</span><br></pre></td></tr></table></figure><h1><a id="1__7"></a>1. 背景</h1><p>  生产环境使用 <code>mysql: 8.0.18 Innodb</code>，  <code>mybatis</code>分页查询由两次查询完成，第一次获取总的记录行数，再次获取具体分页数据。<br>  以下查询可以看到<code>count</code>是存在性能问题的，接口的响应<code>&gt; 800ms</code>  <code>&lt; 4s</code>，但是该如何优化呢？</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> count(*) from zs_access_log;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|    37485 |</span><br><span class="line">+----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.53 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from zs_access_log  <span class="built_in">limit</span> 0,10;</span><br><span class="line">10 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1><a id="2_count_14"></a>2. count性能对比</h1><p>​对比 <code>count</code> 几种使用姿势，在<code>InnoDB</code>和<code>MyISAM</code>引擎的性能对比。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; show engines;</span><br><span class="line">+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+</span><br><span class="line">| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |</span><br><span class="line">+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+</span><br><span class="line">| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |</span><br><span class="line">| MEMORY             | YES     | Hash based, stored <span class="keyword">in</span> memory, useful <span class="keyword">for</span> temporary tables      | NO           | NO   | NO         |</span><br><span class="line">| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |</span><br><span class="line">| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |</span><br><span class="line">| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |</span><br><span class="line">| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |</span><br><span class="line">| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |</span><br><span class="line">| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |</span><br><span class="line">| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |</span><br><span class="line">+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+</span><br><span class="line">9 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p>​数据表 <code>zs_access_log</code> 和 <code>zs_access_log_myisam</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> TABLE_NAME , ENGINE from information_schema.tables <span class="built_in">where</span> TABLE_SCHEMA = <span class="string">&#x27;unified-form&#x27;</span> and TABLE_NAME like <span class="string">&#x27;%zs_access%&#x27;</span>;</span><br><span class="line">+----------------------+--------+</span><br><span class="line">| TABLE_NAME           | ENGINE |</span><br><span class="line">+----------------------+--------+</span><br><span class="line">| zs_access_log        | InnoDB |</span><br><span class="line">| zs_access_log_myisam | MyISAM |</span><br><span class="line">+----------------------+--------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h2><a id="21_InnoDB_23"></a>2.1 InnoDB</h2><h3><a id="211_count1_26"></a>2.1.1 count(1)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> count(1) from zs_access_log;</span><br><span class="line">+----------+</span><br><span class="line">| count(1) |</span><br><span class="line">+----------+</span><br><span class="line">|    37485 |</span><br><span class="line">+----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.53 sec)</span><br></pre></td></tr></table></figure><h3><a id="212_count_29"></a>2.1.2 count(*)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> count(*) from zs_access_log;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|    37485 |</span><br><span class="line">+----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.52 sec)</span><br></pre></td></tr></table></figure><h3><a id="213_countcolumn_33"></a>2.1.3 count(column)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> count(<span class="built_in">id</span>) from zs_access_log;</span><br><span class="line">+-----------+</span><br><span class="line">| count(<span class="built_in">id</span>) |</span><br><span class="line">+-----------+</span><br><span class="line">|     37485 |</span><br><span class="line">+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.50 sec)</span><br></pre></td></tr></table></figure><p>​数据表明以上几种方式查询效率相差无几，为什么会出现这样的问题呢？</p><h2><a id="22_MyISAM_39"></a>2.2 MyISAM</h2><h3><a id="211_count1_41"></a>2.1.1 count(1)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> count(1) from zs_access_log_myisam;</span><br><span class="line">+----------+</span><br><span class="line">| count(1) |</span><br><span class="line">+----------+</span><br><span class="line">|    37485 |</span><br><span class="line">+----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3><a id="212_count_44"></a>2.1.2 count(*)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> count(*) from zs_access_log_myisam;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|    37485 |</span><br><span class="line">+----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3><a id="213_countcolumn_48"></a>2.1.3 count(column)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> count(<span class="built_in">id</span>) from zs_access_log_myisam;</span><br><span class="line">+-----------+</span><br><span class="line">| count(<span class="built_in">id</span>) |</span><br><span class="line">+-----------+</span><br><span class="line">|     37485 |</span><br><span class="line">+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p>​数据表明以上几种方式在<code>InnoDB</code>和<code>MyISAM</code>引擎中，查询效率差别很大。</p><p>​<code>MyISAM</code>把总行数存在磁盘(<code>information_schema.partitions</code>)中，<code>count(*)</code>和<code>count(1)</code>的性能会好很多。</p><p>​<code>InnoDB</code>获取所有数据，并逐行计算总行数，<code>count(*)</code>和<code>count(1)</code>的性能会差很多。`</p><p><a href="https://dev.mysql.com/doc/refman/8.0/en/aggregate-functions.html#function_count">mysql文档原文</a></p><h1><a id="3__60"></a>3. 性能优化</h1><p>​在实际开发过程中，业务系统的数据表均使用<code>InnoDB</code>支持事务。</p><p>​该如何优化<code>InnoDB</code>中<code>count</code>的性能？</p><ul class="lvl-0"><li class="lvl-2"><p>使用<code>redis</code>记录数据行数</p></li><li class="lvl-2"><p>使用除了<code>主键</code>以外索引列</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> count(<span class="built_in">id</span>) from zs_access_log;</span><br><span class="line">+-----------+</span><br><span class="line">| count(<span class="built_in">id</span>) |</span><br><span class="line">+-----------+</span><br><span class="line">|     37485 |</span><br><span class="line">+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.54 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> count(action) from zs_access_log;</span><br><span class="line">+---------------+</span><br><span class="line">| count(action) |</span><br><span class="line">+---------------+</span><br><span class="line">|         37485 |</span><br><span class="line">+---------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;  &lt;code&gt;count()&lt;/code&gt; 是&lt;code&gt;mysql&lt;/code&gt;聚合函数，返回指定匹配条件的行数。开发中常用来统计表中数据，全部数据，不为null数据，或者去重数据。&lt;/p&gt;</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="mysql" scheme="https://rm-rf.ink/tags/mysql/"/>
    
    <category term="mybatis" scheme="https://rm-rf.ink/tags/mybatis/"/>
    
    <category term="count" scheme="https://rm-rf.ink/tags/count/"/>
    
    <category term="聚合函数" scheme="https://rm-rf.ink/tags/%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0/"/>
    
    <category term="InnoDB" scheme="https://rm-rf.ink/tags/InnoDB/"/>
    
    <category term="MyISAM" scheme="https://rm-rf.ink/tags/MyISAM/"/>
    
  </entry>
  
  <entry>
    <title>通用excel导入设计</title>
    <link href="https://rm-rf.ink/*/7178be5f.html"/>
    <id>https://rm-rf.ink/*/7178be5f.html</id>
    <published>2023-04-12T01:44:54.000Z</published>
    <updated>2024-01-10T12:52:56.409Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2><a id="_3"></a>业务场景:</h2><ol><li class="lvl-3">上传excel按需写入字段；</li><li class="lvl-3">覆盖更新数据；</li></ol><span id="more"></span><h2><a id="_16"></a>设计方案</h2><pre class="mermaid">sequenceDiagramexcel ->> handler: 上传文件,传入对应excel的字段名称、类型、索引handler ->> execute: insert[插入]\ignore[忽略重复数据]\replace[替换重复数据]execute ->> insert: 写入数据库</pre><h2><a id="mysql_27"></a>mysql</h2><ol><li class="lvl-3"><p>insert into  table ()  select ‘’ from dual where not exsits ()</p></li><li class="lvl-3"><p>insert ignore into id={IDGenerrate.gernxxx}</p></li><li class="lvl-3"><p>Insert into on dupli   update  xx=values()</p></li></ol><p>Sql:</p><ol><li class="lvl-3"><p>select id from table where dupKeys = ‘’</p></li><li class="lvl-3"><p>insert ignore into  values (id)</p></li><li class="lvl-3"><p>ignore :  insert into  table ()  select ‘xx’,‘x’,‘xx from dual where not exsits ( select id from table where dupKeys = ‘’’)</p></li><li class="lvl-3"><p>Insert into table ()  select ‘x’,‘id’ from dual  on dupli   update  xx=values()</p></li></ol><pre class="mermaid">classDiagramclass Field{Intger index 索引String name  字段名String type  字段类型Object value  字段值String exp 校验表达式}class Record{String tableName 表名List fields 字段}class ModeEnum{INSERT("insert") 写入IGNORE("ignore") 忽略重复数据REPLACE("replace") 更新重复数据}class ExcelUtil{+File file excel+List:String fields 字段  +String tableName 数据表名  +Integer skip 跳过行  +ModeEnum mode 写入方式  +List:String dupKeys 用于校验重复的字段  +RecordHandler recordHandler 数据行处理-static importExcel(file,tableName,fields,skip,mode,recordHandler) 导入-static exportExcel(response,tableName,fields,skip,mode,recordHandler) 导出}class RecordHandler{-read(Record) 读取行}ExcelUtil --> ModeEnumExcelUtil --> FieldExcelUtil --> RecordExcelUtil --> RecordHandler</pre>]]></content>
    
    
    <summary type="html">&lt;h2&gt;&lt;a id=&quot;_3&quot;&gt;&lt;/a&gt;业务场景:&lt;/h2&gt;
&lt;ol&gt;
&lt;li class=&quot;lvl-3&quot;&gt;上传excel按需写入字段；&lt;/li&gt;
&lt;li class=&quot;lvl-3&quot;&gt;覆盖更新数据；&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="mysql" scheme="https://rm-rf.ink/tags/mysql/"/>
    
    <category term="jdbc" scheme="https://rm-rf.ink/tags/jdbc/"/>
    
    <category term="easyexcel" scheme="https://rm-rf.ink/tags/easyexcel/"/>
    
    <category term="excel" scheme="https://rm-rf.ink/tags/excel/"/>
    
    <category term="import" scheme="https://rm-rf.ink/tags/import/"/>
    
    <category term="export" scheme="https://rm-rf.ink/tags/export/"/>
    
    <category term="replace" scheme="https://rm-rf.ink/tags/replace/"/>
    
    <category term="ignore" scheme="https://rm-rf.ink/tags/ignore/"/>
    
    <category term="insert" scheme="https://rm-rf.ink/tags/insert/"/>
    
  </entry>
  
  <entry>
    <title>4月份wbs</title>
    <link href="https://rm-rf.ink/*/c2cb16de.html"/>
    <id>https://rm-rf.ink/*/c2cb16de.html</id>
    <published>2023-04-07T08:35:09.000Z</published>
    <updated>2024-01-10T12:48:55.911Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2><a id="_1"></a>项目一览</h2><span id="more"></span><pre class="mermaid">gantttitle 项目一览dateFormat YYYY-MM-DDexcludes weekendssection [产品研发][事件系统升级研发] :a1, 2023-04-03,2023-04-14[excel导入/导出封装] :a2, 2023-04-10,2023-04-14section [小学生学习报][第一批需求研发] :b2,2023-04-04,6dsection [事前管控][4月份需求迭代] :c2,2023-04-07,2023-04-25section [光灿售后][需求调研] :d2,2023-04-09,2023-04-12section [铁塔六费稽核][线上bug修改] :e1,2023-04-09,2023-04-13section [铁塔代维资源核查][二阶段需求] :f2,2023-03-25,2023-04-13</pre><pre class="mermaid">gantttitle 人员dateFormat YYYY-MM-DDexcludes weekendssection [产品研发][事件系统升级研发] :active, a1, 2023-04-03,2023-04-14[excel导入/导出封装] :a2, 2023-04-10,2023-04-14section [小学生学习报][第一批需求研发] :active,b2,2023-04-04,6dsection [事前管控][4月份需求迭代] :active, c2,2023-04-07,2023-04-25section [光灿售后][需求调研] :d2,2023-04-09,2023-04-12section [铁塔六费稽核][线上bug修改] :e1,2023-04-09,2023-04-13section [铁塔代维资源核查][二阶段需求] :active,f2,2023-03-25,2023-04-13</pre><pre class="mermaid">gantt    dateFormat  YYYY-MM-DD    title       人员分布    excludes    weekends section 【陈曦】 [小学生学习报][第一批需求研发] :a2,2023-04-07,2023-04-12 section 【弓远】 [代维资源核查] :active,a1,2023-04-07,2023-04-13 section 【杨波】 [事前管控系统][4月份需求迭代] :active,a1,2023-04-07,2023-04-25 [光灿售后][需求调研] :active,a1,2023-04-10,2023-04-12 section 【连建锋】 [事前管控系统][4月份需求迭代] :active,a1,2023-04-07,2023-04-25 section 【张道书】 [事前管控系统][4月份需求迭代] :active,a1,2023-04-07,2023-04-25 section 【李剑威】 [事前管控系统][4月份需求迭代] :active,a1,2023-04-07,2023-04-25 section 【张豪豪】 [事前管控系统][4月份需求迭代] :active,a1,2023-04-07,2023-04-25 section 【程双】 [学习报][第一批需求][研发] :active,a1,2023-04-07,2023-04-12 section 【马国岭】 [代维资源核查] :active,a1,2023-04-07,2023-04-13 section 【刘欢】 [学习报][第一批需求][测试] :active,a1,2023-04-07,2023-04-12 section 【朱云飞】 [代维资源核查] :active,a1,2023-04-10,2023-04-13 section 【吴要权】 [产品研发][事件系统升级] :active,a1,2023-04-07,2023-04-14 [产品研发][excel导入、导出] :a1,2023-04-10,2023-04-14</pre><pre class="mermaid">%%{init: {"flowchart": {"htmlLabels": false}} }%%flowchart LRa("项目整体情况")subgraph "[产品研发]截止:  2023-04-14"b1("负责人: 吴要权")  b1 --> b2("事件系统升级，  传统建表,动态配置接口开发模式; - testing")  b1 --> b3("excel导入、导出通用封装 - 导入待测试")endsubgraph "[小学生学习报]截止: 2023-04-12"  c1("负责人: 陈曦")  c1 --> c2("第一批需求变更        开发、测试、发布  --已发布")  c2 --> c3("程双")  c2 --> c4("刘欢")  c2 --> c5("连建锋")endsubgraph "[事前管控系统]截止: 2023-04-25"  d1("负责人: 连建锋")  d1 --> d2("4月份需求分析        开发、测试、发布")  d2 --> d3("杨波")  d2 --> d4("张道书")  d2 --> d5("李剑威")  d2 --> d6("张豪豪")  d2 --> d7("马国岭")endsubgraph "[光灿售后系统]截止: 2023-04-12"  e1("负责人: 杨波")  e1 --> e2("12日之前和客户约定时间              确定售后流程和项目立项")  e2 --> e3("弓远")  e2 --> e4("陈曦")  e1 --> e5("12日调研完和客户最终确定方案--")endsubgraph "[铁塔六费稽核]截止: 2023-04-13"  f1("负责人: 弓远")  f1 --> f2("1.审批页面附件预览问题；             2. 3月份问题修复；             以上问题开发、测试、并发布")  f2 --> f3("程双")  f2 --> f4("连建锋")  f2 --> f5("马国岭")endsubgraph "[铁塔代维资源核查]截止: 2023-04-13"  g1("负责人: 弓远")  g1 --> g2("代维资源二阶段需求              测试、并发布；              视频播放和多状态筛选 待解决")  g2 --> g3("马国岭")  g2 --> g4("朱云飞")  g2 --> g5("尚雨鹏")enda --> b1 & c1 & d1 & e1 & f1 & g1</pre><pre class="mermaid">%%{init: {"flowchart": {"htmlLabels": false}} }%%flowchart LRa("项目整体情况")subgraph "[小学生学习报]截止: 2023-04-25"  c1("负责人: 陈曦")  c1 --> c6("第二批需求变更        开发、测试、发布 -- 2023-04-25")  c6 --> c7("程双")  c6 --> c8("刘欢")endsubgraph "[事前管控系统]截止: 2023-04-25"  d1("负责人: 连建锋")  d1 --> d2("4月份需求分析        开发、测试、发布         六费稽核需要建锋解决问题         进度不理想---------截止04.25---------- -------------截止04.27---------------sit保持测试     问题列表收集     dev -> prod 数据同步，代码部署；     -------------截止04.27-------------- ")  d2 --> d4("张道书")  d2 --> d7("马国岭")endsubgraph "[铁塔六费稽核]截止: 2023-04-13"  f1("负责人: 弓远")  f1 --> f2("1.审批页面附件预览问题；             2. 3月份问题修复；             以上问题开发、测试、并发布，             处理遗留问题  截止时间待定      --------截止04.28号------增加 时间区间筛选；定时发起流程；      更新无历史数据；      一键发起流程； 已测试，待发布；       工单pdf预览，图片放大缩小；       --------截止04.28号----------       根据当前角色缩小区域范围；       优化点: 1.excel审批支持 通过、驳回。       增加 纠纷台账 支持excel导入；")  f2 --> f3("程双")  f2 --> f4("连建锋")  f2 --> f5("马国岭")endsubgraph "[铁塔代维资源核查]截止: 2023-04-13 "  g1("负责人: 弓远")  g1 --> g2("代维资源二阶段需求              测试、并发布；              视频播放和多状态筛选 待解决，              处理遗留问题 截止时间待定              --------------              04-27 bug:1.表头列表展示复合表头，导出复合表头；    报表管理，支持导出和扫描上传； 技术方案待定，时间待定；    ")  g2 --> g3("马国岭")  g2 --> g4("朱云飞")  g2 --> g5("尚雨鹏")enda --> c1 & d1  & f1 & g1</pre><pre class="mermaid">%%{init: {"flowchart": {"htmlLabels": false}} }%%flowchart LRa("项目整体情况")subgraph "[小学生学习报]"  c1("负责人: 陈曦")  c1 --> c6("标签功能已发布  消息通知待测试发布")  c6 --> c8("刘欢")endsubgraph "[铁塔六费稽核]截止: 2023-06-16"  f1("负责人: 弓远")  f1 --> f2("评分 时间待确定                费用需求调研确认 06-14进行                费用报表 实施 截止06-16号")  f2 --> f4("朱云飞")  f2 --> f5("马国岭")endsubgraph "[移动宝冶]截止: 2023-06-21"  e1("负责人: 杨波")  e1 --> e2("官网和后端工作流")  e2 --> e4("张道书")  e2 --> e5("杨波")endsubgraph "[研发需求]截止: "  b1("负责人: 吴要权")  b1 --> b2("1.铁塔工单、事前导入性能问题             2. 工单验证码刷新问题")  b2 --> b4("连建锋")  b2 --> b5("程双")enda --> c1 & f1 & e1 & b1</pre>]]></content>
    
    
    <summary type="html">&lt;h2&gt;&lt;a id=&quot;_1&quot;&gt;&lt;/a&gt;项目一览&lt;/h2&gt;</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="wbs" scheme="https://rm-rf.ink/tags/wbs/"/>
    
    <category term="项目一览" scheme="https://rm-rf.ink/tags/%E9%A1%B9%E7%9B%AE%E4%B8%80%E8%A7%88/"/>
    
  </entry>
  
  <entry>
    <title>gitlab &amp; OKR 进行项目管理 </title>
    <link href="https://rm-rf.ink/*/2050102104.html"/>
    <id>https://rm-rf.ink/*/2050102104.html</id>
    <published>2023-03-28T02:40:36.000Z</published>
    <updated>2024-01-10T12:53:22.481Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p>本文章围绕gitlab 和 OKR，使用gitlab已有功能，进行项目管理、问题追踪和开发流程规范。</p></blockquote><span id="more"></span><h2><a id="_9"></a>需求管理</h2><pre class="mermaid">graph TBA[需求池] -->|产品/研发共同确认| B[需求分类]B --> High[高优先级:high] ----CB --> Medium[普通优先级:medium]----CB --> Low[低优先级:low]----CB --> Trivial[微小改动:trivial]----CC(需求队列)</pre><h2><a id="_24"></a>版本管理</h2><pre class="mermaid">graph LRA[个人开发分支:feat]B[开发分支:dev]C[测试分支:test]D[预发布分支:stag]E[稳定版本分支:realse]F[hot/fix分支]subgraph P1 [分支管理流程]direction BTA-->|合并|BB-->|合并|CC-->|合并|DD-->|合并|Eendsubgraph P2 [紧急修复]direction LRF:::pureRed -.->  B & C & EendclassDef red fill:#eeaa9c,color:#fff;classDef blue fill:#93b5cf,color:#fff;classDef yellow fill:#fcd217,color:#fff;classDef purple fill:#e0c8d1,color:#fff;classDef green fill:#0f0;classDef pureRed fill:#f00,color:#fff;classDef pureBlue fill:#00f,color:#fff;classDef lightBlue fill:#2e317c,color:#fff;classDef lightGreen fill:#a4cab6,color:#fff;</pre><h2><a id="_64"></a>里程碑管理</h2><p>里程碑可以是具体的项目、要发布的版本、特定的研发类需求…</p><p>里程碑作为【售前】【产品】【研发】 【测试】【运维】目标（O）</p><p>根据目标来拆解各自的KR。</p><ul class="lvl-0"><li class="lvl-2"><p><strong>售前: 跟踪项目进展、时间把控；客户问题沟通；</strong></p></li><li class="lvl-2"><p>产品: 跟进项目进展、业务答疑；测试跟进；</p></li><li class="lvl-2"><p><strong>研发: 完成既定研发目标；项目进展反馈；</strong></p></li><li class="lvl-2"><p>测试: 测试方案推敲；</p></li><li class="lvl-2"><p>运维: 准备开发、测试、预发布环境；</p></li></ul><pre class="mermaid">graph LRA[Timeline]B[里程碑]C[看板]D[OKR]E[Bug]F[发布上线]subgraph 里程碑管理direction LRA --> BB --->|个人OKR拆解|DB --->|bug关联里程碑|EB --->|日常项目看板|CC & D & E --> Fend</pre><pre class="mermaid">ganttdateFormat YYYY/MM/DDtitle 项目一览excludes weekdays 2023-03-28section 需求阶段启动会议 : des1,2023-04-01,2023-04-10客户调研 : des2,2023-04-01,2d需求整理 : des3,after desc2,2d需求报告 : des4,after des3,2dsection 开发阶段需求分析 : des21,after des4,2d原型选定 : des22,after des21,2d代码开发 : des23,after des22,2d内测 : des24,after des23,2dsection 测试阶段部署     : des1,2023-04-06,2023-05-08客户测试  : des2,2023-04-06,2dbug修复  :  desc3,after des2,2d问题修复  : desc4,after des3,5dsection 上线启动培训     :  des1,2023-04-06,2023-04-08问题日结  : des2,2023-04-09,2d问题修复  : des3,after des2,2d发版      : des4,after des3,2d项目验收   : des5,after des4,2dsection 运维阶段问题整理   : des1,2023-04-10,2023-04-20问题修复   : des2,after des1,2d发版      : des3,after des2,2d</pre><h2><a id="_139"></a>工作流程</h2><pre class="mermaid">sequenceDiagramActor A as 售前Actor B as 产品Actor C as 设计Actor D as 测试Actor E as 研发Actor F as 运维par 售前解决方案      A->> B: 需求调研      note left of A: 产品和售前做充分调研、客户问题跟踪、项目进展跟踪    and 产品 -> 设计、测试    B -->>C: 原型、设计评审      note left of C: 根据项目情况是否需要原型、设计    B ->>D: 测试用例评审      B ->>E: 需求评审(拆解)    par 研发 -> 测试、运维        E ->>D: 提交版本测试、问题修复        E -->>F: 开发、预发布环境准备      and 测试 -> 产品、售前      D ->> B: 分支管理、版本发布、交付验收      note left of C: 分支管理由测试统一管理、测试问题跟踪、内部演示验收    end    end</pre><ol><li class="lvl-3"><p>需求分析：首先，需要了解客户的需求，并定义项目的目标、范围和可交付成果。</p></li><li class="lvl-3"><p>规划阶段：在这一阶段，需要确定项目的资源、时间表和预算。制定项目计划，并确定项目的关键里程碑和交付时间。</p></li><li class="lvl-3"><p>执行阶段：在这一阶段，需要跟踪项目的进度，分配任务，并确保项目按计划进行。确保与客户和利益相关者进行沟通和协调。</p></li><li class="lvl-3"><p>控制阶段：在这一阶段，需要监控项目的进度和成本，并及时采取纠正措施。需要定期评估项目的绩效和成果，并与客户和利益相关者分享进展。</p></li><li class="lvl-3"><p>收尾阶段：在这一阶段，需要完成项目并提交可交付成果。需要评估项目的成功和教训，并为下一个项目做准备。</p></li></ol><p>此外，以下是一些有助于软件项目管理的最佳实践：</p><ul class="lvl-0"><li class="lvl-2"><p>使用项目管理软件：使用项目管理软件可以帮助您轻松跟踪任务、资源、时间表和预算。</p></li><li class="lvl-2"><p>与利益相关者沟通：确保您与客户、团队成员和其他利益相关者进行沟通和协调。</p></li><li class="lvl-2"><p>采用敏捷开发方法：敏捷开发方法强调快速反馈和快速迭代，可以帮助您更快地实现项目目标。</p></li><li class="lvl-2"><p>风险管理：在整个项目周期内，您需要识别和管理风险，并制定应对措施。</p></li><li class="lvl-2"><p>团队管理：鼓励团队成员进行有效的协作和沟通，并激励他们为项目成功做出贡献。</p></li><li class="lvl-2"><p>持续学习：了解新的技术和工具，以保持对软件项目管理最新的见解和技能。</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;本文章围绕gitlab 和 OKR，使用gitlab已有功能，进行项目管理、问题追踪和开发流程规范。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="git" scheme="https://rm-rf.ink/tags/git/"/>
    
    <category term="gitlab" scheme="https://rm-rf.ink/tags/gitlab/"/>
    
    <category term="okr" scheme="https://rm-rf.ink/tags/okr/"/>
    
    <category term="项目管理" scheme="https://rm-rf.ink/tags/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>1. 低代码</title>
    <link href="https://rm-rf.ink/*/2967963195.html"/>
    <id>https://rm-rf.ink/*/2967963195.html</id>
    <published>2022-12-22T11:06:16.000Z</published>
    <updated>2024-01-11T01:25:33.097Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>代码技术路线，整体功能介绍。</p><span id="more"></span><h2><a id="0_11"></a>0.技术路线</h2><table><thead><tr><th>服务端</th><th>前端</th></tr></thead><tbody><tr><td>Java</td><td>react</td></tr><tr><td>springboot</td><td>ant-design</td></tr><tr><td>shenyu</td><td>formily</td></tr><tr><td>redis</td><td>Form-render</td></tr><tr><td>mysql</td><td>Designable</td></tr><tr><td>magic-api</td><td></td></tr><tr><td>dataway</td><td></td></tr><tr><td>es(全文检索)</td><td></td></tr><tr><td>flowable</td><td></td></tr><tr><td>Paddle</td><td></td></tr></tbody></table><h2><a id="1_26"></a>1.功能</h2><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>系统权限</td><td>用户管理、菜单管理、角色管理、权限管理、系统字典…</td></tr><tr><td>组织机构</td><td>行政区域、机构、部门、职位、人员…</td></tr><tr><td>流程引擎</td><td>流程设计器、表单、按钮、流程事务、流程监控、钉钉通知…</td></tr><tr><td>开发者工具</td><td>数据库维护、代码生成、数据源、模板管理、任务调度、git提交…</td></tr><tr><td>页面设计器</td><td>api接口维护、业务逻辑编辑、中后台页面拖拽设计…待开发（流程页面拖拽设计、小程序页面拖拽设计、前台页面拖拽设计）</td></tr></tbody></table><h2><a id="2_40"></a>2.介绍</h2><h5><a id="_44"></a>系统</h5><p><img src="/images/image-20240109101551889.png" alt="image-20240109101551889"></p><p><img src="/images/image-20240109101856167.png" alt="image-20240109101856167"></p><h4><a id="_50"></a>工作流</h4><p><img src="/images/image-20240109102001046.png" alt="image-20240109102001046"></p><p><img src="/images/image-20240109102023589.png" alt="image-20240109102023589"></p><h4><a id="_58"></a>开发者</h4><p><img src="/images/image-20240109102152348.png" alt="image-20240109102152348"></p><h4><a id="_62"></a>页面设计</h4><p><img src="/images/image-20240109101322427.png" alt="image-20240109101322427"></p><p><img src="/images/image-20240109101351478.png" alt="image-20240109101351478"></p><p><img src="/images/image-20240109102332963.png" alt="image-20240109102332963"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;代码技术路线，整体功能介绍。&lt;/p&gt;</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="国立软件" scheme="https://rm-rf.ink/tags/%E5%9B%BD%E7%AB%8B%E8%BD%AF%E4%BB%B6/"/>
    
    <category term="低代码" scheme="https://rm-rf.ink/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81/"/>
    
    <category term="权限管理" scheme="https://rm-rf.ink/tags/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"/>
    
    <category term="流程引擎" scheme="https://rm-rf.ink/tags/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/"/>
    
    <category term="组织管理" scheme="https://rm-rf.ink/tags/%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86/"/>
    
    <category term="flowable" scheme="https://rm-rf.ink/tags/flowable/"/>
    
    <category term="bpmn" scheme="https://rm-rf.ink/tags/bpmn/"/>
    
    <category term="lowcode" scheme="https://rm-rf.ink/tags/lowcode/"/>
    
  </entry>
  
  <entry>
    <title>0. 低代码</title>
    <link href="https://rm-rf.ink/*/725797460.html"/>
    <id>https://rm-rf.ink/*/725797460.html</id>
    <published>2022-12-22T04:14:33.000Z</published>
    <updated>2024-01-11T01:25:23.434Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2><a id="0_3"></a>0.什么是低代码？</h2><blockquote><p>低代码（Low Code）是一种可视化的应用开发方法，用较少的代码、以较快的速度来交付应用程序，将程序员不想开发的代码做到自动化，称之为低代码。</p><p>低代码是一组数字技术工具平台，基于图形化拖拽、参数化配置等更为高效的方式，实现快速构建、数据编排、连接生态、中台服务。通过少量代码或不用代码实现数字化转型中的场景应用创新。</p></blockquote><span id="more"></span><h2><a id="1_13"></a>1.低代码的特点</h2><ol><li class="lvl-3"><p>不能仅用于或主要应用构建特定行业的应用;不能仅限于在依赖其他解决方案或平台上运行；</p></li><li class="lvl-3"><p>需要能提供给IT技术人员使用，不能只给平民开发者使用；</p></li><li class="lvl-3"><p>全生命周期：覆盖应用和相关资源的开发、版本管理、测试、部署、执行、管制、监控和管理的全生命周期；</p></li><li class="lvl-3"><p>内建数据存储：内建数据存储机制，不能依赖其他的数据库等存储服务；</p></li><li class="lvl-3"><p>数据与逻辑设计：支持用来设计数据结构和应用逻辑；</p></li><li class="lvl-3"><p>完整的界面设计：支持创建完整的应用界面，不能仅支持创建表单或管理界面；</p></li><li class="lvl-3"><p>第三方集成：支持引入第三方API或事件驱动机制；</p></li><li class="lvl-3"><p>自动运维：提供自动化的应用升级和版本管理机制；</p></li><li class="lvl-3"><p>多环境部署：支持针对多环境的一键部署，包括开发环境、测试环境、验证环境和生产环境；</p></li><li class="lvl-4"><p>社区共享：提供可供访问的应用市场，用来共享组件、模块、连接器和模板；</p></li></ol><h2><a id="2_28"></a>2.谁在使用低代码？</h2><p>​低代码技术显著降低了软件开发的技术门槛，让更多人可以参与到软件开发中，进一步扩大软件开发者的规模，加速信息化建设。都有谁适合使用低代码技术开发软件？</p><p>​从事低代码开发人员可以分成两类：服务于企业IT部门或软件的公司的IT技术人员（包含但不限于程序员、项目经理、实施顾问等）；以及来自业务部门，本职工作与IT无关但参与到软件开发中的业务开发者。</p><h3><a id="IT_34"></a>低代码赋能IT技术人员</h3><p>​这里的IT技术人员是与“业务开发者”相对的概念，包含但不限于程序员，特指在企业或信息化提供商中，本职工作为企业信息化相关的技术人员。IT技术人员主要集中在企业信息化部门和为企业提供信息化服务（如外包开发、系统集成等）的软件公司中，典型岗位有项目经理、架构师、程序员、测试人员、实施和运维人员、DevOps等。</p><p>####整体而言，IT技术人员具备以下特征：</p><p>​具备技能：通常具有计算机相关的教育背景，或通过自学的方式掌握了一定的IT技能（如编程语言、数据库管理、配置管理、系统管理等）<br>​考核指标：能否保质保量地满足本单位或客户的信息化需求是核心指标<br>​学习意愿：需要紧跟技术发展趋势，跟随团队和企业技术决策，及时更新技术能力</p><h2><a id="3_46"></a>3.赋能业务人员</h2><p>​在低代码技术被命名之前，国际知名的研究机构们就提出了“业务开发者/平民开发者”的概念。这两个概念与专业开发者对应，专指那些向业务部门汇报有开发能力来辅助业务发展的员工。这些人和向IT部门报告的专业开发者不同，他们的主要工作职责是业务发展，软件开发只是一个辅助性工作，通常不会有相关的考核指标，得到的资源也较为有限。在传统的编码开发时代，业务开发者较为少见，有能力从事辅助性软件开发的业务人员主要集中在数据分析师、软件公司的程序员（程序员的主要工作是开发软件产品或对外交付软件项目，而不是辅助性的软件工具）等具备编程能力的人群。而低代码技术的出现，让更多的业务人员可以成为业务开发者，比如构建订单管理应用的销售主管、人事档案系统的HR、库存盘点APP的库管人员等。</p><h3><a id="_50"></a>整体而言，业务开发者具备以下特征：</h3><p>​具备技能：通常没有计算机相关的教育背景，部分掌握Excel等办公软件的常用功能；<br>​考核指标：能否完成业务目标是核心指标，通常不包含信息化建设相关内容；<br>​学习意愿：不得不参与软件开发，通常没有主动学习IT相关技术的动力和投入；</p><h2><a id="4_56"></a>4.对业务开发者的价值</h2><p>​与帮助IT技术人员提升软件开发效率不同，低代码对于大多数业务开发者而言，是解决了“能不能开发软件”的问题。这就意味着，业务人员可以根据自身的应用场景，快速构建起对应的软件应用，减少了与IT部门协调确认的沟通成本，在IT部门资源紧缺的背景下，尽快扫清信息化死角。<br>​业务开发者构建的应用主要有以下几类，除数据报表应用的业务逻辑复杂度较高而且通常需要与第三方系统集成，对业务开发者有较高的学习能力要求外，其他应用场景相对简单，更适合业务开发者使用低代码构建。</p><h2><a id="5_61"></a>5.低代码的应用价值</h2><p>​低代码开发平台可以显著提升软件开发的效率，可广泛应用于各行业数字化转型升级。具体而言，开发者可以使用低代码开发平台，更简单、更快速地构建个性化应用，打造数字化平台。</p><p><img src="/images/e5b623cf911d4b69996bb63cce5b7927.png" alt="在这里插入图片描述"></p>]]></content>
    
    
    <summary type="html">&lt;h2&gt;&lt;a id=&quot;0_3&quot;&gt;&lt;/a&gt;0.什么是低代码？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;低代码（Low Code）是一种可视化的应用开发方法，用较少的代码、以较快的速度来交付应用程序，将程序员不想开发的代码做到自动化，称之为低代码。&lt;/p&gt;
&lt;p&gt;低代码是一组数字技术工具平台，基于图形化拖拽、参数化配置等更为高效的方式，实现快速构建、数据编排、连接生态、中台服务。通过少量代码或不用代码实现数字化转型中的场景应用创新。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="国立软件" scheme="https://rm-rf.ink/tags/%E5%9B%BD%E7%AB%8B%E8%BD%AF%E4%BB%B6/"/>
    
    <category term="低代码" scheme="https://rm-rf.ink/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81/"/>
    
    <category term="权限管理" scheme="https://rm-rf.ink/tags/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"/>
    
    <category term="流程引擎" scheme="https://rm-rf.ink/tags/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/"/>
    
    <category term="组织管理" scheme="https://rm-rf.ink/tags/%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>mysql &#39;No DataSource Set&#39;解决办法</title>
    <link href="https://rm-rf.ink/*/202678719.html"/>
    <id>https://rm-rf.ink/*/202678719.html</id>
    <published>2022-10-10T06:38:01.000Z</published>
    <updated>2024-01-10T12:53:35.020Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>mysql 8.0.13开始，使用sslMode属性代替了原来的useSSL属性， 所以把<code>useSSL=true</code>改成<code>sslMode=DISABLED</code> 或者添加<code>allowPublicKeyRetrieval=true</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="mysql" scheme="https://rm-rf.ink/tags/mysql/"/>
    
    <category term="java" scheme="https://rm-rf.ink/tags/java/"/>
    
    <category term="error" scheme="https://rm-rf.ink/tags/error/"/>
    
    <category term="jdbc" scheme="https://rm-rf.ink/tags/jdbc/"/>
    
    <category term="springboot" scheme="https://rm-rf.ink/tags/springboot/"/>
    
  </entry>
  
  <entry>
    <title>搭建maven私库</title>
    <link href="https://rm-rf.ink/*/1406322052.html"/>
    <id>https://rm-rf.ink/*/1406322052.html</id>
    <published>2022-08-31T06:46:04.000Z</published>
    <updated>2024-01-10T12:53:27.280Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1><a id="1_docker_maven_2"></a>1. docker 搭建maven私库</h1><span id="more"></span><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d --name nexus -p 8081:8081 -d --restart always -u root --privileged=true -v ~/opt/nexus-data:/nexus-data sonatype/nexus3</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">docker exec -it nexus //进入容器</span><br><span class="line">cd /nexus-data</span><br><span class="line">cat admin.password //复制密码</span><br></pre></td></tr></table></figure><p>访问 <a href="http://ip:8081">http://ip:8081</a><br>修改密码后 admin.password自动删除</p><h1><a id="2_maven_20"></a>2. 配置maven私库</h1><h4><a id="21_role_22"></a>2.1添加 role</h4><p>develop =&gt; nx-all</p><h5><a id="22__user_26"></a>2.2 添加 user</h5><p>developer =&gt; develop</p><h1><a id="3__34"></a>3. 插件开发环境配置</h1><h4><a id="31_mavensettingxml_36"></a>3.1 maven/setting.xml配置</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-public-gl<span class="tag">&lt;/<span class="name">id</span>&gt;</span> <span class="comment">&lt;!--对应pom.xml的id=maven-public-gl的仓库--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">username</span>&gt;</span>developer<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>Glrj@1234<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-releases-gl<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  <span class="comment">&lt;!--对应pom.xml的id=maven-releases-gl的仓库--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">username</span>&gt;</span>developer<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>Glrj@1234<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-snapshots-gl<span class="tag">&lt;/<span class="name">id</span>&gt;</span> <span class="comment">&lt;!--对应pom.xml中id=maven-snapshots-gl的仓库--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">username</span>&gt;</span>developer<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>Glrj@1234<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirror</span>&gt;</span> <span class="comment">&lt;!--对应pom.xml中id=maven-public-gl的仓库--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-public-gl<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>GZ Repository Mirror.<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://nexus.corebrew.net/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4><a id="32_pomxml_40"></a>3.2 插件项目pom.xml配置</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>low-code<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">    &lt;...&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>low-code<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>低代码开放平台<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;...&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-releases-gl<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://nexus.corebrew.net/repository/maven-releases/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-snapshots-gl<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://nexus.corebrew.net/repository/maven-snapshots/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5><a id="33_pomxml_46"></a>3.3 项目依赖pom.xml</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-public-gl<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://nexus.corebrew.net/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-public-gl<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://nexus.corebrew.net/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">java</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="java" scheme="https://rm-rf.ink/tags/java/"/>
    
    <category term="docker" scheme="https://rm-rf.ink/tags/docker/"/>
    
    <category term="maven" scheme="https://rm-rf.ink/tags/maven/"/>
    
  </entry>
  
  <entry>
    <title>飞桨OCR硬件清单</title>
    <link href="https://rm-rf.ink/*/1156593666.html"/>
    <id>https://rm-rf.ink/*/1156593666.html</id>
    <published>2022-08-31T06:46:04.000Z</published>
    <updated>2024-01-10T12:52:31.567Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3><a id="_5"></a>飞桨官方要求</h3><p><strong>1. 操作系统要求：</strong></p><ul class="lvl-0"><li class="lvl-3"><p>Ubuntu 20.04</p></li><li class="lvl-2"><p>CentOS 7</p></li><li class="lvl-2"><p>操作系统要求是 64 位版本</p></li></ul><span id="more"></span><p><strong>2. 处理器要求</strong></p><ul class="lvl-0"><li class="lvl-2"><p>处理器支持 MKL</p></li><li class="lvl-2"><p>处理器架构是x86_64（或称作 x64、Intel 64、AMD64）架构，目前PaddlePaddle不支持arm64架构（mac M1除外，paddle 已支持Mac M1 芯片）</p></li></ul><h5><a id="4__GPU__23"></a>4.  <strong>GPU 支持情况：</strong></h5><ul class="lvl-0"><li class="lvl-2"><p>目前 <strong>PaddlePaddle</strong> 支持 <strong>NVIDIA</strong> 显卡的 <strong>CUDA</strong> 驱动和 <strong>AMD</strong> 显卡的 <strong>ROCm</strong> 架构</p><hr></li></ul><h3><a id="_31"></a>从深度学习硬件架构分析硬件需求</h3><p>众所知周深度学习最需要的性能是GPU也就是显卡性能，理论上在同等条件下GPU性能越高，深度学习的效率越高。但这其中也有一个很大的误区，就是电脑性能是一个整体并不是由单一硬件所决定的，是一个木桶效应。</p><p><strong>当GPU性能达到一定高度之后，其他硬件性能没有跟上，再好的GPU也带来不了性能的提升。</strong></p><p><strong>GPU＞CPU≈主板（CPU主板相辅相成）＞内存＞硬盘＞电源＞机箱（装的下就行）</strong></p><p><img src="https://pic3.zhimg.com/v2-c997a6cc407a491a6613f025640da266_r.jpg" alt="preview"></p><p>上述图示，深度神经网络计算大致流程，下面通过深度神经网络计算环节，分析核心硬件配置理想要求：</p><p><img src="https://pic2.zhimg.com/80/v2-3b17505bf0574e12f53b9b6fb7551bb5_720w.jpg" alt="img"></p><h3><a id="1500020000__53"></a>预算：15000-20000 元</h3><h3><a id="_55"></a>需求：</h3><ul class="lvl-0"><li class="lvl-2"><p>CPU支持 MKL，架构是x86_64，</p></li><li class="lvl-2"><p>CPU为英特尔 I5,I7,I9</p></li><li class="lvl-2"><p>GPU 为RTX3080TI、RTX3090TI</p></li><li class="lvl-2"><p>内存32GB</p></li><li class="lvl-2"><p>硬盘10T</p></li></ul><p><strong>inter 处理器价格</strong>：</p><table><thead><tr><th>型号</th><th>cpu架构</th><th>京东报价</th></tr></thead><tbody><tr><td>Intel 酷睿 i5 12600K</td><td>Golden Cove</td><td>2029元</td></tr><tr><td>Intel 酷睿 i7 12700K</td><td>Golden Cove</td><td>2929元</td></tr><tr><td>Intel 酷睿 i9 12900K</td><td>Golden Cove</td><td>4649元</td></tr></tbody></table><p><strong>GPU价格</strong>：</p><table><thead><tr><th>型号</th><th>显存容量</th><th>京东报价</th></tr></thead><tbody><tr><td>英伟达（NVIDIA） RTX3090</td><td>24G</td><td>12999元</td></tr><tr><td>英伟达（NVIDIA） RTX3080</td><td>10G</td><td>8999元</td></tr><tr><td>英伟达（NVIDIA） RTX3070</td><td>8G</td><td>4699元</td></tr><tr><td>英伟达（NVIDIA） RTX3060</td><td>12G</td><td>5499元</td></tr></tbody></table><h6><a id="_82"></a><strong>内存价格：</strong></h6><table><thead><tr><th>型号</th><th>内存容量</th><th>京东报价</th></tr></thead><tbody><tr><td>威刚（ADATA） DDR4 3600 16*2</td><td>32G</td><td>1189元</td></tr><tr><td>金士顿 (Kingston) FURY 32GB DDR4 3200</td><td>32G</td><td>899元</td></tr><tr><td>金士顿 (Kingston) FURY 32GB DDR4 3200               16×2</td><td>32G</td><td>899元</td></tr><tr><td>金士顿 (Kingston) FURY 32GB DDR5 5200               16×2</td><td>32G</td><td>1179元</td></tr><tr><td>光威（Gloway）32GB(16Gx2)套装 DDR4 3200</td><td>32G</td><td>599元</td></tr><tr><td>美商海盗船（USCORSAIR）32GB(16G×2)</td><td>32G</td><td>799元</td></tr></tbody></table><p><strong>机械硬盘价格</strong>：</p><table><thead><tr><th>型号</th><th>容量</th><th>接口</th><th>京东报价</th></tr></thead><tbody><tr><td>西部数据（WD）20T 氦气 WUH722020ALE6L4</td><td>20T</td><td>SATA</td><td>3659元</td></tr><tr><td>西部数据(Western Digital) 10TB  WUS721010ALE6L4</td><td>10T</td><td>SATA</td><td>1759元</td></tr><tr><td>西部数据(Western Digital) 14TB  WUH721414ALE6L4</td><td>14T</td><td>SATA</td><td>1699元</td></tr><tr><td>希捷Seagate   20T【ST20000NM007D】</td><td>20T</td><td>SATA</td><td>4599元</td></tr><tr><td>希捷（SEAGATE）【ST10000NM001G】10TB</td><td>10T</td><td>SATA</td><td>1879元</td></tr><tr><td>希捷（SEAGATE）【ST12000NM000J】12TB</td><td>12T</td><td>SATA</td><td>1899元</td></tr><tr><td>東芝（TOSHIBA）</td><td>18T</td><td>SATA</td><td>2259元</td></tr><tr><td>东芝(TOSHIBA) 10TB</td><td>10T</td><td>SATA</td><td>1499元</td></tr><tr><td>东芝(TOSHIBA) 12TB</td><td>12T</td><td>SATA</td><td>1579元</td></tr><tr><td>西部数据（WD） 4T HUS726T4TALE6L4</td><td>4T</td><td>STAT</td><td>939元</td></tr><tr><td>希捷Seagate     4TB【ST4000DM004】</td><td>4T</td><td>STAT</td><td>549元</td></tr><tr><td>東芝（TOSHIBA）</td><td>4T</td><td>STAT</td><td>479元</td></tr></tbody></table><p><strong>固态硬盘价格：</strong></p><table><thead><tr><th>型号</th><th>容量</th><th>接口</th><th>京东报价</th></tr></thead><tbody><tr><td>金士顿（Kingston）FURY系列  2TB</td><td>2TB</td><td>NVMe</td><td>2199元</td></tr><tr><td>英睿达（Crucial）美光 2TB</td><td>2TB</td><td>NVMe</td><td>949.9元</td></tr><tr><td>铠侠（Kioxia）2000GB</td><td>2TB</td><td>NVMe</td><td>1149元</td></tr><tr><td>西部数据（Western Digital）2T</td><td>2TB</td><td>NVMe</td><td>1459元</td></tr><tr><td>致态（ZhiTai）长江存储 2TB</td><td>2TB</td><td>NVMe</td><td>1299元</td></tr><tr><td>七彩虹(Colorful) 2TB</td><td>2TB</td><td>NVMe</td><td>999元</td></tr><tr><td>三星（SAMSUNG）2TB</td><td>2TB</td><td>NVMe</td><td>2399元</td></tr><tr><td>海康威视（HIKVISION）2TB</td><td>2TB</td><td>NVMe</td><td>1049元</td></tr><tr><td>闪迪（SanDisk） 2TB</td><td>2TB</td><td>NVMe</td><td>1399元</td></tr><tr><td>美商海盗船（USCORSAIR） 2TB</td><td>2TB</td><td>NVMe</td><td>1399元</td></tr></tbody></table><h6><a id="__127"></a>核心硬件价格总计 ：</h6><ul class="lvl-0"><li class="lvl-2"><h6><a id="Intel__i9_12900K____NVIDIA_RTX3080____Kingston_FURY_32GB_DDR4_3200__Western_Digital_10TB___4649____8999___899__1759_16306__129"></a>Intel 酷睿 i9 12900K  +  英伟达（NVIDIA） RTX3080  + 金士顿 (Kingston) FURY 32GB DDR4 3200 + 西部数据(Western Digital) 10TB  = 4649 +   8999  + 899 + 1759 =16306 元</h6></li><li class="lvl-2"><p>Intel 酷睿 i9 12900K  +  英伟达（NVIDIA） RTX3080  + 金士顿 (Kingston) FURY 32GB DDR4 3200 + 金士顿（Kingston）FURY系列  2TB x 2  = 4649 +   8999  + 899 + 2199 X 2 = 18945 元</p></li></ul><h3><a id="_139"></a></h3>]]></content>
    
    
    <summary type="html">机器学习入门</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="机器学习" scheme="https://rm-rf.ink/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="ocr" scheme="https://rm-rf.ink/tags/ocr/"/>
    
    <category term="人工智能" scheme="https://rm-rf.ink/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>鲁迅先生写道: 父母存在的意义</title>
    <link href="https://rm-rf.ink/*/2375039249.html"/>
    <id>https://rm-rf.ink/*/2375039249.html</id>
    <published>2022-04-08T09:48:15.000Z</published>
    <updated>2024-01-10T12:52:43.681Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><blockquote><p><strong>鲁迅先生写父母存在的意义是：</strong><br>父母存在的意义不是给予孩子舒适和富裕的生活，而是当你想到你的父母时你的内心就会充满力量，会感受到温暖，从而拥有克服困难的勇气和能力，因此获得人生真正的乐趣和自由。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="生活" scheme="https://rm-rf.ink/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="鲁迅先生" scheme="https://rm-rf.ink/tags/%E9%B2%81%E8%BF%85%E5%85%88%E7%94%9F/"/>
    
    <category term="父母" scheme="https://rm-rf.ink/tags/%E7%88%B6%E6%AF%8D/"/>
    
  </entry>
  
  <entry>
    <title>基于k8s&#92;traefik&#92;springboot的微服务实践</title>
    <link href="https://rm-rf.ink/*/3382022550.html"/>
    <id>https://rm-rf.ink/*/3382022550.html</id>
    <published>2020-11-24T06:46:04.000Z</published>
    <updated>2024-01-10T12:52:37.925Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script>]]></content>
    
    
    <summary type="html">基于k8s&#92;traefik&#92;springboot的微服务实践</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="k8s" scheme="https://rm-rf.ink/tags/k8s/"/>
    
    <category term="docker" scheme="https://rm-rf.ink/tags/docker/"/>
    
    <category term="容器技术" scheme="https://rm-rf.ink/tags/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"/>
    
    <category term="traefik2" scheme="https://rm-rf.ink/tags/traefik2/"/>
    
    <category term="springboot" scheme="https://rm-rf.ink/tags/springboot/"/>
    
  </entry>
  
  <entry>
    <title>k8s 1.19.2 部署 traefik 2.2</title>
    <link href="https://rm-rf.ink/*/3724466435.html"/>
    <id>https://rm-rf.ink/*/3724466435.html</id>
    <published>2020-11-13T03:05:00.000Z</published>
    <updated>2024-01-10T12:52:15.708Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p><strong>系统环境：</strong></p><span id="more"></span><ul class="lvl-0"><li class="lvl-2"><p>Traefik 版本：v2.2</p></li><li class="lvl-2"><p>Kubernetes 版本：1.19.2</p></li></ul><p><strong>地址：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>Traefik 2.2 官方文档：<a href="https://doc.traefik.io/traefik/v2.2/">https://doc.traefik.io/traefik/v2.2/</a></p></li></ul><h2><a id="Traefik__12"></a>一、Traefik 简介</h2><p>Traefik 最新推出了 v2.2 版本，这里将 Traefik 升级到最新版本，简单的介绍了下如何在 Kubernetes 环境下安装 Traefik v2.2</p><h2><a id="Kubernetes__Traefik_16"></a>二、Kubernetes 部署 Traefik</h2><blockquote><p>注意：这里 Traefik 是部署在 Kube-system Namespace 下，使用kustomize部署。</p></blockquote> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-rw-r--r--  1 yqwoe  staff   287 11 23 09:54 cluster-role-binding.yaml</span><br><span class="line">-rw-r--r--  1 yqwoe  staff   736 11 23 09:54 cluster-role.yaml</span><br><span class="line">-rw-r--r--  1 yqwoe  staff  2578 11 23 09:54 config.yaml</span><br><span class="line">-rw-r--r--  1 yqwoe  staff  1110 11 23 09:54 daemon-set.yaml</span><br><span class="line">-rw-r--r--  1 yqwoe  staff  2021 11 23 09:54 ingress-route.yml</span><br><span class="line">-rw-r--r--  1 yqwoe  staff   268 11 23 09:54 kustomization.yaml</span><br><span class="line">-rw-r--r--  1 yqwoe  staff    81 11 23 09:54 service-account.yaml</span><br><span class="line">-rw-r--r--  1 yqwoe  staff   220 11 23 09:54 service.yaml</span><br><span class="line">-rw-r--r--  1 yqwoe  staff   257 11 23 09:54 traefik-dashboard-route.yml</span><br></pre></td></tr></table></figure><p><strong>kustomization.yaml</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">kustomize.config.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Kustomization</span></span><br><span class="line"></span><br><span class="line"><span class="attr">resources:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">cluster-role.yaml</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">cluster-role-binding.yaml</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">service-account.yaml</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">config.yaml</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">daemon-set.yaml</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">service.yaml</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">ingress-route.yaml</span></span><br><span class="line"><span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line"></span><br><span class="line"><span class="attr">commonLabels:</span></span><br><span class="line">  <span class="attr">app:</span> <span class="string">traefik</span></span><br></pre></td></tr></table></figure><h3><a id="1ingressrouteyml_31"></a>1、ingress-route.yml</h3><p>在 traefik v2.1 版本后，开始使用 CRD（Custom Resource Definition）来完成路由配置等，所以需要提前创建 CRD 资源。</p><p><strong>创建 ingress-route.yml 文件</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingressroutes.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">v1alpha1</span></span><br><span class="line">  <span class="attr">names:</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">IngressRoute</span></span><br><span class="line">    <span class="attr">plural:</span> <span class="string">ingressroutes</span></span><br><span class="line">    <span class="attr">singular:</span> <span class="string">ingressroute</span></span><br><span class="line">  <span class="attr">scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">middlewares.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">v1alpha1</span></span><br><span class="line">  <span class="attr">names:</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">Middleware</span></span><br><span class="line">    <span class="attr">plural:</span> <span class="string">middlewares</span></span><br><span class="line">    <span class="attr">singular:</span> <span class="string">middleware</span></span><br><span class="line">  <span class="attr">scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingressroutetcps.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">v1alpha1</span></span><br><span class="line">  <span class="attr">names:</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">IngressRouteTCP</span></span><br><span class="line">    <span class="attr">plural:</span> <span class="string">ingressroutetcps</span></span><br><span class="line">    <span class="attr">singular:</span> <span class="string">ingressroutetcp</span></span><br><span class="line">  <span class="attr">scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingressrouteudps.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">v1alpha1</span></span><br><span class="line">  <span class="attr">names:</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">IngressRouteUDP</span></span><br><span class="line">    <span class="attr">plural:</span> <span class="string">ingressrouteudps</span></span><br><span class="line">    <span class="attr">singular:</span> <span class="string">ingressrouteudp</span></span><br><span class="line">  <span class="attr">scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tlsoptions.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">v1alpha1</span></span><br><span class="line">  <span class="attr">names:</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">TLSOption</span></span><br><span class="line">    <span class="attr">plural:</span> <span class="string">tlsoptions</span></span><br><span class="line">    <span class="attr">singular:</span> <span class="string">tlsoption</span></span><br><span class="line">  <span class="attr">scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tlsstores.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">v1alpha1</span></span><br><span class="line">  <span class="attr">names:</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">TLSStore</span></span><br><span class="line">    <span class="attr">plural:</span> <span class="string">tlsstores</span></span><br><span class="line">    <span class="attr">singular:</span> <span class="string">tlsstore</span></span><br><span class="line">  <span class="attr">scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefikservices.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">v1alpha1</span></span><br><span class="line">  <span class="attr">names:</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">TraefikService</span></span><br><span class="line">    <span class="attr">plural:</span> <span class="string">traefikservices</span></span><br><span class="line">    <span class="attr">singular:</span> <span class="string">traefikservice</span></span><br><span class="line">  <span class="attr">scope:</span> <span class="string">Namespaced</span></span><br></pre></td></tr></table></figure><h3><a id="2_RBAC__39"></a>2、创建 RBAC 权限</h3><p>Kubernetes 在 1.6 版本中引入了基于角色的访问控制（RBAC）策略，方便对 Kubernetes 资源和 API 进行细粒度控制。Traefik 需要一定的权限，所以这里提前创建好 Traefik ServiceAccount 并分配一定的权限。</p><p><strong>创建 service-account.yaml 文件</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefik-ingress-controller</span></span><br></pre></td></tr></table></figure><p><strong>创建cluster-role.yaml</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">services</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">endpoints</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">secrets</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">extensions</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingresses</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">extensions</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingresses/status</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">update</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">traefik.containo.us</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">middlewares</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingressroutes</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">traefikservices</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingressroutetcps</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingressrouteudps</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">tlsoptions</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">tlsstores</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br></pre></td></tr></table></figure><p><strong>创建cluster-role-binding.yaml</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefik-ingress-controller</span></span><br></pre></td></tr></table></figure><h3><a id="3_Traefik__59"></a>3、创建 Traefik 配置文件</h3><p>由于 Traefik 配置很多，通过 CLI 定义不是很方便，一般时候选择将其配置选项放到配置文件中，然后存入 ConfigMap，将其挂入 traefik 中。</p><p><strong>创建 config.yaml 文件</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefik-config</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">traefik.yaml:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">    ping: &quot;&quot;                    ## 启用 Ping</span></span><br><span class="line"><span class="string">    serversTransport:</span></span><br><span class="line"><span class="string">      insecureSkipVerify: true  ## Traefik 忽略验证代理服务的 TLS 证书</span></span><br><span class="line"><span class="string">    api:</span></span><br><span class="line"><span class="string">      insecure: true            ## 允许 HTTP 方式访问 API</span></span><br><span class="line"><span class="string">      dashboard: true           ## 启用 Dashboard</span></span><br><span class="line"><span class="string">      debug: false              ## 启用 Debug 调试模式</span></span><br><span class="line"><span class="string">    metrics:</span></span><br><span class="line"><span class="string">      prometheus: &quot;&quot;            ## 配置 Prometheus 监控指标数据，并使用默认配置</span></span><br><span class="line"><span class="string">    entryPoints:</span></span><br><span class="line"><span class="string">      web:</span></span><br><span class="line"><span class="string">        address: &quot;:80&quot;          ## 配置 80 端口，并设置入口名称为 web</span></span><br><span class="line"><span class="string">      websecure:</span></span><br><span class="line"><span class="string">        address: &quot;:443&quot;         ## 配置 443 端口，并设置入口名称为 websecure</span></span><br><span class="line"><span class="string">    providers:</span></span><br><span class="line"><span class="string">      kubernetesCRD: &quot;&quot;         ## 启用 Kubernetes CRD 方式来配置路由规则</span></span><br><span class="line"><span class="string">      kubernetesIngress: &quot;&quot;     ## 启动 Kubernetes Ingress 方式来配置路由规则</span></span><br><span class="line"><span class="string">    log:</span></span><br><span class="line"><span class="string">      filePath: &quot;&quot;              ## 设置调试日志文件存储路径，如果为空则输出到控制台</span></span><br><span class="line"><span class="string">      level: error              ## 设置调试日志级别</span></span><br><span class="line"><span class="string">      format: json              ## 设置调试日志格式</span></span><br><span class="line"><span class="string">    accessLog:</span></span><br><span class="line"><span class="string">      filePath: &quot;&quot;              ## 设置访问日志文件存储路径，如果为空则输出到控制台</span></span><br><span class="line"><span class="string">      format: json              ## 设置访问调试日志格式</span></span><br><span class="line"><span class="string">      bufferingSize: 0          ## 设置访问日志缓存行数</span></span><br><span class="line"><span class="string">      filters:</span></span><br><span class="line"><span class="string">        #statusCodes: [&quot;200&quot;]   ## 设置只保留指定状态码范围内的访问日志</span></span><br><span class="line"><span class="string">        retryAttempts: true     ## 设置代理访问重试失败时，保留访问日志</span></span><br><span class="line"><span class="string">        minDuration: 20         ## 设置保留请求时间超过指定持续时间的访问日志</span></span><br><span class="line"><span class="string">      fields:                   ## 设置访问日志中的字段是否保留（keep 保留、drop 不保留）</span></span><br><span class="line"><span class="string">        defaultMode: keep       ## 设置默认保留访问日志字段</span></span><br><span class="line"><span class="string">        names:                  ## 针对访问日志特别字段特别配置保留模式</span></span><br><span class="line"><span class="string">          ClientUsername: drop</span></span><br><span class="line"><span class="string">        headers:                ## 设置 Header 中字段是否保留</span></span><br><span class="line"><span class="string">          defaultMode: keep     ## 设置默认保留 Header 中字段</span></span><br><span class="line"><span class="string">          names:                ## 针对 Header 中特别字段特别配置保留模式</span></span><br><span class="line"><span class="string">            User-Agent: redact</span></span><br><span class="line"><span class="string">            Authorization: drop</span></span><br><span class="line"><span class="string">            Content-Type: keep</span></span><br><span class="line"><span class="string">    certificatesresolvers:</span></span><br><span class="line"><span class="string">      default:</span></span><br><span class="line"><span class="string">        acme:</span></span><br><span class="line"><span class="string">          tlsChallenge: true</span></span><br><span class="line"><span class="string">          email: &quot;yqwoe@live.cn&quot;</span></span><br><span class="line"><span class="string">          storage: &quot;acme.json&quot;</span></span><br><span class="line"><span class="string">          caserver: &quot;https://acme-v02.api.letsencrypt.org/directory&quot;</span></span><br></pre></td></tr></table></figure><h3><a id="4_Label__67"></a>4、节点设置 Label 标签</h3><p>由于是 Kubernetes DeamonSet 这种方式部署 Traefik，所以需要提前给节点设置 Label，这样当程序部署时 Pod 会自动调度到设置 Label 的节点上。</p><p><strong>节点设置 Label 标签</strong></p><ul class="lvl-0"><li class="lvl-2"><p>格式：kubectl label nodes [节点名] [key=value]</p></li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl label nodes minikube IngressProxy=<span class="literal">true</span></span><br></pre></td></tr></table></figure><p><strong>查看节点是否设置 Label 成功</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl get nodes --show-labels</span><br><span class="line"></span><br><span class="line">NAME       STATUS   ROLES    AGE   VERSION   LABELS</span><br><span class="line">minikube   Ready    master   3d    v1.19.2   IngressProxy=<span class="literal">true</span>,beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=minikube,kubernetes.io/os=linux,minikube.k8s.io/commit=b09ee50ec047410326a85435f4d99026f9c4f5c4,minikube.k8s.io/name=minikube,minikube.k8s.io/updated_at=2020_11_10T10_20_51_0700,minikube.k8s.io/version=v1.14.0,node-role.kubernetes.io/master=</span><br></pre></td></tr></table></figure><blockquote><p>如果想删除标签，可以使用 <code>kubectl label nodes minikube IngressProxy-</code> 命令</p></blockquote><h3><a id="5Kubernetes__Traefik_83"></a>5、Kubernetes 部署 Traefik</h3><p>DaemonSet 方式部署，便于在多服务器间扩展，用 hostport 方式占用服务器 80、443 端口，方便流量进入。</p><p><strong>创建 traefik 部署文件 daemon-set.yaml</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">DaemonSet</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefik</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line">      <span class="attr">terminationGracePeriodSeconds:</span> <span class="number">60</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">traefik:v2.2</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">traefik-ingress-lb</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">web</span></span><br><span class="line">          <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">          <span class="attr">hostPort:</span> <span class="number">80</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">websecure</span></span><br><span class="line">          <span class="attr">containerPort:</span> <span class="number">443</span></span><br><span class="line">          <span class="attr">hostPort:</span> <span class="number">443</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">admin</span></span><br><span class="line">          <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">hostPort:</span> <span class="number">8080</span></span><br><span class="line">        <span class="attr">securityContext:</span></span><br><span class="line">          <span class="attr">capabilities:</span></span><br><span class="line">            <span class="attr">drop:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">            <span class="attr">add:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">NET_BIND_SERVICE</span></span><br><span class="line">        <span class="attr">args:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">--configfile=/config/traefik.yaml</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">&quot;/config&quot;</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">&quot;config&quot;</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">          <span class="attr">configMap:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">traefik-config</span></span><br><span class="line">      <span class="attr">tolerations:</span>              <span class="comment">## 设置容忍所有污点，防止节点被设置污点</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">operator:</span> <span class="string">&quot;Exists&quot;</span></span><br><span class="line">      <span class="attr">nodeSelector:</span>             <span class="comment">## 设置node筛选器，在特定label的节点上启动</span></span><br><span class="line">        <span class="attr">IngressProxy:</span> <span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure><p><strong>创建Traefik Service service.yaml</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefik</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">web</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">websecure</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">admin</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">traefik</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span></span><br></pre></td></tr></table></figure><p>至此，traefik的配置基本完成。</p><p><strong>执行 kustomization.yaml</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl apply -k . -n kube-system</span><br></pre></td></tr></table></figure><h2><a id="Traefik__101"></a>三、Traefik 路由规则配置</h2><h3><a id="1_HTTP__Traefik_Dashboard__103"></a>1、配置 HTTP 路由规则 （Traefik Dashboard 为例）</h3><p>Traefik 应用已经部署完成，但是想让外部访问 Kubernetes 内部服务，还需要配置路由规则，这里开启了 Traefik Dashboard 配置，所以首先配置 Traefik Dashboard 看板的路由规则，使外部能够访问 Traefik Dashboard。</p><p><strong>创建 Traefik Dashboard 路由规则文件 traefik-dashboard-route.yaml</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">traefik.containo.us/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">IngressRoute</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">traefik-dashboard-route</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">entryPoints:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">web</span></span><br><span class="line">  <span class="attr">routes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">match:</span> <span class="string">Host(`yqwoe.k8s.com`)</span></span><br><span class="line">      <span class="attr">kind:</span> <span class="string">Rule</span></span><br><span class="line">      <span class="attr">services:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">traefik</span></span><br><span class="line">          <span class="attr">port:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><p><strong>创建 Traefik Dashboard 路由规则对象</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl apply -f traefik-dashboard-route.yaml -n kube-system</span><br></pre></td></tr></table></figure><p><strong>接下来配置 Hosts</strong>，客户端想通过域名访问服务，必须要进行 DNS 解析，由于这里没有 DNS 服务器进行域名解析，所以修改 hosts 文件将 Traefik 指定节点的 IP 和自定义 host 绑定。打开电脑的 Hosts 配置文件，往其加入下面配置：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">192.168.10.2  yqwoe.k8s.com</span><br></pre></td></tr></table></figure><p><strong>配置完成后，打开浏览器输入地址：http://<code>yqwoe.k8s.com</code> 打开 Traefik Dashboard。</strong></p>]]></content>
    
    
    <summary type="html">k8s 1.19.2部署 traefik 2.2</summary>
    
    
    
    <category term="工作" scheme="https://rm-rf.ink/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
    <category term="k8s" scheme="https://rm-rf.ink/tags/k8s/"/>
    
    <category term="docker" scheme="https://rm-rf.ink/tags/docker/"/>
    
    <category term="容器技术" scheme="https://rm-rf.ink/tags/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"/>
    
    <category term="traefik2" scheme="https://rm-rf.ink/tags/traefik2/"/>
    
  </entry>
  
</feed>
