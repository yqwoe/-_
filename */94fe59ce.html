<!DOCTYPE html><html><head><meta charset="utf-8"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://v2.jinrishici.com"><link rel="dns-prefetch" href="https://example.com"><link rel="dns-prefetch" href="http://acme.sh"><link rel="dns-prefetch" href="https://get.acme.sh"><link rel="dns-prefetch" href="https://ruby-china.org"><link rel="dns-prefetch" href="https://pic3.zhimg.com"><link rel="dns-prefetch" href="https://pic2.zhimg.com"><link rel="dns-prefetch" href="https://dl.gogs.io"><link rel="dns-prefetch" href="http://www.example.com"><link rel="dns-prefetch" href="https://blog.csdn.net"><link rel="dns-prefetch" href="http://maven.apache.org"><link rel="dns-prefetch" href="http://www.w3.org"><link rel="dns-prefetch" href="https://nexus.corebrew.net"><link rel="dns-prefetch" href="http://maven.aliyun.com"><link rel="dns-prefetch" href="https://user-images.githubusercontent.com"><link rel="dns-prefetch" href="https://github.com"><link rel="dns-prefetch" href="http://cas.simple.org:8443"><link rel="dns-prefetch" href="http://npm.taobao.org"><link rel="dns-prefetch" href="https://baike.pcbaby.com.cn"><link rel="dns-prefetch" href="https://segmentfault.com"><link rel="dns-prefetch" href="https://map.baidu.com"><link rel="dns-prefetch" href="http://mybatis.org"><link rel="dns-prefetch" href="https://doc.traefik.io"><link rel="dns-prefetch" href="https://acme-v02.api.letsencrypt.org"><link rel="dns-prefetch" href="http://server.51cto.com"><link rel="dns-prefetch" href="https://www.cnblogs.com"><link rel="dns-prefetch" href="http://dl.stream.qqmusic.qq.com"><link rel="dns-prefetch" href="https://imsun.github.io"><link rel="dns-prefetch" href="https://www.jekyll.com.cn"><link rel="dns-prefetch" href="https://yqwoe.space"><link rel="dns-prefetch" href="https://rogeralmeida.github.io"><link rel="dns-prefetch" href="https://developer.mozilla.org"><link rel="dns-prefetch" href="https://dev.mysql.com"><link rel="dns-prefetch" href="https://zhuanlan.zhihu.com"><link rel="dns-prefetch" href="http://aplayer.js.org"><link rel="dns-prefetch" href="https://api.i-meto.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="dns-prefetch" href="http://www.gnu.org"><link rel="dns-prefetch" href="http://www.eclipse.org"><link rel="dns-prefetch" href="http://engelschall.com"><link rel="dns-prefetch" href="http://opensource.org"><link rel="dns-prefetch" href="http://en.wikipedia.org"><link rel="dns-prefetch" href="http://svgjs.com"><link rel="dns-prefetch" href="http://www.codebase.es"><link rel="dns-prefetch" href="http://stuartk.com"><link rel="dns-prefetch" href="https://raw.github.com"><link rel="dns-prefetch" href="https://MuazKhan.com"><link rel="dns-prefetch" href="https://gist.github.com"><link rel="dns-prefetch" href="http://goo.gl"><link rel="dns-prefetch" href="https://www.webrtc-experiment.com"><link rel="dns-prefetch" href="https://w3c.github.io"><link rel="dns-prefetch" href="http://typedarray.org"><link rel="dns-prefetch" href="http://stackoverflow.com"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="dns-prefetch" href="https://stackoverflow.com"><link rel="dns-prefetch" href="https://revealjs.com"><link rel="dns-prefetch" href="https://static.slid.es"><link rel="dns-prefetch" href="http://hakim.se"><link rel="dns-prefetch" href="https://slides.com"><link rel="dns-prefetch" href="https://highlightjs.org"><link rel="dns-prefetch" href="http://lab.hakim.se"><link rel="dns-prefetch" href="http://i.giphy.com"><link rel="dns-prefetch" href="https://hakim.se"><link rel="dns-prefetch" href="http://searchservervirtualization.techtarget.com"><link rel="dns-prefetch" href="https://www.slideshare.net"><link rel="dns-prefetch" href="http://meyerweb.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="http://github.com"><link rel="dns-prefetch" href="https://draculatheme.com"><link rel="dns-prefetch" href="http://owenversteeg.com"><link rel="dns-prefetch" href="https://css-tricks.com"><link rel="dns-prefetch" href="http://fullscreen.spec.whatwg.org"><link rel="dns-prefetch" href="http://grigio.org"><link rel="dns-prefetch" href="https://marked.js.org"><link rel="dns-prefetch" href="https://aaronsmith.online"><link rel="dns-prefetch" href="http://www.sketchdock.com"><link rel="dns-prefetch" href="http://www.apache.org"><link rel="dns-prefetch" href="https://jestjs.io"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com"><title>rust入门 | rm -rf /*</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="mask-icon" href="{{ url_for(theme.favicon.safari_pinned_tab) }}" color="{{ theme.android_chrome_color }}"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/search.css"><link rel="stylesheet" href="/css/katex.min.css"><link rel="stylesheet" href="/css/googleapis.css"><link rel="stylesheet" href="/css/highlight.css"><meta name="description" content="Cargo是什么？ Cargo是rust的构建工具、包管理器；  crate是什么？   crate类似npm package或ruby gem，类似依赖包的意思；  rust和动态语言对比  rust库  std io标准库  let声明变量 let apples &#x3D; 5; &#x2F;&#x2F; 不可变let mut bananas &#x3D; 5; &#x2F;&#x2F; 可变  整型    长度 有符号 无符号     8-bit"><meta property="og:type" content="article"><meta property="og:title" content="rust入门"><meta property="og:url" content="https://rm-rf.ink/*/94fe59ce.html"><meta property="og:site_name" content="rm -rf &#x2F;*"><meta property="og:description" content="Cargo是什么？ Cargo是rust的构建工具、包管理器；  crate是什么？   crate类似npm package或ruby gem，类似依赖包的意思；  rust和动态语言对比  rust库  std io标准库  let声明变量 let apples &#x3D; 5; &#x2F;&#x2F; 不可变let mut bananas &#x3D; 5; &#x2F;&#x2F; 可变  整型    长度 有符号 无符号     8-bit"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2024-03-11T01:30:48.000Z"><meta property="article:modified_time" content="2024-03-13T08:53:31.213Z"><meta property="article:author" content="Yq Woe"><meta property="article:tag" content="cargo"><meta property="article:tag" content="rustc"><meta property="article:tag" content="rustup"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/reveal.css"><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="rm -rf /*" type="application/atom+xml">
</head><body><div id="wrapper"><header id="header"><div class="poem-wrap"><div class="poem-border poem-left"></div><div class="poem-border poem-right"></div><h1><a href="/">rm -rf /*</a></h1><p id="poem">加载中...</p><p id="info"></div><nav><a class="nav-link" href="/">首页</a> <span class="nav-spacer">x</span> <a class="nav-link" href="/categories">分类</a> <span class="nav-spacer">x</span> <a class="nav-link" href="/tags">标签</a> <span class="nav-spacer">x</span> <a class="nav-link" href="/about">关于</a></nav></header><div id="content"><article id="post-rust入门" class="article article-type-post" itemprop="blogPost" itemscope><div class="article-inner"><header class="article-header"><h2 class="article-title" itemprop="headline name">rust入门</h2><div class="article-meta"><time class="article-date" datetime="2024-03-11T01:30:48.000Z" itemprop="datePublished">2024.03.11 09:30 上午</time></div></header><div class="article-entry" itemprop="articleBody"><h1 id="cargo是什么"><a class="markdownIt-Anchor" href="#cargo是什么"></a> Cargo是什么？</h1><p><code>Cargo</code>是rust的构建工具、包管理器；</p><h3 id="crate是什么"><a class="markdownIt-Anchor" href="#crate是什么"></a> crate是什么？</h3><p>  crate类似npm package或ruby gem，类似<code>依赖包</code>的意思；</p><h1 id="rust和动态语言对比"><a class="markdownIt-Anchor" href="#rust和动态语言对比"></a> rust和动态语言对比</h1><h1 id="rust库"><a class="markdownIt-Anchor" href="#rust库"></a> rust库</h1><h3 id="std-io标准库"><a class="markdownIt-Anchor" href="#std-io标准库"></a> std io标准库</h3><h3 id="let声明变量"><a class="markdownIt-Anchor" href="#let声明变量"></a> let声明变量</h3><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">apples</span> = <span class="number">5</span>; <span class="comment">// 不可变</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">bananas</span> = <span class="number">5</span>; <span class="comment">// 可变</span></span><br></pre></td></tr></table></figure><h3 id="整型"><a class="markdownIt-Anchor" href="#整型"></a> 整型</h3><table><thead><tr><th>长度</th><th>有符号</th><th>无符号</th></tr></thead><tbody><tr><td>8-bit</td><td>i8</td><td>U8</td></tr><tr><td>16-bit</td><td>i16</td><td>u16</td></tr><tr><td>32-bit</td><td>i32</td><td>u32</td></tr><tr><td>64-bit</td><td>i64</td><td>U64</td></tr><tr><td>128-bit</td><td>i128</td><td>u128</td></tr><tr><td>arch（由CPU架构决定大小 x86为32位，x64为64位）</td><td>isize</td><td>Usize</td></tr></tbody></table><table><thead><tr><th>数字字面值</th><th>例子</th></tr></thead><tbody><tr><td>Decimal(十进制)</td><td>98_222</td></tr><tr><td>Hex(十六进制)</td><td>0xff</td></tr><tr><td>Octal(八进制)</td><td>0o77</td></tr><tr><td>Binary(二进制)</td><td>0b1111_0000</td></tr><tr><td>Byte(单字节字符)(仅限于u8)</td><td>b’A’</td></tr></tbody></table><h3 id="浮点型"><a class="markdownIt-Anchor" href="#浮点型"></a> 浮点型</h3><p>Rust的浮点数类型是 <code>f32</code>和<code>f64</code>,分别占32位和64位，默认类型是<code>f64</code></p><p>浮点数采用 IEEE-754 标准表示。<code>f32</code> 是单精度浮点数，<code>f64</code> 是双精度浮点数。</p><h3 id="布尔型"><a class="markdownIt-Anchor" href="#布尔型"></a> 布尔型</h3><p>Rust的布尔类型有两个值: <code>true</code>和<code>false</code>,使用 <code>bool</code>表示；</p><h3 id="字符类型"><a class="markdownIt-Anchor" href="#字符类型"></a> 字符类型</h3><p>Rust的 <code>char</code>类型是语言中原生的字符类型；使用 <code>''</code>声明字符类型，字符串使用 <code>&quot;&quot;</code>声明；</p><h3 id="复合类型"><a class="markdownIt-Anchor" href="#复合类型"></a> 复合类型</h3><p>Rust有两个原生复合类型: 元组（tuple）和数组 （array）</p><h4 id="元组-tuple"><a class="markdownIt-Anchor" href="#元组-tuple"></a> 元组 Tuple</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span>: (<span class="type">i32</span>, <span class="type">f64</span>, <span class="type">u8</span>) = (<span class="number">500</span>, <span class="number">6.4</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">five_hundred</span> = x.<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">six_point_four</span> = x.<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">one</span> = x.<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="数组-array"><a class="markdownIt-Anchor" href="#数组-array"></a> 数组 Array</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span>: [<span class="type">i32</span>; <span class="number">5</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">first</span> = a[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">end</span> = a[<span class="number">4</span>];</span><br></pre></td></tr></table></figure><h3 id="fn-main"><a class="markdownIt-Anchor" href="#fn-main"></a> fn、main</h3><p><code>fn</code>用于声明函数，<code>main</code>函数为程序入口；</p><p>在函数声明中，必须声明每个参数的类型。</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>()&#123;</span><br><span class="line">	<span class="title function_ invoke__">print_labeled_measurement</span>(<span class="number">5</span>,<span class="string">&#x27;h&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">print_labeled_measurement</span>(value: <span class="type">i32</span>,unit_label: <span class="type">char</span>)&#123;</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;The measurement is: &#123;value&#125;&#123;unit_label&#125;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">five</span>() <span class="punctuation">-&gt;</span> <span class="type">i32</span>&#123;</span><br><span class="line">  <span class="number">5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>语句和表达式的区别,语句需要<code>;</code>修饰，表达式不需要。</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="title function_ invoke__">plus_one</span>(<span class="number">5</span>); <span class="comment">//语句</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;x&#125;&quot;</span>); <span class="comment">//语句</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">plus_one</span>(x: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    x + <span class="number">1</span> <span class="comment">//表达式</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="练习-斐波那契数列"><a class="markdownIt-Anchor" href="#练习-斐波那契数列"></a> <strong>练习-斐波那契数列</strong></h5><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="title function_ invoke__">fibonacci</span>(<span class="number">22</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">fibonacci</span>(n: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    <span class="keyword">match</span> n &#123;</span><br><span class="line">        <span class="number">0</span> =&gt; <span class="number">0</span>,</span><br><span class="line">        <span class="number">1</span> =&gt;<span class="number">1</span>,</span><br><span class="line">        <span class="number">2</span> =&gt; <span class="number">1</span>,</span><br><span class="line">        _ =&gt; <span class="title function_ invoke__">fibonacci</span>(n-<span class="number">1</span>) + <span class="title function_ invoke__">fibonacci</span>(n-<span class="number">2</span>),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="注释"><a class="markdownIt-Anchor" href="#注释"></a> 注释</h3><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">//这是第一行注释</span></span><br><span class="line"><span class="comment">//这是第二行注释</span></span><br><span class="line"><span class="comment">//这是第三行注释</span></span><br></pre></td></tr></table></figure><h4 id="文档注释"><a class="markdownIt-Anchor" href="#文档注释"></a> 文档注释</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">///这是第一行注释</span></span><br><span class="line"><span class="comment">///这是第二行注释</span></span><br><span class="line"><span class="comment">///这是第三行注释</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//! #这是第一行注释</span></span><br><span class="line"><span class="comment">//!</span></span><br><span class="line"><span class="comment">//! ###这是第三行注释</span></span><br></pre></td></tr></table></figure><h3 id="if表达式"><a class="markdownIt-Anchor" href="#if表达式"></a> if表达式</h3><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>()&#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="variable">number</span> = <span class="number">3</span>;</span><br><span class="line">  <span class="keyword">if</span> number &lt; <span class="number">3</span> &#123;</span><br><span class="line">    printlin!(<span class="string">&quot;Number is less than 3 &quot;</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">     printlin!(<span class="string">&quot;Number is greater than or equal to 3 &quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="在let语句中使用if-else"><a class="markdownIt-Anchor" href="#在let语句中使用if-else"></a> 在let语句中使用if else</h4><p>提示: if else的分支类型要匹配，否则会提示编译错误</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>()&#123;</span><br><span class="line">	<span class="keyword">let</span> <span class="variable">number</span> = <span class="number">3</span>;</span><br><span class="line">	<span class="keyword">let</span> <span class="variable">result</span> = <span class="keyword">if</span> number &gt;= <span class="number">3</span> &#123; <span class="number">10</span> &#125; <span class="keyword">else</span> &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="built_in">println!</span>(<span class="string">&quot;The value of number is: &#123;result&#125;&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="loop循环"><a class="markdownIt-Anchor" href="#loop循环"></a> loop循环</h3><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut  </span><span class="variable">count</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="symbol">&#x27;counting_up</span>: <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;count = &#123;count&#125;&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">remaining</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">loop</span>&#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;remaining = &#123;remaining&#125;&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> remaining == <span class="number">9</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> count == <span class="number">2</span>&#123;</span><br><span class="line">                <span class="keyword">break</span> <span class="symbol">&#x27;counting_up</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            remaining -= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        count += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;End count = &#123;count&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="while循环"><a class="markdownIt-Anchor" href="#while循环"></a> while循环</h3><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>()&#123;</span><br><span class="line">	<span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">number</span> = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> number != <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;number&#125;&quot;</span>);</span><br><span class="line">        number -= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;End&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="for循环"><a class="markdownIt-Anchor" href="#for循环"></a> for循环</h3><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>()&#123;</span><br><span class="line">		<span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> <span class="variable">element</span> <span class="keyword">in</span> a &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;the value is: &#123;element&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="match-分支"><a class="markdownIt-Anchor" href="#match-分支"></a> match 分支</h3><p>用于分支判断，类似其他语言的switch(condition){}</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">guess</span>: <span class="type">u32</span> = <span class="keyword">match</span> guess.<span class="title function_ invoke__">trim</span>().<span class="title function_ invoke__">parse</span>() &#123;</span><br><span class="line">            <span class="title function_ invoke__">Ok</span>(num) =&gt; num,</span><br><span class="line">            <span class="title function_ invoke__">Err</span>(_) =&gt; <span class="keyword">continue</span>,</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure><h3 id="const-常量"><a class="markdownIt-Anchor" href="#const-常量"></a> const 常量</h3><p>常量和其他语言类似，约定大写+<code>_</code>命名</p><h3 id="所有权ownership"><a class="markdownIt-Anchor" href="#所有权ownership"></a> 所有权(ownership)</h3><ul class="lvl-0"><li class="lvl-2"><p>堆: 先进先出；</p></li><li class="lvl-2"><p>栈: 先进后出；</p></li></ul><h4 id="所有权规则"><a class="markdownIt-Anchor" href="#所有权规则"></a> 所有权规则</h4><ul class="lvl-0"><li class="lvl-2"><p>rust 中的每一个值都有一个 <code>owner</code>；</p></li><li class="lvl-2"><p>值在任一时刻有且只有一个<code>owner</code>；</p></li><li class="lvl-2"><p>当<code>owner</code>离开作用域，这个值将被丢弃；</p></li></ul><h4 id="变量作用域"><a class="markdownIt-Anchor" href="#变量作用域"></a> 变量作用域</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">&#123;                      <span class="comment">// s 在这里无效，它尚未声明</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">s</span> = <span class="string">&quot;hello&quot;</span>;   <span class="comment">// 从此处起，s 是有效的</span></span><br><span class="line">        <span class="comment">// 使用 s</span></span><br><span class="line"> &#125;                      <span class="comment">// 此作用域已结束，s 不再有效</span></span><br></pre></td></tr></table></figure><h3 id="string-类型"><a class="markdownIt-Anchor" href="#string-类型"></a> String 类型</h3><blockquote><p>如果你在其他语言中听说过术语 <strong>浅拷贝</strong>（<em>shallow copy</em>）和 <strong>深拷贝</strong>（<em>deep copy</em>），那么拷贝指针、长度和容量而不拷贝数据可能听起来像浅拷贝。不过因为 Rust 同时使第一个变量无效了，这个操作被称为 <strong>移动</strong>（<em>move</em>），而不是叫做浅拷贝。上面的例子可以解读为 <code>s1</code> 被 <strong>移动</strong> 到了 <code>s2</code> 中。</p></blockquote><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s2</span> = s1;</span><br><span class="line">  		<span class="comment">//-- value moved here</span></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;s1&#125;&quot;</span>);</span><br><span class="line">				<span class="comment">//^^^^ value borrowed here after move</span></span><br></pre></td></tr></table></figure><h3 id="copy类型"><a class="markdownIt-Anchor" href="#copy类型"></a> <code>Copy</code>类型</h3><ul class="lvl-0"><li class="lvl-2"><p>所有整数类型，比如 <code>u32</code>。</p></li><li class="lvl-2"><p>布尔类型，<code>bool</code>，它的值是 <code>true</code> 和 <code>false</code>。</p></li><li class="lvl-2"><p>所有浮点数类型，比如 <code>f64</code>。</p></li><li class="lvl-2"><p>字符类型，<code>char</code>。</p></li><li class="lvl-2"><p>元组，当且仅当其包含的类型也都实现 <code>Copy</code> 的时候。比如，<code>(i32, i32)</code> 实现了 <code>Copy</code>，但 <code>(i32, String)</code> 就没有。</p></li></ul><h3 id="引用references与借用"><a class="markdownIt-Anchor" href="#引用references与借用"></a> 引用（References）与借用</h3><p><code>&amp;</code>语法让我们创建一个指向的引用，但并不拥有。</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">len</span> = <span class="title function_ invoke__">calculate_length</span>(&amp;s1);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The length of &#x27;&#123;&#125;&#x27; is &#123;&#125;.&quot;</span>, s1, len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">calculate_length</span>(s: &amp;<span class="type">String</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">    s.<span class="title function_ invoke__">len</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>&amp; mut</code> 可变引用，可修改应用的值；</p><p>限制:</p><ul class="lvl-0"><li class="lvl-2"><p>在任意给定时间，<strong>要么</strong> 只能有一个可变引用，<strong>要么</strong> 只能有多个不可变引用。</p></li><li class="lvl-2"><p>引用必须总是有效的。</p></li></ul><p><strong>数据竞争</strong>（<em>data race</em>）类似于竞态条件，它可由这三个行为造成：</p><ul class="lvl-0"><li class="lvl-2"><p>两个或更多指针同时访问同一数据。</p></li><li class="lvl-2"><p>至少有一个指针被用来写入数据。</p></li><li class="lvl-2"><p>没有同步数据访问的机制。</p></li></ul><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">change</span>(&amp;<span class="keyword">mut</span> s1);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The length of &#x27;&#123;&#125;&#x27; is &#123;&#125;.&quot;</span>, s1, s1.<span class="title function_ invoke__">len</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">change</span>(s: &amp;<span class="keyword">mut</span> <span class="type">String</span>)&#123;</span><br><span class="line">    s.<span class="title function_ invoke__">push_str</span>(<span class="string">&quot;, world!!!!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="slice类型"><a class="markdownIt-Anchor" href="#slice类型"></a> Slice类型</h3><blockquote><p><em>slice</em> 允许你引用集合中一段连续的元素序列，而不用引用整个集合。slice 是一种引用，所以它没有所有权。</p></blockquote></div><div class="article-category"><a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a> <b>&nbsp;:分类</b><br><a class="article-tag-none-link" href="/tags/cargo/" rel="tag">cargo</a>, <a class="article-tag-none-link" href="/tags/rustc/" rel="tag">rustc</a>, <a class="article-tag-none-link" href="/tags/rustup/" rel="tag">rustup</a> <b>&nbsp;:标签</b></div></div></article><nav id="article-nav" class="article-nav"><a href="/*/e0d5ed17.html" id="article-nav-newer" class="article-nav-link-wrap newer"><strong class="article-nav-caption">上一篇</strong><div class="article-nav-title">rust-结构定义和实例化</div></a><a href="/*/e4b8a22b.html" id="article-nav-older" class="article-nav-link-wrap older"><strong class="article-nav-caption">下一篇</strong><div class="article-nav-title">Transformer模型</div></a></nav><div id="gitalk-container" style="padding:0 30px 0 30px"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"d99a4bdc344cff33585d",clientSecret:"4819ca8aa103e688f259b5ed6b3cd3fffdf0f96e",repo:"yqwoe.github.io",owner:"yqwoe",admin:["yqwoe"],perPage:20,id:"94fe59ce",distractionFreeMode:"true",pagerDirection:"last"});gitalk.render("gitalk-container")</script></div></div><div id="settings-container"><div id="dark-mode"></div><div id="sans-font"></div></div><span class="post-count">26.1k</span><script type="text/javascript">let d=document,r=d.documentElement.style,f=r.setProperty.bind(r),l=localStorage,s=l.getItem("s")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=l.getItem("n"),m=d.getElementById("dark-mode"),b=()=>{f("--bg-color","#fafafa"),f("--code-bg-color","#f4f4f4"),f("--text-color","#212121"),f("--secondary-color","#808080"),f("--tertiary-color","#b0b0b0"),f("--link-color","#b5c8cf"),f("--link-hover-color","#618794"),f("--link-bg-color","#dae4e7"),f("--selection-color","#dae4e7")},c=()=>{f("--bg-color","#212121"),f("--code-bg-color","#292929"),f("--text-color","#fff"),f("--secondary-color","#c0c0c0"),f("--tertiary-color","#6e6e6e"),f("--link-color","#4d6b75"),f("--link-hover-color","#96b1bb"),f("--link-bg-color","#5d828e"),f("--selection-color","#acc1c9")},o=d.getElementById("sans-font"),e=()=>{f("--body-stack",'"Lora", "Georgia", "Times New Roman", serif')},g=()=>{f("--body-stack",'"Lato", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "Verdana", sans-serif')};m.onclick=function(){2==s?(s=1,l.setItem("s",s),c()):(s=2,l.setItem("s",s),b())},o.onclick=function(){2==n?(n=1,l.setItem("n",n),g()):(n=2,l.setItem("n",n),e())},(s||"1"==s)&&(s=1,l.setItem("s",s),c()),s&&"2"!=s||(s=2,l.setItem("s",s),b()),n||(n=2,l.setItem("n",2)),"1"==n&&g(),"2"==n&&e()</script><script type="module">import mermaid from"https://cdn.jsdelivr.net/npm/mermaid@9.4.3/+esm";let theme=localStorage.getItem("s");mermaid.initialize({startOnLoad:!0,logLevel:"debug",theme:"2"===theme?"forest":"dark"});let mode=document.getElementById("dark-mode"),arrayGraphs=[],nodes=document.getElementsByClassName("mermaid");for(let e of nodes)console.log(e.innerHTML),arrayGraphs.push(e.innerHTML);mode.addEventListener("click",async()=>{theme=localStorage.getItem("s"),mermaid.initialize({startOnLoad:!0,logLevel:"debug",theme:"2"===theme?"forest":"dark"});for(let e=0;e<nodes.length;e++){let t=nodes[e];t.removeAttribute("data-processed"),t.setAttribute("id","mermaid-"+e),t.replaceChildren(),t.innerHTML=arrayGraphs[e],mermaid.init(void 0,t)}},!1)</script><script src="/js/jquery.min.js" defer></script><script src="/js/jquery.qrcode.min.js" defer></script><script type="module">import qrcodeInit from"/js/qrcode.js";qrcodeInit()</script><script type="module">window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,100)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout</script><script type="module">function get_poem(n,e){var t=document.querySelector(n),o=document.querySelector(e),i=new XMLHttpRequest;i.open("get","https://v2.jinrishici.com/one.json?client=browser-sdk/1.2"),i.withCredentials=!0,i.onreadystatechange=function(){if(4===i.readyState){var n=JSON.parse(i.responseText);t.innerHTML=n.data.content,o.innerHTML="["+n.data.origin.dynasty+"] "+n.data.origin.author+"《"+n.data.origin.title+"》"}},i.send()}function modifySubmitBtn(){var n=$(".hbe-button"),e=$("#hbePass");n.length>0&&n.text("重新输入密码"),e.length>0&&e.attr("autocomplete","false")}function layoutTagCloud(){}function loopHover(){var n=$(".tagcloud a"),e=$('.tagcloud a[class="tag-hover"]'),t=Math.round(Math.random()*(n.length-1));if(t<0&&(t=0),t>n.length&&(t=n.length-1),n.length){if(e.length)for(let n=0;n<e.length;n++)e[n].classList="";n[t].classList="tag-hover"}}function setIntervalPrecision(n,e){let t=window.interValPrecisionObj||(window.interValPrecisionObj={num:0});t.num++,t["n"+t.num]=!0;var o=t.num,i=+new Date,a=0;return e=e||0,function r(){t["n"+o]&&(+new Date>i+e*(a+1)&&(a++,n(a)),window.requestAnimationFrame(r))}(),o}function clearIntervalPrecision(n){window.interValPrecisionObj&&(window.cancelAnimationFrame("n"+n),delete window.interValPrecisionObj["n"+n])}$("div").hasClass("poem-wrap")&&get_poem("#poem","#info"),modifySubmitBtn(),setIntervalPrecision(loopHover,100)</script></body></html>