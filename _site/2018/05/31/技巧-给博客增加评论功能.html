<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/yqwoe.github.io/theme/img/favicon.ico" >
    <title>
        
            给博客增加评论功能 &middot; 双城记
        
    </title>

    <script src="/yqwoe.github.io/theme/js/jquery-3.2.1.min.js"></script>
    <script src="/yqwoe.github.io/theme/js/popper.min.js"></script>
    <script src="/yqwoe.github.io/theme/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/yqwoe.github.io/theme/css/bootstrap.css">
    <link rel="stylesheet" href="/yqwoe.github.io/theme/css/site.css">
    <link rel="stylesheet" href="/yqwoe.github.io/theme/css/syntax.css">
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>给博客增加评论功能 | 双城记</title>
<meta name="generator" content="Jekyll v3.8.2" />
<meta property="og:title" content="给博客增加评论功能" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="首先感谢@imsun大神的插件Gitment" />
<meta property="og:description" content="首先感谢@imsun大神的插件Gitment" />
<link rel="canonical" href="http://localhost:4000/yqwoe.github.io/2018/05/31/%E6%8A%80%E5%B7%A7-%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%A2%9E%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD.html" />
<meta property="og:url" content="http://localhost:4000/yqwoe.github.io/2018/05/31/%E6%8A%80%E5%B7%A7-%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%A2%9E%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD.html" />
<meta property="og:site_name" content="双城记" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-05-31T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"首先感谢@imsun大神的插件Gitment","@type":"BlogPosting","url":"http://localhost:4000/yqwoe.github.io/2018/05/31/%E6%8A%80%E5%B7%A7-%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%A2%9E%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD.html","headline":"给博客增加评论功能","dateModified":"2018-05-31T00:00:00+08:00","datePublished":"2018-05-31T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/yqwoe.github.io/2018/05/31/%E6%8A%80%E5%B7%A7-%E7%BB%99%E5%8D%9A%E5%AE%A2%E5%A2%9E%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<style>
    table{
    /* border-left:1px solid #000000;border-top:1px solid #000000; */
    /* width: 100%; */
    /* word-wrap:break-word; word-break:break-all; */
    border: 1px solid #dee2e6;
    width: 100%;
    max-width: 100%;
    margin-bottom: 15px;
    background-color: transparent;
    border-collapse: collapse;
    display: table;
    border-spacing: 2px;
    text-align:center;
  }
  table thead tbody{
  display: table-row-group;
    vertical-align: middle;
    border-color: inherit;
  }
  table tbody tr:nth-of-type(odd) {
    background-color: rgba(0,0,0,0.05);
}
</style>

<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top justify-content-between">
    <a class="navbar-brand font-weight-bold" href="/yqwoe.github.io/index.html">双城记</a>
    <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarContent" >
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarContent">
        <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a href="http://localhost:4000/feed.xml" class="nav-link">RSS订阅</a>
                    </li>
        
            <li class="nav-item">
                <a href='/yqwoe.github.io/index.html'
                   class="nav-link">
                    主页
                </a>
            </li>
        
            <li class="nav-item">
                <a href='/yqwoe.github.io/about.html'
                   class="nav-link">
                    关于
                </a>
            </li>
        
            <li class="nav-item">
                <a href='/yqwoe.github.io/list/posts.html'
                   class="nav-link">
                    文章
                </a>
            </li>
        
        </ul>
    </div>
</nav>








<div class="container site-container" id="top">
    <div class="row">
        <div class="d-none d-lg-block col-lg-4 col-xl-4 side">
            








    <div class="sticky-top space-before">
    <div class="card bg-light mb-3">
        <div class="card-body">
            <div class="card-title">
                <h5>2018年05月31日</h5>
            </div>
            <div class="d-flex flex-wrap align-items-center">
                <span class="icon grey mr-2 mb-2">
                    <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 18.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->

<svg version="1.1" id="Price_tag" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
<g>
	<path d="M19.388,0.405c-0.111-0.314-0.454-0.48-0.769-0.371c-0.315,0.109-0.481,0.455-0.372,0.77
		c0.929,2.67-0.915,4.664-2.321,5.732l-0.568-0.814c-0.191-0.273-0.618-0.5-0.95-0.504L11.22,5.232
		c-0.332-0.006-0.825,0.146-1.097,0.338l-9.394,6.587c-0.455,0.32-0.565,0.947-0.247,1.404l4.269,6.108
		c0.32,0.455,0.831,0.4,1.287,0.082l9.394-6.588c0.27-0.191,0.582-0.603,0.692-0.918l0.998-3.145
		c0.11-0.314,0.043-0.793-0.148-1.066l-0.346-0.496C18.516,6.091,20.476,3.534,19.388,0.405z M15.017,9.763
		c-0.727,0.51-1.731,0.332-2.24-0.396c-0.511-0.73-0.333-1.734,0.395-2.246C13.75,6.716,14.5,6.745,15.04,7.138
		c-0.272,0.164-0.459,0.26-0.494,0.275c-0.301,0.143-0.43,0.504-0.288,0.805c0.104,0.219,0.321,0.348,0.547,0.348
		c0.086,0,0.174-0.02,0.257-0.059c0.194-0.092,0.402-0.201,0.619-0.33C15.778,8.771,15.542,9.394,15.017,9.763z"/>
</g>
</svg>

                </span>
                
                    <a href="/yqwoe.github.io/list/posts.html#技巧"
                       class="bg-white border rounded p-1 mr-2 mb-2 d-inline-block">
                        技巧
                    </a>
                
                    <a href="/yqwoe.github.io/list/posts.html#gitment"
                       class="bg-white border rounded p-1 mr-2 mb-2 d-inline-block">
                        gitment
                    </a>
                
                    <a href="/yqwoe.github.io/list/posts.html#git"
                       class="bg-white border rounded p-1 mr-2 mb-2 d-inline-block">
                        git
                    </a>
                
                    <a href="/yqwoe.github.io/list/posts.html#jekyll"
                       class="bg-white border rounded p-1 mr-2 mb-2 d-inline-block">
                        Jekyll
                    </a>
                
            </div>
            <div class="d-flex align-items-center mt-2">
                <span class="icon grey mr-1">
                    <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->

<svg version="1.1" id="Arrow_left" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
<path d="M2.5,10L9,3.5V7h8v6H9v3.5L2.5,10z"/>
</svg>

                </span>
                <a href="/yqwoe.github.io/list/posts.html"> 回到文章 </a>
            </div>
        </div>
    </div>
</div>






        </div>
        <div class="col-md-12 col-lg-8 col-xl-8 pb-4 content">
            <link rel="stylesheet" href="/yqwoe.github.io/static/css/gitment.css">
<script src="/yqwoe.github.io/static/js/gitment.js"></script>
<h1 class="border border-top-0 border-right-0 border-left-0 mb-3 pb-2">给博客增加评论功能</h1>

<div class="d-md-block d-lg-none">
    <div class="sticky-top space-before">
    <div class="card bg-light mb-3">
        <div class="card-body">
            <div class="card-title">
                <h5>2018年05月31日</h5>
            </div>
            <div class="d-flex flex-wrap align-items-center">
                <span class="icon grey mr-2 mb-2">
                    <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 18.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->

<svg version="1.1" id="Price_tag" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
<g>
	<path d="M19.388,0.405c-0.111-0.314-0.454-0.48-0.769-0.371c-0.315,0.109-0.481,0.455-0.372,0.77
		c0.929,2.67-0.915,4.664-2.321,5.732l-0.568-0.814c-0.191-0.273-0.618-0.5-0.95-0.504L11.22,5.232
		c-0.332-0.006-0.825,0.146-1.097,0.338l-9.394,6.587c-0.455,0.32-0.565,0.947-0.247,1.404l4.269,6.108
		c0.32,0.455,0.831,0.4,1.287,0.082l9.394-6.588c0.27-0.191,0.582-0.603,0.692-0.918l0.998-3.145
		c0.11-0.314,0.043-0.793-0.148-1.066l-0.346-0.496C18.516,6.091,20.476,3.534,19.388,0.405z M15.017,9.763
		c-0.727,0.51-1.731,0.332-2.24-0.396c-0.511-0.73-0.333-1.734,0.395-2.246C13.75,6.716,14.5,6.745,15.04,7.138
		c-0.272,0.164-0.459,0.26-0.494,0.275c-0.301,0.143-0.43,0.504-0.288,0.805c0.104,0.219,0.321,0.348,0.547,0.348
		c0.086,0,0.174-0.02,0.257-0.059c0.194-0.092,0.402-0.201,0.619-0.33C15.778,8.771,15.542,9.394,15.017,9.763z"/>
</g>
</svg>

                </span>
                
                    <a href="/yqwoe.github.io/list/posts.html#技巧"
                       class="bg-white border rounded p-1 mr-2 mb-2 d-inline-block">
                        技巧
                    </a>
                
                    <a href="/yqwoe.github.io/list/posts.html#gitment"
                       class="bg-white border rounded p-1 mr-2 mb-2 d-inline-block">
                        gitment
                    </a>
                
                    <a href="/yqwoe.github.io/list/posts.html#git"
                       class="bg-white border rounded p-1 mr-2 mb-2 d-inline-block">
                        git
                    </a>
                
                    <a href="/yqwoe.github.io/list/posts.html#jekyll"
                       class="bg-white border rounded p-1 mr-2 mb-2 d-inline-block">
                        Jekyll
                    </a>
                
            </div>
            <div class="d-flex align-items-center mt-2">
                <span class="icon grey mr-1">
                    <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->

<svg version="1.1" id="Arrow_left" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
<path d="M2.5,10L9,3.5V7h8v6H9v3.5L2.5,10z"/>
</svg>

                </span>
                <a href="/yqwoe.github.io/list/posts.html"> 回到文章 </a>
            </div>
        </div>
    </div>
</div>

</div>

<h3 id="首先感谢imsun大神的插件gitment">首先感谢<a href="https://github.com/imsun">@imsun</a>大神的插件<a href="https://imsun.github.io/gitment/">Gitment</a></h3>

<!--more-->

<p>插件本身默认支持英文，所以我下载了源码进行一部分改造。以下是源码：<a href="yqwoe.space/yqwoe.github.io/static/js/gitment.js">giment.js</a> 、 <a href="yqwoe.space/yqwoe.github.io/static/css/gitment.css">giement.css</a></p>

<p>下边是操作步骤，不是技术同学先参考一下<a href="https://imsun.github.io/gitment/">Gitment Demo Page</a> 再进行操作。</p>
<ul>
  <li><a href="https://www.jekyll.com.cn/docs/home/">Jekyll教程</a></li>
  <li><a href="https://github.com/imsun/gitment">Gitment Readme</a></li>
</ul>

<h3 id="基本使用">基本使用</h3>
<h4 id="1-注册-oauth-application">1. 注册 OAuth Application</h4>
<p><a href="https://github.com/settings/applications/new">New OAuth</a> ，填写内容时候确保 callback URL 与你的博客地址域名一致。</p>
<h4 id="2引入jscss-到文章页面">2.引入js、css 到文章页面</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div id="container"&gt;&lt;/div&gt;
&lt;link rel="stylesheet" href="https://yqwoe.space/yqwoe.github.io/static/css/gitment.css"&gt;
&lt;script src="https://yqwoe.space/yqwoe.github.io/static/js/gitment.js"&gt;&lt;/script&gt;
&lt;script&gt;
/**
*第一个坑，默认id是填入完整的url，而issue的label长度限制为50，所以url必然会超长。
*/
var paths = location.pathname.split('/')
var id = decodeURI(paths[paths.length - 1 ]))
var gitment = new Gitment({
  id: id, // 必填，不然评论信息不会加载成功！
  owner: '你的 GitHub ID',
  repo: '存储评论的 repo',
  oauth: {
    client_id: '你注册 OAuth 的 client ID',
    client_secret: '你注册 OAuth 的 client secret',
  },
})
gitment.render('container')
&lt;/script&gt;
</code></pre></div></div>
<h4 id="3-初始化评论">3. 初始化评论</h4>
<p>页面发布后，你需要访问页面并使用你的 GitHub 账号登录（请确保你的账号是第二步所填 repo 的 owner），点击初始化按钮。</p>

<h4 id="敲黑板下一篇博客会介绍-jekyll-admin-插件的使用方法和一些填坑技巧">敲黑板，下一篇博客会介绍 《<strong>Jekyll-Admin 插件的使用方法</strong>》和一些填坑技巧。</h4>

<p>我的博客评论功能目前只支持全球最大<del>同性</del>交友网站<a href="github.com/yqwoe">Github</a>的账号，以后会慢慢扩展。
以上是我的分享，谢谢！！</p>


<div id="container"></div>
<script>
var myTheme = {
  render(state, instance) {
    const container = document.createElement('div')
    container.lang = "zh-CN"
    container.className = 'gitment-container gitment-root-container'
    container.appendChild(instance.renderHeader(state, instance))
    container.appendChild(instance.renderEditor(state, instance))
    container.appendChild(instance.renderComments(state, instance))
    container.appendChild(instance.renderFooter(state, instance))
    return container
  },
}
console.log(location)

var paths = location.pathname.split('/')
console.log(paths)
console.log(decodeURI(paths[paths.length - 1 ]))
var gitment = new Gitment({
    id: decodeURI(paths[paths.length - 1 ]),
  owner: 'yqwoe',
  repo: 'yqwoe.github.io',
  oauth: {
    client_id: '38908a117aeb2426fddb',
    client_secret: 'fab30686c5598f5ba19e726492b27e33e40eceda',
  },
  theme: myTheme
})
gitment.render('container')
</script>
<style>
blockquote{
          font: 14px/22px normal helvetica, sans-serif;
          margin-top: 10px;
          margin-bottom: 10px;
          margin-left: 50px;
          padding-left: 15px;
          padding-top: 10px;
          padding-right: 10px;
          padding-bottom: 10px;
          border-left: 3px solid #ccc;
          background-color:none;
     }
</style>





        </div>
        <div class="col-md-12 d-lg-none bottom">
            

        </div>
    </div>
</div>

<script type="text/javascript">
/*!
 * IE10 viewport hack for Surface/desktop Windows 8 bug
 * Copyright 2014-2017 The Bootstrap Authors
 * Copyright 2014-2017 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

// See the Getting Started docs for more information:
// https://getbootstrap.com/getting-started/#support-ie10-width

(function () {
    'use strict'

    if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
        var msViewportStyle = document.createElement('style')
        msViewportStyle.appendChild(
            document.createTextNode(
                '@-ms-viewport{width:auto!important}'
            )
        )
        document.head.appendChild(msViewportStyle)
    }
}())
</script>

</body>

</html>
